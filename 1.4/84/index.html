
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://pytorch.apachecn.org/1.4/84/">
      
      
        <link rel="prev" href="../83/">
      
      
        <link rel="next" href="../85/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.0">
    
    
      
        <title>torch脚本 - 【布客】PyTorch 中文翻译</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.45e1311d.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#torch" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="【布客】PyTorch 中文翻译" class="md-header__button md-logo" aria-label="【布客】PyTorch 中文翻译" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            【布客】PyTorch 中文翻译
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              torch脚本
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/apachecn/pytorch-doc-zh" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    apachecn/pytorch-doc-zh
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="【布客】PyTorch 中文翻译" class="md-nav__button md-logo" aria-label="【布客】PyTorch 中文翻译" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    【布客】PyTorch 中文翻译
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/apachecn/pytorch-doc-zh" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    apachecn/pytorch-doc-zh
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PyTorch 中文文档 & 教程
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    PyTorch 新特性
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            PyTorch 新特性
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../LatestChanges/PyTorch_V2.0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    V2.0
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../LatestChanges/PyTorch_V1.13/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    V1.13
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../LatestChanges/PyTorch_V1.12/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    V1.12
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../LatestChanges/PyTorch_V1.11/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    V1.11
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../LatestChanges/PyTorch_V1.10/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    V1.10
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../LatestChanges/PyTorch_V1.9/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    V1.9
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../LatestChanges/PyTorch_V1.8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    V1.8
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../LatestChanges/PyTorch_V1.7/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    V1.7
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../LatestChanges/PyTorch_V1.6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    V1.6
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../LatestChanges/PyTorch_V1.5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    V1.5
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../LatestChanges/PyTorch_V1.4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    V1.4
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../LatestChanges/PyTorch_V1.3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    V1.3
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../LatestChanges/PyTorch_V1.2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    V1.2
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    PyTorch 2.x 中文文档 & 教程
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            PyTorch 2.x 中文文档 & 教程
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    中文教程
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            中文教程
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1_1" id="__nav_3_1_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    PyTorch Recipes
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_1">
            <span class="md-nav__icon md-icon"></span>
            PyTorch Recipes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/recipes/recipes_index/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    See All Recipes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/prototype/prototype_index/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    See All Prototype Recipes
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_2" >
        
          
          <label class="md-nav__link" for="__nav_3_1_2" id="__nav_3_1_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Introduction to PyTorch
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_2">
            <span class="md-nav__icon md-icon"></span>
            Introduction to PyTorch
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/basics/intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Learn the Basics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/basics/quickstart_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quickstart
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/basics/tensorqs_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tensors
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/basics/data_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Datasets & DataLoaders
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/basics/transforms_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Transforms
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/basics/buildmodel_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Build the Neural Network
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/basics/autogradqs_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Automatic Differentiation with torch.autograd
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/basics/optimization_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Optimizing Model Parameters
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/basics/saveloadrun_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Save and Load the Model
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_3" >
        
          
          <label class="md-nav__link" for="__nav_3_1_3" id="__nav_3_1_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Introduction to PyTorch on YouTube
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_3">
            <span class="md-nav__icon md-icon"></span>
            Introduction to PyTorch on YouTube
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/introyt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction to PyTorch - YouTube Series
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/introyt/introyt1_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction to PyTorch
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/introyt/tensors_deeper_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction to PyTorch Tensors
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/introyt/autogradyt_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    The Fundamentals of Autograd
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/introyt/modelsyt_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Building Models with PyTorch
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/introyt/tensorboardyt_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PyTorch TensorBoard Support
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/introyt/trainingyt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Training with PyTorch
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/introyt/captumyt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Model Understanding with Captum
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_4" >
        
          
          <label class="md-nav__link" for="__nav_3_1_4" id="__nav_3_1_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Learning PyTorch
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_4">
            <span class="md-nav__icon md-icon"></span>
            Learning PyTorch
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/deep_learning_60min_blitz/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deep Learning with PyTorch: A 60 Minute Blitz
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/pytorch_with_examples/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Learning PyTorch with Examples
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/nn_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    What is torch.nn really?
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/tensorboard_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Visualizing Models, Data, and Training with TensorBoard
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_5" >
        
          
          <label class="md-nav__link" for="__nav_3_1_5" id="__nav_3_1_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Image and Video
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_5">
            <span class="md-nav__icon md-icon"></span>
            Image and Video
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/torchvision_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TorchVision Object Detection Finetuning Tutorial
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/transfer_learning_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Transfer Learning for Computer Vision Tutorial
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/fgsm_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Adversarial Example Generation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/dcgan_faces_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DCGAN Tutorial
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/spatial_transformer_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Spatial Transformer Networks Tutorial
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/vt_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Optimizing Vision Transformer Model for Deployment
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_6" >
        
          
          <label class="md-nav__link" for="__nav_3_1_6" id="__nav_3_1_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Audio
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_6">
            <span class="md-nav__icon md-icon"></span>
            Audio
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/audio_io_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Audio I/O
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/audio_resampling_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Audio Resampling
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/audio_data_augmentation_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Audio Data Augmentation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/audio_feature_extractions_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Audio Feature Extractions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/audio_feature_augmentation_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Audio Feature Augmentation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/audio_datasets_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Audio Datasets
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/speech_recognition_pipeline_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Speech Recognition with Wav2Vec2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/text_to_speech_with_torchaudio/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Text-to-speech with Tacotron2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/forced_alignment_with_torchaudio_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Forced Alignment with Wav2Vec2
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_7" >
        
          
          <label class="md-nav__link" for="__nav_3_1_7" id="__nav_3_1_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Text
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_7">
            <span class="md-nav__icon md-icon"></span>
            Text
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/transformer_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Language Modeling with nn.Transformer and torchtext
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/bettertransformer_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fast Transformer Inference with Better Transformer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/char_rnn_classification_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NLP From Scratch: Classifying Names with a Character-Level RNN
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/char_rnn_generation_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NLP From Scratch: Generating Names with a Character-Level RNN
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/seq2seq_translation_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NLP From Scratch: Translation with a Sequence to Sequence Network and Attention
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/text_sentiment_ngrams_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Text classification with the torchtext library
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/translation_transformer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Language Translation with nn.Transformer and torchtext
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/torchtext_custom_dataset_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Preprocess custom text dataset using Torchtext
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_8" >
        
          
          <label class="md-nav__link" for="__nav_3_1_8" id="__nav_3_1_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Backends
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_8">
            <span class="md-nav__icon md-icon"></span>
            Backends
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/onnx/intro_onnx/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction to ONNX
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_9" >
        
          
          <label class="md-nav__link" for="__nav_3_1_9" id="__nav_3_1_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Reinforcement Learning
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_9">
            <span class="md-nav__icon md-icon"></span>
            Reinforcement Learning
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/reinforcement_q_learning/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reinforcement Learning (DQN) Tutorial
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/reinforcement_ppo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reinforcement Learning (PPO) with TorchRL Tutorial
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/mario_rl_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Train a Mario-playing RL Agent
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_10" >
        
          
          <label class="md-nav__link" for="__nav_3_1_10" id="__nav_3_1_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Deploying PyTorch Models in Production
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_10">
            <span class="md-nav__icon md-icon"></span>
            Deploying PyTorch Models in Production
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/onnx/intro_onnx/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction to ONNX
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/flask_rest_api_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deploying PyTorch in Python via a REST API with Flask
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/Intro_to_TorchScript_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction to TorchScript
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/advanced/cpp_export/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Loading a TorchScript Model in C++
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/advanced/super_resolution_with_onnxruntime/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    (optional) Exporting a Model from PyTorch to ONNX and Running it using ONNX Runtime
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/realtime_rpi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Real Time Inference on Raspberry Pi 4 (30 fps!)
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_11" >
        
          
          <label class="md-nav__link" for="__nav_3_1_11" id="__nav_3_1_11_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Code Transforms with FX
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_11">
            <span class="md-nav__icon md-icon"></span>
            Code Transforms with FX
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/fx_conv_bn_fuser/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    (beta) Building a Convolution/Batch Norm fuser in FX
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/fx_profiling_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    (beta) Building a Simple CPU Performance Profiler with FX
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_12" >
        
          
          <label class="md-nav__link" for="__nav_3_1_12" id="__nav_3_1_12_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Frontend APIs
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_12">
            <span class="md-nav__icon md-icon"></span>
            Frontend APIs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/memory_format_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    (beta) Channels Last Memory Format in PyTorch
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/forward_ad_usage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Forward-mode Automatic Differentiation (Beta)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/jacobians_hessians/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Jacobians, Hessians, hvp, vhp, and more: composing function transforms
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/ensembling/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Model ensembling
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/per_sample_grads/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Per-sample-gradients
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/advanced/cpp_frontend/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using the PyTorch C++ Frontend
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/advanced/torch-script-parallelism/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dynamic Parallelism in TorchScript
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/advanced/cpp_autograd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Autograd in C++ Frontend
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_13" >
        
          
          <label class="md-nav__link" for="__nav_3_1_13" id="__nav_3_1_13_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Extending PyTorch
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_13">
            <span class="md-nav__icon md-icon"></span>
            Extending PyTorch
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/custom_function_double_backward_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Double Backward with Custom Functions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/custom_function_conv_bn_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fusing Convolution and Batch Norm using Custom Function
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/advanced/cpp_extension/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Custom C++ and CUDA Extensions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/advanced/torch_script_custom_ops/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Extending TorchScript with Custom C++ Operators
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/advanced/torch_script_custom_classes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Extending TorchScript with Custom C++ Classes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/advanced/dispatcher/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Registering a Dispatched Operator in C++
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/advanced/extend_dispatcher/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Extending dispatcher for a new backend in C++
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/advanced/privateuseone/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Facilitating New Backend Integration by PrivateUse1
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_14" >
        
          
          <label class="md-nav__link" for="__nav_3_1_14" id="__nav_3_1_14_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Model Optimization
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_14">
            <span class="md-nav__icon md-icon"></span>
            Model Optimization
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/profiler/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Profiling your PyTorch Module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/tensorboard_profiler_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PyTorch Profiler With TensorBoard
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/hyperparameter_tuning_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hyperparameter tuning with Ray Tune
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/vt_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Optimizing Vision Transformer Model for Deployment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/parametrizations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Parametrizations Tutorial
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/pruning_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pruning Tutorial
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/advanced/dynamic_quantization_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    (beta) Dynamic Quantization on an LSTM Word Language Model
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/dynamic_quantization_bert_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    (beta) Dynamic Quantization on BERT
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/quantized_transfer_learning_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    (beta) Quantized Transfer Learning for Computer Vision Tutorial
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/advanced/static_quantization_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    (beta) Static Quantization with Eager Mode in PyTorch
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/torchserve_with_ipex/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Grokking PyTorch Intel CPU performance from first principles
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/torchserve_with_ipex_2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Grokking PyTorch Intel CPU performance from first principles (Part 2)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/nvfuser_intro_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started - Accelerate Your Scripts with nvFuser
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/ax_multiobjective_nas_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multi-Objective NAS with Ax
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/torch_compile_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.compile Tutorial
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/inductor_debug_cpu/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Inductor CPU backend debugging and profiling
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/scaled_dot_product_attention_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    (Beta) Implementing High-Performance Transformers with Scaled Dot Product Attention (SDPA)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/scaled_dot_product_attention_tutorial%23using-sdpa-with-torch-compile/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using SDPA with torch.compile
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/scaled_dot_product_attention_tutorial%23conclusion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Conclusion
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/knowledge_distillation_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Knowledge Distillation Tutorial
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_15" >
        
          
          <label class="md-nav__link" for="__nav_3_1_15" id="__nav_3_1_15_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Parallel and Distributed Training
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_15">
            <span class="md-nav__icon md-icon"></span>
            Parallel and Distributed Training
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/distributed/home/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Distributed and Parallel Training Tutorials
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/dist_overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PyTorch Distributed Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/ddp_series_intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Distributed Data Parallel in PyTorch - Video Tutorials
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/model_parallel_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Single-Machine Model Parallel Best Practices
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/ddp_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started with Distributed Data Parallel
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/dist_tuto/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Writing Distributed Applications with PyTorch
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/FSDP_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started with Fully Sharded Data Parallel(FSDP)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/FSDP_adavnced_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Advanced Model Training with Fully Sharded Data Parallel (FSDP)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/process_group_cpp_extension_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Customize Process Group Backends Using Cpp Extensions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/rpc_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started with Distributed RPC Framework
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/rpc_param_server_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Implementing a Parameter Server Using Distributed RPC Framework
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/dist_pipeline_parallel_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Distributed Pipeline Parallelism Using RPC
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/rpc_async_execution/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Implementing Batch RPC Processing Using Asynchronous Executions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/advanced/rpc_ddp_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Combining Distributed DataParallel with Distributed RPC Framework
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/pipeline_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Training Transformer models using Pipeline Parallelism
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/advanced/ddp_pipeline/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Training Transformer models using Distributed Data Parallel and Pipeline Parallelism
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/advanced/generic_join/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Distributed Training with Uneven Inputs Using the Join Context Manager
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_16" >
        
          
          <label class="md-nav__link" for="__nav_3_1_16" id="__nav_3_1_16_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Mobile
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_16">
            <span class="md-nav__icon md-icon"></span>
            Mobile
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/deeplabv3_on_ios/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Image Segmentation DeepLabV3 on iOS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/deeplabv3_on_android/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Image Segmentation DeepLabV3 on Android
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_17" >
        
          
          <label class="md-nav__link" for="__nav_3_1_17" id="__nav_3_1_17_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Recommendation Systems
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_17">
            <span class="md-nav__icon md-icon"></span>
            Recommendation Systems
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/intermediate/torchrec_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction to TorchRec
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/advanced/sharding/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Exploring TorchRec sharding
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_18" >
        
          
          <label class="md-nav__link" for="__nav_3_1_18" id="__nav_3_1_18_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Multimodality
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_18_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_18">
            <span class="md-nav__icon md-icon"></span>
            Multimodality
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/tutorials/beginner/flava_finetuning_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TorchMultimodal Tutorial: Finetuning FLAVA
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    中文文档
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            中文文档
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/docs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    介绍
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2.0/docs/cuda/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.cuda
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    PyTorch 1.7 中文文档
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            PyTorch 1.7 中文文档
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    学习 PyTorch
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            学习 PyTorch
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1_1" id="__nav_4_1_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    PyTorch 深度学习：60 分钟的突击
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1_1">
            <span class="md-nav__icon md-icon"></span>
            PyTorch 深度学习：60 分钟的突击
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/02/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    介绍
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/03/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    张量
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/04/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.autograd的简要介绍
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/05/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    神经网络
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/06/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    训练分类器
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_2" >
        
          
          <label class="md-nav__link" for="__nav_4_1_2" id="__nav_4_1_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    通过示例学习 PyTorch
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1_2">
            <span class="md-nav__icon md-icon"></span>
            通过示例学习 PyTorch
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/07/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    介绍
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/08/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    热身：NumPy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/09/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PyTorch：张量
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/10/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PyTorch：张量和 Autograd
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/11/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PyTorch：定义新的 Autograd 函数
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/12/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PyTorch：nn
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/13/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PyTorch：optim
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/14/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PyTorch：自定义nn模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/15/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PyTorch：控制流 - 权重共享
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/16/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.nn到底是什么？
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/17/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    使用 TensorBoard 可视化模型，数据和训练
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    图片/视频
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            图片/视频
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/19/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torchvision对象检测微调教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/20/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    计算机视觉的迁移学习教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/21/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    对抗示例生成
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/22/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DCGAN 教程
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    音频
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            音频
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/24/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    音频 I/O 和torchaudio的预处理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/25/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    使用torchaudio的语音命令识别
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    文本
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            文本
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/27/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    使用nn.Transformer和torchtext的序列到序列建模
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/28/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    从零开始的 NLP：使用字符级 RNN 分类名称
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/29/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    从零开始的 NLP：使用字符级 RNN 生成名称
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/30/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    从零开始的 NLP：使用序列到序列网络和注意力的翻译
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/31/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    使用torchtext的文本分类
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/32/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torchtext语言翻译
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    强化学习
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            强化学习
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/34/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    强化学习（DQN）教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/35/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    训练玩马里奥的 RL 智能体
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6" >
        
          
          <label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    在生产中部署 PyTorch 模型
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            在生产中部署 PyTorch 模型
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/37/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    通过使用 Flask 的 REST API 在 Python 中部署 PyTorch
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/38/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TorchScript 简介
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/39/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    在 C++ 中加载 TorchScript 模型
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/40/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    将模型从 PyTorch 导出到 ONNX 并使用 ONNX 运行时运行它（可选）
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_7" >
        
          
          <label class="md-nav__link" for="__nav_4_7" id="__nav_4_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    前端 API
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_7">
            <span class="md-nav__icon md-icon"></span>
            前端 API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/42/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PyTorch 中的命名张量简介（原型）
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/43/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PyTorch 中通道在最后的内存格式（beta）
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/44/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    使用 PyTorch C++ 前端
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/45/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    自定义 C++ 和 CUDA 扩展
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/46/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    使用自定义 C++ 运算符扩展 TorchScript
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/47/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    使用自定义 C++ 类扩展 TorchScript
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/48/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TorchScript 中的动态并行性
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/49/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C++ 前端中的 Autograd
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/50/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    在 C++ 中注册调度运算符
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_8" >
        
          
          <label class="md-nav__link" for="__nav_4_8" id="__nav_4_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    模型优化
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_8">
            <span class="md-nav__icon md-icon"></span>
            模型优化
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/52/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    分析您的 PyTorch 模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/53/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    使用 Ray Tune 的超参数调整
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/54/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    模型剪裁教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/55/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LSTM 单词语言模型上的动态量化（beta）
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/56/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    BERT 上的动态量化（Beta）
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/57/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PyTorch 中使用 Eager 模式的静态量化（beta）
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/58/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    计算机视觉的量化迁移学习教程（beta）
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_9" >
        
          
          <label class="md-nav__link" for="__nav_4_9" id="__nav_4_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    并行和分布式训练
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_9">
            <span class="md-nav__icon md-icon"></span>
            并行和分布式训练
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/60/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PyTorch 分布式概述
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/61/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    单机模型并行最佳实践
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/62/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    分布式数据并行入门
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/63/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    用 PyTorch 编写分布式应用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/64/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    分布式 RPC 框架入门
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/65/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    使用分布式 RPC 框架实现参数服务器
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/66/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    使用 RPC 的分布式管道并行化
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/67/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    使用异步执行实现批量 RPC 处理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.7/68/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    将分布式DataParallel与分布式 RPC 框架相结合
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    PyTorch 1.4 中文文档 & 教程
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            PyTorch 1.4 中文文档 & 教程
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" >
        
          
          <label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    入门
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1">
            <span class="md-nav__icon md-icon"></span>
            入门
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1_1" >
        
          
          <label class="md-nav__link" for="__nav_5_1_1" id="__nav_5_1_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    使用 PyTorch 进行深度学习：60 分钟的闪电战
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1_1">
            <span class="md-nav__icon md-icon"></span>
            使用 PyTorch 进行深度学习：60 分钟的闪电战
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    介绍
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../blitz/tensor_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    什么是PyTorch
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../blitz/autograd_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Autograd：自动求导
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../blitz/neural_networks_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    神经网络
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../blitz/cifar10_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    训练分类器
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../blitz/data_parallel_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    可选：数据并行
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    编写自定义数据集，数据加载器和转换
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    使用 TensorBoard 可视化模型，数据和训练
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    图片
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            图片
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TorchVision 对象检测微调教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../9/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    转移学习的计算机视觉教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../10/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    空间变压器网络教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../11/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    使用 PyTorch 进行神经传递
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../12/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    对抗示例生成
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../13/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DCGAN 教程
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
        
          
          <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    音频
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            音频
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../15/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torchaudio 教程
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4" >
        
          
          <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    文本
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4">
            <span class="md-nav__icon md-icon"></span>
            文本
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../17/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NLP From Scratch: 使用char-RNN对姓氏进行分类
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../18/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NLP From Scratch: 生成名称与字符级RNN
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../19/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NLP From Scratch: 基于注意力机制的 seq2seq 神经网络翻译
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../20/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    使用 TorchText 进行文本分类
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../21/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    使用 TorchText 进行语言翻译
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../22/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    使用 nn.Transformer 和 TorchText 进行序列到序列建模
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_5" >
        
          
          <label class="md-nav__link" for="__nav_5_5" id="__nav_5_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    命名为 Tensor(实验性）
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_5">
            <span class="md-nav__icon md-icon"></span>
            命名为 Tensor(实验性）
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../24/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    (实验性)PyTorch 中的命名张量简介
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_6" >
        
          
          <label class="md-nav__link" for="__nav_5_6" id="__nav_5_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    强化学习
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_6">
            <span class="md-nav__icon md-icon"></span>
            强化学习
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../26/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    强化学习(DQN)教程
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_7" >
        
          
          <label class="md-nav__link" for="__nav_5_7" id="__nav_5_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    在生产中部署 PyTorch 模型
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_7">
            <span class="md-nav__icon md-icon"></span>
            在生产中部署 PyTorch 模型
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../28/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    通过带有 Flask 的 REST API 在 Python 中部署 PyTorch
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../29/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TorchScript 简介
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../30/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    在 C --中加载 TorchScript 模型
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../31/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    (可选）将模型从 PyTorch 导出到 ONNX 并使用 ONNX Runtime 运行
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_8" >
        
          
          <label class="md-nav__link" for="__nav_5_8" id="__nav_5_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    并行和分布式训练
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_8">
            <span class="md-nav__icon md-icon"></span>
            并行和分布式训练
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../33/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    单机模型并行最佳实践
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../34/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    分布式数据并行入门
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../35/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    用 PyTorch 编写分布式应用程序
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../36/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    分布式 RPC 框架入门
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../37/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    (高级）带有 Amazon AWS 的 PyTorch 1.0 分布式训练师
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_9" >
        
          
          <label class="md-nav__link" for="__nav_5_9" id="__nav_5_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    扩展 PyTorch
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_9">
            <span class="md-nav__icon md-icon"></span>
            扩展 PyTorch
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../39/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    使用自定义 C --运算符扩展 TorchScript
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../40/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    使用自定义 C --类扩展 TorchScript
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../41/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    使用 numpy 和 scipy 创建扩展
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../42/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    自定义 C --和 CUDA 扩展
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_10" >
        
          
          <label class="md-nav__link" for="__nav_5_10" id="__nav_5_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    模型优化
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_10">
            <span class="md-nav__icon md-icon"></span>
            模型优化
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../44/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LSTM Word 语言模型上的(实验）动态量化
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../45/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    (实验性）在 PyTorch 中使用 Eager 模式进行静态量化
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../46/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    (实验性）计算机视觉教程的量化转移学习
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../47/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    (实验）BERT 上的动态量化
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../48/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    修剪教程
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_11" >
        
          
          <label class="md-nav__link" for="__nav_5_11" id="__nav_5_11_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    PyTorch 用其他语言
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_11">
            <span class="md-nav__icon md-icon"></span>
            PyTorch 用其他语言
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../50/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    使用 PyTorch C --前端
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_12" >
        
          
          <label class="md-nav__link" for="__nav_5_12" id="__nav_5_12_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    PyTorch 基础知识
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_12">
            <span class="md-nav__icon md-icon"></span>
            PyTorch 基础知识
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../52/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    通过示例学习 PyTorch
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../53/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.nn 到底是什么？
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_13" >
        
          
          <label class="md-nav__link" for="__nav_5_13" id="__nav_5_13_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    笔记
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_13">
            <span class="md-nav__icon md-icon"></span>
            笔记
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../56/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    自动求导机制
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../57/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    广播语义
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../58/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CPU 线程和 TorchScript 推断
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../59/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CUDA 语义
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../60/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    分布式 Autograd 设计
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../61/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    扩展 PyTorch
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../62/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    经常问的问题
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../63/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    大规模部署的功能
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../64/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    并行处理最佳实践
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../65/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    重现性
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../66/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    远程参考协议
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../67/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    序列化语义
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../68/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Windows 常见问题
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../69/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    XLA 设备上的 PyTorch
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_14" >
        
          
          <label class="md-nav__link" for="__nav_5_14" id="__nav_5_14_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    语言绑定
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_14">
            <span class="md-nav__icon md-icon"></span>
            语言绑定
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../71/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PyTorch C -- API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../72/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PyTorch Java API
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_15" checked>
        
          
          <label class="md-nav__link" for="__nav_5_15" id="__nav_5_15_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Python API
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_15_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5_15">
            <span class="md-nav__icon md-icon"></span>
            Python API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../74/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../75/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.nn
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../76/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch功能
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../77/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch张量
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../78/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    张量属性
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../79/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    自动差分包-Torch.Autograd
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../80/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.cuda
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../81/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    分布式通讯包-Torch.Distributed
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../82/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    概率分布-torch分布
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../83/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.hub
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    torch脚本
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    torch脚本
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#torchscript" class="md-nav__link">
    <span class="md-ellipsis">
      创建 TorchScript 代码
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      混合跟踪和脚本编写
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytorch-12-api" class="md-nav__link">
    <span class="md-ellipsis">
      迁移到 PyTorch 1.2 递归脚本 API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="迁移到 PyTorch 1.2 递归脚本 API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      模块
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      功能
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#torchscript_1" class="md-nav__link">
    <span class="md-ellipsis">
      TorchScript 类
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      属性
    </span>
  </a>
  
    <nav class="md-nav" aria-label="属性">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#python-2" class="md-nav__link">
    <span class="md-ellipsis">
      Python 2
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      常数
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      变量
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#torchscript_2" class="md-nav__link">
    <span class="md-ellipsis">
      TorchScript 语言参考
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TorchScript 语言参考">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      类型
    </span>
  </a>
  
    <nav class="md-nav" aria-label="类型">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      默认类型
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      可选类型细化
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#torchscript_3" class="md-nav__link">
    <span class="md-ellipsis">
      TorchScript 类
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      命名为元组
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      表达式
    </span>
  </a>
  
    <nav class="md-nav" aria-label="表达式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      文字
    </span>
  </a>
  
    <nav class="md-nav" aria-label="文字">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      列表结构
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      元组结构
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      字典结构
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      变量
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      算术运算符
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      比较运算符
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      逻辑运算符
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      下标和切片
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      函数调用
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    <span class="md-ellipsis">
      方法调用
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    <span class="md-ellipsis">
      三元表达式
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    <span class="md-ellipsis">
      演员表
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    <span class="md-ellipsis">
      访问模块参数
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    <span class="md-ellipsis">
      语句
    </span>
  </a>
  
    <nav class="md-nav" aria-label="语句">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    <span class="md-ellipsis">
      简单分配
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    <span class="md-ellipsis">
      模式匹配分配
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    <span class="md-ellipsis">
      打印报表
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#if" class="md-nav__link">
    <span class="md-ellipsis">
      If 语句
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#while" class="md-nav__link">
    <span class="md-ellipsis">
      While 循环
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_30" class="md-nav__link">
    <span class="md-ellipsis">
      适用于范围为的循环
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_31" class="md-nav__link">
    <span class="md-ellipsis">
      用于遍历元组的循环
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nnmodulelist" class="md-nav__link">
    <span class="md-ellipsis">
      用于在常量 nn.ModuleList 上循环
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_32" class="md-nav__link">
    <span class="md-ellipsis">
      中断并继续
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_33" class="md-nav__link">
    <span class="md-ellipsis">
      返回
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_34" class="md-nav__link">
    <span class="md-ellipsis">
      可变分辨率
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#python" class="md-nav__link">
    <span class="md-ellipsis">
      使用 Python 值
    </span>
  </a>
  
    <nav class="md-nav" aria-label="使用 Python 值">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_35" class="md-nav__link">
    <span class="md-ellipsis">
      功能
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#python_1" class="md-nav__link">
    <span class="md-ellipsis">
      Python 模块上的属性查找
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#python_2" class="md-nav__link">
    <span class="md-ellipsis">
      Python 定义的常量
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_36" class="md-nav__link">
    <span class="md-ellipsis">
      模块属性
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_37" class="md-nav__link">
    <span class="md-ellipsis">
      调试
    </span>
  </a>
  
    <nav class="md-nav" aria-label="调试">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#jit" class="md-nav__link">
    <span class="md-ellipsis">
      禁用用于调试的 JIT
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_38" class="md-nav__link">
    <span class="md-ellipsis">
      检查码
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_39" class="md-nav__link">
    <span class="md-ellipsis">
      解释图
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_40" class="md-nav__link">
    <span class="md-ellipsis">
      追踪案例
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_41" class="md-nav__link">
    <span class="md-ellipsis">
      自动跟踪检查
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_42" class="md-nav__link">
    <span class="md-ellipsis">
      跟踪器警告
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_43" class="md-nav__link">
    <span class="md-ellipsis">
      内置函数
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_44" class="md-nav__link">
    <span class="md-ellipsis">
      常见问题解答
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../85/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.nn.init
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../86/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.onnx
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../87/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.optim
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../88/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    量化
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../89/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    分布式 RPC 框架
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../90/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch随机
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../91/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch稀疏
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../92/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch存储
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../93/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.utils.bottleneck
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../94/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.utils.checkpoint
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../95/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.utils.cpp_extension
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../96/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.utils.data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../97/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.utils.dlpack
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../98/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.utils.model_zoo
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../99/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.utils.tensorboard
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../100/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    类型信息
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../101/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    命名张量
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../102/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    命名为 Tensors 操作员范围
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../103/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    糟糕！
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_16" >
        
          
          <label class="md-nav__link" for="__nav_5_16" id="__nav_5_16_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    torchvision参考
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_16">
            <span class="md-nav__icon md-icon"></span>
            torchvision参考
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../105/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torchvision
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_17" >
        
          
          <label class="md-nav__link" for="__nav_5_17" id="__nav_5_17_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    音频参考
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_17">
            <span class="md-nav__icon md-icon"></span>
            音频参考
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../107/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torchaudio
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_18" >
        
          
          <label class="md-nav__link" for="__nav_5_18" id="__nav_5_18_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    torchtext参考
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_18_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_18">
            <span class="md-nav__icon md-icon"></span>
            torchtext参考
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../109/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torchtext
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_19" >
        
          
          <label class="md-nav__link" for="__nav_5_19" id="__nav_5_19_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    社区
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_19_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_19">
            <span class="md-nav__icon md-icon"></span>
            社区
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../111/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PyTorch 贡献指南
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../112/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PyTorch 治理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../113/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PyTorch 治理| 感兴趣的人
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    PyTorch 1.0 中文文档 & 教程
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            PyTorch 1.0 中文文档 & 教程
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    目录
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2" >
        
          
          <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    中文教程
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            中文教程
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2_1" >
        
          
          <label class="md-nav__link" for="__nav_6_2_1" id="__nav_6_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    入门
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2_1">
            <span class="md-nav__icon md-icon"></span>
            入门
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2_1_1" >
        
          
          <label class="md-nav__link" for="__nav_6_2_1_1" id="__nav_6_2_1_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    PyTorch 深度学习: 60 分钟极速入门
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_2_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2_1_1">
            <span class="md-nav__icon md-icon"></span>
            PyTorch 深度学习: 60 分钟极速入门
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/deep_learning_60min_blitz/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    介绍
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/blitz_tensor_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    什么是 PyTorch？
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/blitz_autograd_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Autograd：自动求导
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/blitz_neural_networks_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    神经网络
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/blitz_cifar10_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    训练分类器
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/blitz_data_parallel_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    可选：数据并行处理
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/data_loading_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    数据加载和处理教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/pytorch_with_examples/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    用例子学习 PyTorch
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/transfer_learning_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    迁移学习教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/deploy_seq2seq_hybrid_frontend_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    混合前端的 seq2seq 模型部署
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/saving_loading_models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Saving and Loading Models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/nn_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    What is torch.nn really?
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2_2" >
        
          
          <label class="md-nav__link" for="__nav_6_2_2" id="__nav_6_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    图像
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2_2">
            <span class="md-nav__icon md-icon"></span>
            图像
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/finetuning_torchvision_models_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Torchvision 模型微调
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/spatial_transformer_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    空间变换器网络教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/neural_style_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    使用 PyTorch 进行图像风格转换
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/fgsm_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    对抗性示例生成
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/super_resolution_with_caffe2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    使用 ONNX 将模型从 PyTorch 传输到 Caffe2 和移动端
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2_3" >
        
          
          <label class="md-nav__link" for="__nav_6_2_3" id="__nav_6_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    文本
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2_3">
            <span class="md-nav__icon md-icon"></span>
            文本
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/chatbot_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    聊天机器人教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/char_rnn_generation_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    使用字符级别特征的 RNN 网络生成姓氏
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/char_rnn_classification_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    使用字符级别特征的 RNN 网络进行姓氏分类
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2_3_4" >
        
          
          <label class="md-nav__link" for="__nav_6_2_3_4" id="__nav_6_2_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Deep Learning for NLP with Pytorch
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_2_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2_3_4">
            <span class="md-nav__icon md-icon"></span>
            Deep Learning for NLP with Pytorch
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/deep_learning_nlp_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    在深度学习和 NLP 中使用 Pytorch
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/nlp_pytorch_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PyTorch 介绍
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/nlp_deep_learning_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    使用 PyTorch 进行深度学习
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/nlp_word_embeddings_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Word Embeddings: Encoding Lexical Semantics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/nlp_sequence_models_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    序列模型和 LSTM 网络
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/nlp_advanced_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Advanced: Making Dynamic Decisions and the Bi-LSTM CRF
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/seq2seq_translation_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    基于注意力机制的 seq2seq 神经网络翻译
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2_4" >
        
          
          <label class="md-nav__link" for="__nav_6_2_4" id="__nav_6_2_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    生成
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2_4">
            <span class="md-nav__icon md-icon"></span>
            生成
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/dcgan_faces_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DCGAN Tutorial
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2_5" >
        
          
          <label class="md-nav__link" for="__nav_6_2_5" id="__nav_6_2_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    强化学习
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2_5">
            <span class="md-nav__icon md-icon"></span>
            强化学习
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/reinforcement_q_learning/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reinforcement Learning (DQN) Tutorial
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2_6" >
        
          
          <label class="md-nav__link" for="__nav_6_2_6" id="__nav_6_2_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    扩展 PyTorch
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2_6">
            <span class="md-nav__icon md-icon"></span>
            扩展 PyTorch
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/numpy_extensions_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    用 numpy 和 scipy 创建扩展
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/cpp_extension/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Custom C++ and CUDA Extensions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/torch_script_custom_ops/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Extending TorchScript with Custom C++ Operators
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2_7" >
        
          
          <label class="md-nav__link" for="__nav_6_2_7" id="__nav_6_2_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    生产性使用
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_2_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2_7">
            <span class="md-nav__icon md-icon"></span>
            生产性使用
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/dist_tuto/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Writing Distributed Applications with PyTorch
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/aws_distributed_training_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    使用 Amazon AWS 进行分布式训练
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/ONNXLive/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ONNX 现场演示教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/cpp_export/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    在 C++ 中加载 PYTORCH 模型
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2_8" >
        
          
          <label class="md-nav__link" for="__nav_6_2_8" id="__nav_6_2_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    其它语言中的 PyTorch
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_2_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2_8">
            <span class="md-nav__icon md-icon"></span>
            其它语言中的 PyTorch
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/cpp_frontend/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    使用 PyTorch C++ 前端
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3" >
        
          
          <label class="md-nav__link" for="__nav_6_3" id="__nav_6_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    中文文档
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3">
            <span class="md-nav__icon md-icon"></span>
            中文文档
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3_1" >
        
          
          <label class="md-nav__link" for="__nav_6_3_1" id="__nav_6_3_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    注解
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3_1">
            <span class="md-nav__icon md-icon"></span>
            注解
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/notes_autograd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    自动求导机制
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/notes_broadcasting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    广播语义
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/notes_cuda/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CUDA 语义
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/notes_extending/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Extending PyTorch
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/notes_faq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Frequently Asked Questions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/notes_multiprocessing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multiprocessing best practices
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/notes_randomness/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reproducibility
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/notes_serialization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Serialization semantics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/notes_windows/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Windows FAQ
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3_2" >
        
          
          <label class="md-nav__link" for="__nav_6_3_2" id="__nav_6_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    包参考
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3_2">
            <span class="md-nav__icon md-icon"></span>
            包参考
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3_2_1" >
        
          
          <label class="md-nav__link" for="__nav_6_3_2_1" id="__nav_6_3_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    torch
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_3_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3_2_1">
            <span class="md-nav__icon md-icon"></span>
            torch
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/torch/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    介绍
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/torch_tensors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tensors
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/torch_random_sampling/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Random sampling
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/torch_serialization_parallelism_utilities/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Serialization, Parallelism, Utilities
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3_2_1_5" >
        
          
          <label class="md-nav__link" for="__nav_6_3_2_1_5" id="__nav_6_3_2_1_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Math operations
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_6_3_2_1_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3_2_1_5">
            <span class="md-nav__icon md-icon"></span>
            Math operations
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/torch_math_operations_pointwise_ops/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pointwise Ops
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/torch_math_operations_reduction_ops/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reduction Ops
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/torch_math_operations_comparison_ops/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Comparison Ops
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/torch_math_operations_spectral_ops/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Spectral Ops
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/torch_math_operations_other_ops/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Other Operations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/torch_math_operations_blas_lapack_ops/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    BLAS and LAPACK Operations
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/tensors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.Tensor
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/tensor_attributes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tensor Attributes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/type_info/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    数据类型信息
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/sparse/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.sparse
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/cuda/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.cuda
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/storage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.Storage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/nn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.nn
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/nn_functional/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.nn.functional
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/nn_init/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.nn.init
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/optim/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.optim
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/autograd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Automatic differentiation package - torch.autograd
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/distributed/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Distributed communication package - torch.distributed
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/distributions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Probability distributions - torch.distributions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/jit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Torch Script
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/multiprocessing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    多进程包 - torch.multiprocessing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/bottleneck/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.utils.bottleneck
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/checkpoint/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.utils.checkpoint
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/docs_cpp_extension/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.utils.cpp_extension
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.utils.data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/dlpack/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.utils.dlpack
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/hub/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.hub
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/model_zoo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.utils.model_zoo
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/onnx/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.onnx
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/distributed_deprecated/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Distributed communication package (deprecated) - torch.distributed.deprecated
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3_3" >
        
          
          <label class="md-nav__link" for="__nav_6_3_3" id="__nav_6_3_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    torchvision 参考
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3_3">
            <span class="md-nav__icon md-icon"></span>
            torchvision 参考
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/docs_torchvision_ref/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    目录
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/torchvision_datasets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torchvision.datasets
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/torchvision_models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torchvision.models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/torchvision_transforms/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torchvision.transforms
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1.0/torchvision_utils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torchvision.utils
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://pytorch0x.apachecn.org" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PyTorch 0.4 中文文档
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://pytorch0x.apachecn.org" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PyTorch 0.3 中文文档 & 教程
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://pytorch0x.apachecn.org" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PyTorch 0.2 中文文档
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contrib/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    贡献指南
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://www.apachecn.org/about" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    关于我们
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://www.apachecn.org/join" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    加入我们
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://docs.apachecn.org" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    中文资源合集
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#torchscript" class="md-nav__link">
    <span class="md-ellipsis">
      创建 TorchScript 代码
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      混合跟踪和脚本编写
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytorch-12-api" class="md-nav__link">
    <span class="md-ellipsis">
      迁移到 PyTorch 1.2 递归脚本 API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="迁移到 PyTorch 1.2 递归脚本 API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      模块
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      功能
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#torchscript_1" class="md-nav__link">
    <span class="md-ellipsis">
      TorchScript 类
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      属性
    </span>
  </a>
  
    <nav class="md-nav" aria-label="属性">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#python-2" class="md-nav__link">
    <span class="md-ellipsis">
      Python 2
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      常数
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      变量
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#torchscript_2" class="md-nav__link">
    <span class="md-ellipsis">
      TorchScript 语言参考
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TorchScript 语言参考">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      类型
    </span>
  </a>
  
    <nav class="md-nav" aria-label="类型">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      默认类型
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      可选类型细化
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#torchscript_3" class="md-nav__link">
    <span class="md-ellipsis">
      TorchScript 类
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      命名为元组
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      表达式
    </span>
  </a>
  
    <nav class="md-nav" aria-label="表达式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      文字
    </span>
  </a>
  
    <nav class="md-nav" aria-label="文字">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      列表结构
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      元组结构
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      字典结构
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      变量
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      算术运算符
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      比较运算符
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      逻辑运算符
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      下标和切片
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      函数调用
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    <span class="md-ellipsis">
      方法调用
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    <span class="md-ellipsis">
      三元表达式
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    <span class="md-ellipsis">
      演员表
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    <span class="md-ellipsis">
      访问模块参数
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    <span class="md-ellipsis">
      语句
    </span>
  </a>
  
    <nav class="md-nav" aria-label="语句">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    <span class="md-ellipsis">
      简单分配
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    <span class="md-ellipsis">
      模式匹配分配
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    <span class="md-ellipsis">
      打印报表
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#if" class="md-nav__link">
    <span class="md-ellipsis">
      If 语句
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#while" class="md-nav__link">
    <span class="md-ellipsis">
      While 循环
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_30" class="md-nav__link">
    <span class="md-ellipsis">
      适用于范围为的循环
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_31" class="md-nav__link">
    <span class="md-ellipsis">
      用于遍历元组的循环
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nnmodulelist" class="md-nav__link">
    <span class="md-ellipsis">
      用于在常量 nn.ModuleList 上循环
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_32" class="md-nav__link">
    <span class="md-ellipsis">
      中断并继续
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_33" class="md-nav__link">
    <span class="md-ellipsis">
      返回
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_34" class="md-nav__link">
    <span class="md-ellipsis">
      可变分辨率
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#python" class="md-nav__link">
    <span class="md-ellipsis">
      使用 Python 值
    </span>
  </a>
  
    <nav class="md-nav" aria-label="使用 Python 值">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_35" class="md-nav__link">
    <span class="md-ellipsis">
      功能
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#python_1" class="md-nav__link">
    <span class="md-ellipsis">
      Python 模块上的属性查找
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#python_2" class="md-nav__link">
    <span class="md-ellipsis">
      Python 定义的常量
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_36" class="md-nav__link">
    <span class="md-ellipsis">
      模块属性
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_37" class="md-nav__link">
    <span class="md-ellipsis">
      调试
    </span>
  </a>
  
    <nav class="md-nav" aria-label="调试">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#jit" class="md-nav__link">
    <span class="md-ellipsis">
      禁用用于调试的 JIT
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_38" class="md-nav__link">
    <span class="md-ellipsis">
      检查码
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_39" class="md-nav__link">
    <span class="md-ellipsis">
      解释图
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_40" class="md-nav__link">
    <span class="md-ellipsis">
      追踪案例
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_41" class="md-nav__link">
    <span class="md-ellipsis">
      自动跟踪检查
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_42" class="md-nav__link">
    <span class="md-ellipsis">
      跟踪器警告
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_43" class="md-nav__link">
    <span class="md-ellipsis">
      内置函数
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_44" class="md-nav__link">
    <span class="md-ellipsis">
      常见问题解答
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/apachecn/pytorch-doc-zh/edit/master/docs/1.4/84.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/apachecn/pytorch-doc-zh/raw/master/docs/1.4/84.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.15 8.15 0 0 1-1.23-2Z"/></svg>
    </a>
  


<h1 id="torch">torch脚本</h1>
<blockquote>
<p>原文： <a href="https://pytorch.org/docs/stable/jit.html">https://pytorch.org/docs/stable/jit.html</a></p>
</blockquote>
<ul>
<li>
<p><a href="#creating-torchscript-code">创建 TorchScript 代码</a></p>
</li>
<li>
<p><a href="#mixing-tracing-and-scripting">混合跟踪和脚本编写</a></p>
</li>
<li>
<p><a href="#migrating-to-pytorch-1-2-recursive-scripting-api">迁移到 PyTorch 1.2 递归脚本 API</a></p>
<ul>
<li>
<p><a href="#modules">模块</a></p>
</li>
<li>
<p><a href="#functions">功能</a></p>
</li>
<li>
<p><a href="#torchscript-classes">TorchScript 类</a></p>
</li>
<li>
<p><a href="#attributes">属性</a></p>
<ul>
<li><a href="#python-2">Python 2</a></li>
</ul>
</li>
<li>
<p><a href="#constants">常数</a></p>
</li>
<li>
<p><a href="#variables">变量</a></p>
</li>
</ul>
</li>
<li>
<p><a href="#torchscript-language-reference">TorchScript 语言参考</a></p>
<ul>
<li>
<p><a href="#supported-type">类型</a></p>
<ul>
<li>
<p><a href="#default-types">默认类型</a></p>
</li>
<li>
<p><a href="#optional-type-refinement">可选类型细化</a></p>
</li>
<li>
<p><a href="#id3">TorchScript 类</a></p>
</li>
<li>
<p><a href="#named-tuples">命名为元组</a></p>
</li>
</ul>
</li>
<li>
<p><a href="#expressions">表达式</a></p>
<ul>
<li>
<p><a href="#literals">文字</a></p>
<ul>
<li>
<p><a href="#list-construction">列表结构</a></p>
</li>
<li>
<p><a href="#tuple-construction">元组结构</a></p>
</li>
<li>
<p><a href="#dict-construction">字典结构</a></p>
</li>
</ul>
</li>
<li>
<p><a href="#id5">变量</a></p>
</li>
<li>
<p><a href="#arithmetic-operators">算术运算符</a></p>
</li>
<li>
<p><a href="#comparison-operators">比较运算符</a></p>
</li>
<li>
<p><a href="#logical-operators">逻辑运算符</a></p>
</li>
<li>
<p><a href="#subscripts-and-slicing">下标和切片</a></p>
</li>
<li>
<p><a href="#function-calls">函数调用</a></p>
</li>
<li>
<p><a href="#method-calls">方法调用</a></p>
</li>
<li>
<p><a href="#ternary-expressions">三元表达式</a></p>
</li>
<li>
<p><a href="#casts">演员表</a></p>
</li>
<li>
<p><a href="#accessing-module-parameters">访问模块参数</a></p>
</li>
</ul>
</li>
<li>
<p><a href="#statements">语句</a></p>
<ul>
<li>
<p><a href="#simple-assignments">简单分配</a></p>
</li>
<li>
<p><a href="#pattern-matching-assignments">模式匹配分配</a></p>
</li>
<li>
<p><a href="#print-statements">打印报表</a></p>
</li>
<li>
<p><a href="#if-statements">If 语句</a></p>
</li>
<li>
<p><a href="#while-loops">While 循环</a></p>
</li>
<li>
<p><a href="#for-loops-with-range">适用于范围为</a>的循环</p>
</li>
<li>
<p><a href="#for-loops-over-tuples">用于遍历元组的循环</a></p>
</li>
<li>
<p><a href="#for-loops-over-constant-nn-modulelist">用于在常量 nn.ModuleList</a> 上循环</p>
</li>
<li>
<p><a href="#break-and-continue">中断并继续</a></p>
</li>
<li>
<p><a href="#return">返回</a></p>
</li>
</ul>
</li>
<li>
<p><a href="#variable-resolution">可变分辨率</a></p>
</li>
<li>
<p><a href="#use-of-python-values">使用 Python 值</a></p>
<ul>
<li>
<p><a href="#id6">功能</a></p>
</li>
<li>
<p><a href="#attribute-lookup-on-python-modules">Python 模块上的属性查找</a></p>
</li>
<li>
<p><a href="#python-defined-constants">Python 定义的常量</a></p>
</li>
<li>
<p><a href="#module-attributes">模块属性</a></p>
</li>
</ul>
</li>
<li>
<p><a href="#debugging">调试</a></p>
<ul>
<li>
<p><a href="#disable-jit-for-debugging">禁用用于调试的 JIT</a></p>
</li>
<li>
<p><a href="#inspecting-code">检查码</a></p>
</li>
<li>
<p><a href="#interpreting-graphs">解释图</a></p>
</li>
<li>
<p><a href="#tracing-edge-cases">追踪案例</a></p>
</li>
<li>
<p><a href="#automatic-trace-checking">自动跟踪检查</a></p>
</li>
<li>
<p><a href="#tracer-warnings">跟踪器警告</a></p>
</li>
</ul>
</li>
<li>
<p><a href="#builtin-functions">内置函数</a></p>
</li>
</ul>
</li>
<li>
<p><a href="#frequently-asked-questions">常见问题解答</a></p>
</li>
</ul>
<p>TorchScript 是一种从 PyTorch 代码创建可序列化和可优化模型的方法。 任何 TorchScript 程序都可以从 Python 进程中保存并加载到没有 Python 依赖项的进程中。</p>
<p>我们提供了将模型从纯 Python 程序逐步过渡到可以独立于 Python 运行的 TorchScript 程序的工具，例如在独立的 C ++程序中。 这样就可以使用 Python 中熟悉的工具在 PyTorch 中训练模型，然后通过 TorchScript 将模型导出到生产环境中，在该生产环境中 Python 程序可能由于性能和多线程原因而处于不利地位。</p>
<p>有关 TorchScript 的简要介绍，请参见 <a href="https://pytorch.org/tutorials/beginner/Intro_to_TorchScript_tutorial.html">TorchScript 简介</a>教程。</p>
<p>有关将 PyTorch 模型转换为 TorchScript 并在 C ++中运行的端到端示例，请参见<a href="https://pytorch.org/tutorials/advanced/cpp_export.html">在 C ++中加载 PyTorch 模型</a>教程。</p>
<h2 id="torchscript"><a href="#id10">创建 TorchScript 代码</a></h2>
<hr />
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>class torch.jit.ScriptModule¶
</code></pre></div>
<hr />
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>property code¶
</code></pre></div>
<p>返回<code>forward</code>方法的内部图的漂亮打印表示形式(作为有效的 Python 语法）。 有关详细信息，请参见<a href="#inspecting-code">检查代码</a>。</p>
<hr />
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>property graph¶
</code></pre></div>
<p>返回<code>forward</code>方法的内部图形的字符串表示形式。 有关详细信息，请参见<a href="#interpreting-graphs">解释图</a>。</p>
<hr />
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>save(f, _extra_files=ExtraFilesMap{})¶
</code></pre></div>
<p>有关详细信息，请参见 <a href="#torch.jit.save" title="torch.jit.save"><code>torch.jit.save</code></a> 。</p>
<hr />
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>class torch.jit.ScriptFunction¶
</code></pre></div>
<p>功能上与 <a href="#torch.jit.ScriptModule" title="torch.jit.ScriptModule"><code>ScriptModule</code></a> 等效，但是代表单个功能，没有任何属性或参数。</p>
<hr />
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>torch.jit.script(obj)¶
</code></pre></div>
<p>为函数或<code>nn.Module</code>编写脚本将检查源代码，使用 TorchScript 编译器将其编译为 TorchScript 代码，然后返回 <a href="#torch.jit.ScriptModule" title="torch.jit.ScriptModule"><code>ScriptModule</code></a> 或 <a href="#torch.jit.ScriptFunction" title="torch.jit.ScriptFunction"><code>ScriptFunction</code></a> 。 TorchScript 本身是 Python 语言的子集，因此 Python 并非所有功能都可以使用，但是我们提供了足够的功能来在张量上进行计算并执行与控制有关的操作。 有关完整指南，请参见 <a href="#torchscript-language-reference">TorchScript 语言参考</a>。</p>
<p><code>torch.jit.script</code>可用作模块和功能的函数，以及 <a href="#torchscript-class">TorchScript 类</a>和功能的修饰器<code>@torch.jit.script</code>。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>Scripting a function
</code></pre></div>
<p><code>@torch.jit.script</code>装饰器将通过编译函数的主体来构造 <a href="#torch.jit.ScriptFunction" title="torch.jit.ScriptFunction"><code>ScriptFunction</code></a> 。</p>
<p>示例(编写函数）：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>import torch
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>@torch.jit.script
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>def foo(x, y):
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>    if x.max() &gt; y.max():
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>        r = x
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>    else:
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>        r = y
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>    return r
<a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>
<a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>print(type(foo))  # torch.jit.ScriptFuncion
<a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a>
<a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a># See the compiled graph as Python code
<a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a>print(foo.code)
<a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a>
<a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a># Call the function using the TorchScript interpreter
<a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a>foo(torch.ones(2, 2), torch.ones(2, 2))
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>Scripting an nn.Module
</code></pre></div>
<p>默认情况下，为<code>nn.Module</code>编写脚本将编译<code>forward</code>方法，并递归编译<code>forward</code>调用的任何方法，子模块和函数。 如果<code>nn.Module</code>仅使用 TorchScript 支持的功能，则无需更改原始模块代码。 <code>script</code>将构建 <a href="#torch.jit.ScriptModule" title="torch.jit.ScriptModule"><code>ScriptModule</code></a> ，该副本具有原始模块的属性，参数和方法的副本。</p>
<p>示例(使用参数编写简单模块的脚本）：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>import torch
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>class MyModule(torch.nn.Module):
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>    def __init__(self, N, M):
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>        super(MyModule, self).__init__()
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>        # This parameter will be copied to the new ScriptModule
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a>        self.weight = torch.nn.Parameter(torch.rand(N, M))
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a>
<a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a>        # When this submodule is used, it will be compiled
<a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a>        self.linear = torch.nn.Linear(N, M)
<a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a>
<a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a>    def forward(self, input):
<a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a>        output = self.weight.mv(input)
<a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a>
<a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a>        # This calls the `forward` method of the `nn.Linear` module, which will
<a id="__codelineno-9-16" name="__codelineno-9-16" href="#__codelineno-9-16"></a>        # cause the `self.linear` submodule to be compiled to a `ScriptModule` here
<a id="__codelineno-9-17" name="__codelineno-9-17" href="#__codelineno-9-17"></a>        output = self.linear(output)
<a id="__codelineno-9-18" name="__codelineno-9-18" href="#__codelineno-9-18"></a>        return output
<a id="__codelineno-9-19" name="__codelineno-9-19" href="#__codelineno-9-19"></a>
<a id="__codelineno-9-20" name="__codelineno-9-20" href="#__codelineno-9-20"></a>scripted_module = torch.jit.script(MyModule(2, 3))
</code></pre></div>
<p>示例(使用跟踪的子模块编写模块脚本）：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>import torch
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>import torch.nn as nn
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>import torch.nn.functional as F
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>class MyModule(nn.Module):
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>    def __init__(self):
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>        super(MyModule, self).__init__()
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>        # torch.jit.trace produces a ScriptModule&#39;s conv1 and conv2
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a>        self.conv1 = torch.jit.trace(nn.Conv2d(1, 20, 5), torch.rand(1, 1, 16, 16))
<a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a>        self.conv2 = torch.jit.trace(nn.Conv2d(20, 20, 5), torch.rand(1, 20, 16, 16))
<a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a>
<a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a>    def forward(self, input):
<a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a>      input = F.relu(self.conv1(input))
<a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a>      input = F.relu(self.conv2(input))
<a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a>      return input
<a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a>
<a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a>scripted_module = torch.jit.script(MyModule())
</code></pre></div>
<p>要编译除<code>forward</code>以外的方法(并递归编译其调用的任何内容），请将 <a href="#torch.jit.export" title="torch.jit.export"><code>@torch.jit.export</code></a> 装饰器添加到该方法。 要选择退出编译，请使用 <a href="#torch.jit.ignore" title="torch.jit.ignore"><code>@torch.jit.ignore</code></a> 。</p>
<p>示例(模块中的导出方法和忽略方法）：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>import torch
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>import torch.nn as nn
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>class MyModule(nn.Module):
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>    def __init__(self):
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>        super(MyModule, self).__init__()
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>    @torch.jit.export
<a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a>    def some_entry_point(self, input):
<a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a>        return input + 10
<a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a>
<a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a>    @torch.jit.ignore
<a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a>    def python_only_fn(self, input):
<a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a>        # This function won&#39;t be compiled, so any
<a id="__codelineno-11-15" name="__codelineno-11-15" href="#__codelineno-11-15"></a>        # Python APIs can be used
<a id="__codelineno-11-16" name="__codelineno-11-16" href="#__codelineno-11-16"></a>        import pdb
<a id="__codelineno-11-17" name="__codelineno-11-17" href="#__codelineno-11-17"></a>        pdb.set_trace()
<a id="__codelineno-11-18" name="__codelineno-11-18" href="#__codelineno-11-18"></a>
<a id="__codelineno-11-19" name="__codelineno-11-19" href="#__codelineno-11-19"></a>    def forward(self, input):
<a id="__codelineno-11-20" name="__codelineno-11-20" href="#__codelineno-11-20"></a>        if self.training:
<a id="__codelineno-11-21" name="__codelineno-11-21" href="#__codelineno-11-21"></a>            self.python_only_fn(input)
<a id="__codelineno-11-22" name="__codelineno-11-22" href="#__codelineno-11-22"></a>        return input * 99
<a id="__codelineno-11-23" name="__codelineno-11-23" href="#__codelineno-11-23"></a>
<a id="__codelineno-11-24" name="__codelineno-11-24" href="#__codelineno-11-24"></a>scripted_module = torch.jit.script(MyModule())
<a id="__codelineno-11-25" name="__codelineno-11-25" href="#__codelineno-11-25"></a>print(scripted_module.some_entry_point(torch.randn(2, 2)))
<a id="__codelineno-11-26" name="__codelineno-11-26" href="#__codelineno-11-26"></a>print(scripted_module(torch.randn(2, 2)))
</code></pre></div>
<hr />
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>torch.jit.trace(func, example_inputs, optimize=None, check_trace=True, check_inputs=None, check_tolerance=1e-5)¶
</code></pre></div>
<p>跟踪一个函数并返回将使用即时编译进行优化的可执行文件或 <a href="#torch.jit.ScriptFunction" title="torch.jit.ScriptFunction"><code>ScriptFunction</code></a> 。 对于仅在<code>Tensor</code>和<code>Tensor</code>的列表，字典和元组上运行的代码，跟踪是理想的选择。</p>
<p>使用<code>torch.jit.trace</code>和 <a href="#torch.jit.trace_module" title="torch.jit.trace_module"><code>torch.jit.trace_module</code></a> ，您可以将现有模块或 Python 函数转换为 TorchScript <a href="#torch.jit.ScriptFunction" title="torch.jit.ScriptFunction"><code>ScriptFunction</code></a> 或 <a href="#torch.jit.ScriptModule" title="torch.jit.ScriptModule"><code>ScriptModule</code></a> 。 您必须提供示例输入，然后我们运行该函数，记录在所有张量上执行的操作。</p>
<ul>
<li>
<p>独立功能的最终记录将产生 <a href="#torch.jit.ScriptFunction" title="torch.jit.ScriptFunction"><code>ScriptFunction</code></a> 。</p>
</li>
<li>
<p><code>nn.Module</code>或<code>nn.Module</code>的<code>forward</code>功能的所得记录产生 <a href="#torch.jit.ScriptModule" title="torch.jit.ScriptModule"><code>ScriptModule</code></a> 。</p>
</li>
</ul>
<p>该模块还包含原始模块也具有的任何参数。</p>
<p>警告</p>
<p>跟踪仅正确记录不依赖数据的功能和模块(例如，对张量中的数据没有条件）并且不包含任何未跟踪的外部依赖项(例如，执行输入/输出或访问全局变量）。 跟踪仅记录在给定张量上运行给定函数时执行的操作。 因此，返回的 <a href="#torch.jit.ScriptModule" title="torch.jit.ScriptModule"><code>ScriptModule</code></a> 将始终在任何输入上运行相同的跟踪图。 当期望模块根据输入和/或模块状态运行不同的操作集时，这具有重要意义。 例如，</p>
<ul>
<li>
<p>跟踪将不会记录任何控制流，例如 if 语句或循环。 当整个模块的控制流恒定时，这很好，并且通常内联控制流决策。 但是有时控制流实际上是模型本身的一部分。 例如，循环网络是输入序列(可能是动态）长度上的循环。</p>
</li>
<li>
<p>在返回的 <a href="#torch.jit.ScriptModule" title="torch.jit.ScriptModule"><code>ScriptModule</code></a> 中，在<code>training</code>和<code>eval</code>模式下具有不同行为的操作将始终像在跟踪过程中一样处于运行状态，无论[是哪种模式 ] <code>ScriptModule</code>](#torch.jit.ScriptModule "torch.jit.ScriptModule") 已插入。</p>
</li>
</ul>
<p>在这种情况下，跟踪是不合适的， <a href="#torch.jit.script" title="torch.jit.script"><code>scripting</code></a> 是更好的选择。 如果跟踪此类模型，则可能在随后的模型调用中静默地得到不正确的结果。 在执行可能会导致产生不正确跟踪的操作时，跟踪器将尝试发出警告。</p>
<p>参数</p>
<ul>
<li>
<p><strong>函数</strong>(可调用的_或_ <a href="nn.html#torch.nn.Module" title="torch.nn.Module"><em>torch.nn.Module</em></a>)– Python 函数或<code>torch.nn.Module</code> 与<code>example_inputs</code>一起运行。 <code>func</code>的参数和返回值必须是张量或包含张量的(可能是嵌套的）元组。 将模块传递到 <a href="#torch.jit.trace" title="torch.jit.trace"><code>torch.jit.trace</code></a> 时，仅运行并跟踪<code>forward</code>方法(有关详细信息，请参见 <a href="#torch.jit.trace_module" title="torch.jit.trace_module"><code>torch.jit.trace</code></a>)。</p>
</li>
<li>
<p><strong>example_inputs</strong>  (<em>tuple</em> )–示例输入的元组，将在跟踪时传递给函数。 假设跟踪的操作支持这些类型和形状，则可以使用不同类型和形状的输入来运行结果跟踪。 <code>example_inputs</code>也可以是单个张量，在这种情况下，它会自动包装在元组中。</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>Keyword Arguments
</code></pre></div>
<ul>
<li>
<p><strong>check_trace</strong> (<code>bool</code>，可选）–检查通过跟踪代码运行的相同输入是否产生相同的输出。 默认值：<code>True</code>。 例如，如果您的网络包含不确定性操作，或者即使检查程序失败，但您确定网络正确，则可能要禁用此功能。</p>
</li>
<li>
<p><strong>check_inputs</strong> (<em>元组列表</em> <em>，</em> <em>可选</em>）–输入参数的元组列表，应使用这些元组来检查跟踪内容 是期待。 每个元组等效于<code>example_inputs</code>中指定的一组输入参数。 为了获得最佳结果，请传递一组检查输入，这些输入代表您希望网络看到的形状和输入类型的空间。 如果未指定，则使用原始的<code>example_inputs</code>进行检查</p>
</li>
<li>
<p><strong>check_tolerance</strong>  (<em>python：float</em> <em>，</em> <em>可选</em>）–在检查程序中使用的浮点比较公差。 如果结果由于已知原因(例如操作员融合）而在数值上出现差异，则可以使用此方法来放松检查器的严格性。</p>
</li>
</ul>
<p>退货</p>
<p>如果<code>callable</code>是<code>nn.Module</code>的<code>nn.Module</code>或<code>forward</code>，则<code>trace</code>将使用包含跟踪代码的单个<code>forward</code>方法返回 <a href="#torch.jit.ScriptModule" title="torch.jit.ScriptModule"><code>ScriptModule</code></a> 对象。 返回的 <a href="#torch.jit.ScriptModule" title="torch.jit.ScriptModule"><code>ScriptModule</code></a> 将具有与原始<code>nn.Module</code>相同的子模块和参数集。 如果<code>callable</code>是独立功能，则<code>trace</code>返回 <a href="#torch.jit.ScriptFunction" title="torch.jit.ScriptFunction"><code>ScriptFunction</code></a></p>
<p>示例(跟踪函数）：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>import torch
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>def foo(x, y):
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>    return 2 * x + y
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a># Run `foo` with the provided inputs and record the tensor operations
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a>traced_foo = torch.jit.trace(foo, (torch.rand(3), torch.rand(3)))
<a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a>
<a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a># `traced_foo` can now be run with the TorchScript interpreter or saved
<a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a># and loaded in a Python-free environment
</code></pre></div>
<p>示例(跟踪现有模块）：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>import torch
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>import torch.nn as nn
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>class Net(nn.Module):
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>    def __init__(self):
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>        super(Net, self).__init__()
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a>        self.conv = nn.Conv2d(1, 1, 3)
<a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a>
<a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a>    def forward(self, x):
<a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a>        return self.conv(x)
<a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a>
<a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a>n = Net()
<a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a>example_weight = torch.rand(1, 1, 3, 3)
<a id="__codelineno-15-14" name="__codelineno-15-14" href="#__codelineno-15-14"></a>example_forward_input = torch.rand(1, 1, 3, 3)
<a id="__codelineno-15-15" name="__codelineno-15-15" href="#__codelineno-15-15"></a>
<a id="__codelineno-15-16" name="__codelineno-15-16" href="#__codelineno-15-16"></a># Trace a specific method and construct `ScriptModule` with
<a id="__codelineno-15-17" name="__codelineno-15-17" href="#__codelineno-15-17"></a># a single `forward` method
<a id="__codelineno-15-18" name="__codelineno-15-18" href="#__codelineno-15-18"></a>module = torch.jit.trace(n.forward, example_forward_input)
<a id="__codelineno-15-19" name="__codelineno-15-19" href="#__codelineno-15-19"></a>
<a id="__codelineno-15-20" name="__codelineno-15-20" href="#__codelineno-15-20"></a># Trace a module (implicitly traces `forward`) and construct a
<a id="__codelineno-15-21" name="__codelineno-15-21" href="#__codelineno-15-21"></a># `ScriptModule` with a single `forward` method
<a id="__codelineno-15-22" name="__codelineno-15-22" href="#__codelineno-15-22"></a>module = torch.jit.trace(n, example_forward_input)
</code></pre></div>
<hr />
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>torch.jit.trace_module(mod, inputs, optimize=None, check_trace=True, check_inputs=None, check_tolerance=1e-5)¶
</code></pre></div>
<p>跟踪模块并返回可执行文件 <a href="#torch.jit.ScriptModule" title="torch.jit.ScriptModule"><code>ScriptModule</code></a> ，该文件将使用即时编译进行优化。 将模块传递到 <a href="#torch.jit.trace" title="torch.jit.trace"><code>torch.jit.trace</code></a> 时，仅运行并跟踪<code>forward</code>方法。 使用<code>trace_module</code>，您可以指定方法名称的字典作为示例输入，以跟踪下面的参数(请参见<code>example_inputs</code>）。</p>
<p>有关跟踪的更多信息，请参见 <a href="#torch.jit.trace" title="torch.jit.trace"><code>torch.jit.trace</code></a> 。</p>
<p>Parameters</p>
<ul>
<li>
<p><strong>mod</strong>  (<a href="nn.html#torch.nn.Module" title="torch.nn.Module"><em>Torch.nn.Module</em></a>)–一种<code>torch.nn.Module</code>，其中包含名称在<code>example_inputs</code>中指定的方法。 给定的方法将被编译为单个 &lt;cite&gt;ScriptModule&lt;/cite&gt; 的一部分。</p>
</li>
<li>
<p><strong>example_inputs</strong>  (<em>dict</em> )–包含样本输入的字典，该样本输入由<code>mod</code>中的方法名称索引。 输入将在跟踪时传递给名称与输入键对应的方法。 <code>{ 'forward' : example_forward_input, 'method2': example_method2_input}</code></p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>Keyword Arguments
</code></pre></div>
<ul>
<li>
<p><strong>check_trace</strong> (<code>bool</code>, optional) – Check if the same inputs run through traced code produce the same outputs. Default: <code>True</code>. You might want to disable this if, for example, your network contains non- deterministic ops or if you are sure that the network is correct despite a checker failure.</p>
</li>
<li>
<p><strong>check_inputs</strong> (<em>字典列表</em> <em>，</em> <em>可选</em>）–输入参数的字典列表，用于检查跟踪内容 是期待。 每个元组等效于<code>example_inputs</code>中指定的一组输入参数。 为了获得最佳结果，请传递一组检查输入，这些输入代表您希望网络看到的形状和输入类型的空间。 如果未指定，则使用原始的<code>example_inputs</code>进行检查</p>
</li>
<li>
<p><strong>check_tolerance</strong> (<em>python:float__,</em> <em>optional</em>) – Floating-point comparison tolerance to use in the checker procedure. This can be used to relax the checker strictness in the event that results diverge numerically for a known reason, such as operator fusion.</p>
</li>
</ul>
<p>Returns</p>
<p>具有单个<code>forward</code>方法的 <a href="#torch.jit.ScriptModule" title="torch.jit.ScriptModule"><code>ScriptModule</code></a> 对象，其中包含跟踪的代码。 当<code>func</code>是<code>torch.nn.Module</code>时，返回的 <a href="#torch.jit.ScriptModule" title="torch.jit.ScriptModule"><code>ScriptModule</code></a> 将具有与<code>func</code>相同的子模块和参数集。</p>
<p>示例(使用多种方法跟踪模块）：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>import torch
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>import torch.nn as nn
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>class Net(nn.Module):
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>    def __init__(self):
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a>        super(Net, self).__init__()
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a>        self.conv = nn.Conv2d(1, 1, 3)
<a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a>
<a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a>    def forward(self, x):
<a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a>        return self.conv(x)
<a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a>
<a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a>    def weighted_kernel_sum(self, weight):
<a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a>        return weight * self.conv.weight
<a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a>
<a id="__codelineno-18-15" name="__codelineno-18-15" href="#__codelineno-18-15"></a>n = Net()
<a id="__codelineno-18-16" name="__codelineno-18-16" href="#__codelineno-18-16"></a>example_weight = torch.rand(1, 1, 3, 3)
<a id="__codelineno-18-17" name="__codelineno-18-17" href="#__codelineno-18-17"></a>example_forward_input = torch.rand(1, 1, 3, 3)
<a id="__codelineno-18-18" name="__codelineno-18-18" href="#__codelineno-18-18"></a>
<a id="__codelineno-18-19" name="__codelineno-18-19" href="#__codelineno-18-19"></a># Trace a specific method and construct `ScriptModule` with
<a id="__codelineno-18-20" name="__codelineno-18-20" href="#__codelineno-18-20"></a># a single `forward` method
<a id="__codelineno-18-21" name="__codelineno-18-21" href="#__codelineno-18-21"></a>module = torch.jit.trace(n.forward, example_forward_input)
<a id="__codelineno-18-22" name="__codelineno-18-22" href="#__codelineno-18-22"></a>
<a id="__codelineno-18-23" name="__codelineno-18-23" href="#__codelineno-18-23"></a># Trace a module (implicitly traces `forward`) and construct a
<a id="__codelineno-18-24" name="__codelineno-18-24" href="#__codelineno-18-24"></a># `ScriptModule` with a single `forward` method
<a id="__codelineno-18-25" name="__codelineno-18-25" href="#__codelineno-18-25"></a>module = torch.jit.trace(n, example_forward_input)
<a id="__codelineno-18-26" name="__codelineno-18-26" href="#__codelineno-18-26"></a>
<a id="__codelineno-18-27" name="__codelineno-18-27" href="#__codelineno-18-27"></a># Trace specific methods on a module (specified in `inputs`), constructs
<a id="__codelineno-18-28" name="__codelineno-18-28" href="#__codelineno-18-28"></a># a `ScriptModule` with `forward` and `weighted_kernel_sum` methods
<a id="__codelineno-18-29" name="__codelineno-18-29" href="#__codelineno-18-29"></a>inputs = {&#39;forward&#39; : example_forward_input, &#39;weighted_kernel_sum&#39; : example_weight}
<a id="__codelineno-18-30" name="__codelineno-18-30" href="#__codelineno-18-30"></a>module = torch.jit.trace_module(n, inputs)
</code></pre></div>
<hr />
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>torch.jit.save(m, f, _extra_files=ExtraFilesMap{})¶
</code></pre></div>
<p>保存此模块的脱机版本以在单独的过程中使用。 保存的模块将序列化此模块的所有方法，子模块，参数和属性。 可以使用<code>torch::jit::load(filename)</code>将其加载到 C ++ API 中，或者使用 <a href="#torch.jit.load" title="torch.jit.load"><code>torch.jit.load</code></a> 加载到 Python API 中。</p>
<p>为了能够保存模块，它不得对本地 Python 函数进行任何调用。 这意味着所有子模块也必须是<code>torch.jit.ScriptModule</code>的子类。</p>
<p>危险</p>
<p>所有模块，无论使用哪种设备，都始终在加载期间加载到 CPU 中。 这与 <a href="#torch.jit.load" title="torch.jit.load"><code>load</code></a> 的语义不同，并且将来可能会发生变化。</p>
<p>Parameters</p>
<ul>
<li>
<p><strong>m</strong> –要保存的 ScriptModule。</p>
</li>
<li>
<p><strong>f</strong> –类似于文件的对象(必须实现写入和刷新）或包含文件名的字符串。</p>
</li>
<li>
<p><strong>_extra_files</strong> -从文件名映射到将作为“ f”的一部分存储的内容。</p>
</li>
</ul>
<p>Warning</p>
<p>如果您使用的是 Python 2，<code>torch.jit.save</code>不支持<code>StringIO.StringIO</code>作为有效的类似文件的对象。 这是因为 write 方法应返回写入的字节数； <code>StringIO.write()</code>不这样做。</p>
<p>请改用<code>io.BytesIO</code>之类的东西。</p>
<p>例：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>import torch
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>import io
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>class MyModule(torch.nn.Module):
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a>    def forward(self, x):
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a>        return x + 10
<a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a>
<a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a>m = torch.jit.script(MyModule())
<a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a>
<a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a># Save to file
<a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a>torch.jit.save(m, &#39;scriptmodule.pt&#39;)
<a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a># This line is equivalent to the previous
<a id="__codelineno-20-13" name="__codelineno-20-13" href="#__codelineno-20-13"></a>m.save(&quot;scriptmodule.pt&quot;)
<a id="__codelineno-20-14" name="__codelineno-20-14" href="#__codelineno-20-14"></a>
<a id="__codelineno-20-15" name="__codelineno-20-15" href="#__codelineno-20-15"></a># Save to io.BytesIO buffer
<a id="__codelineno-20-16" name="__codelineno-20-16" href="#__codelineno-20-16"></a>buffer = io.BytesIO()
<a id="__codelineno-20-17" name="__codelineno-20-17" href="#__codelineno-20-17"></a>torch.jit.save(m, buffer)
<a id="__codelineno-20-18" name="__codelineno-20-18" href="#__codelineno-20-18"></a>
<a id="__codelineno-20-19" name="__codelineno-20-19" href="#__codelineno-20-19"></a># Save with extra files
<a id="__codelineno-20-20" name="__codelineno-20-20" href="#__codelineno-20-20"></a>extra_files = torch._C.ExtraFilesMap()
<a id="__codelineno-20-21" name="__codelineno-20-21" href="#__codelineno-20-21"></a>extra_files[&#39;foo.txt&#39;] = &#39;bar&#39;
<a id="__codelineno-20-22" name="__codelineno-20-22" href="#__codelineno-20-22"></a>torch.jit.save(m, &#39;scriptmodule.pt&#39;, _extra_files=extra_files)
</code></pre></div>
<hr />
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>torch.jit.load(f, map_location=None, _extra_files=ExtraFilesMap{})¶
</code></pre></div>
<p>加载先前用 <a href="#torch.jit.save" title="torch.jit.save"><code>torch.jit.save</code></a> 保存的 <a href="#torch.jit.ScriptModule" title="torch.jit.ScriptModule"><code>ScriptModule</code></a> 或 <a href="#torch.jit.ScriptFunction" title="torch.jit.ScriptFunction"><code>ScriptFunction</code></a></p>
<p>之前保存的所有模块，无论使用何种设备，都首先加载到 CPU 中，然后再移动到保存它们的设备上。 如果失败(例如，因为运行时系统没有某些设备），则会引发异常。</p>
<p>Parameters</p>
<ul>
<li>
<p><strong>f</strong> –类似于文件的对象(必须实现读取，读取行，告诉和查找），或包含文件名的字符串</p>
</li>
<li>
<p><strong>map_location</strong> (<em>字符串</em> <em>或</em> <a href="tensor_attributes.html#torch.torch.device" title="torch.torch.device"><em>torch设备</em></a>)– <code>torch.save</code>中<code>map_location</code>的简化版本 用于动态地将存储重新映射到另一组设备。</p>
</li>
<li>
<p><strong>_extra_files</strong> (<em>文件名到内容的字典</em>）–映射中给定的多余文件名将被加载，其内容将存储在提供的映射中。</p>
</li>
</ul>
<p>Returns</p>
<p><a href="#torch.jit.ScriptModule" title="torch.jit.ScriptModule"><code>ScriptModule</code></a> 对象。</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>import torch
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>import io
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a>
<a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a>torch.jit.load(&#39;scriptmodule.pt&#39;)
<a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a>
<a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a># Load ScriptModule from io.BytesIO object
<a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a>with open(&#39;scriptmodule.pt&#39;, &#39;rb&#39;) as f:
<a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a>    buffer = io.BytesIO(f.read())
<a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a>
<a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a># Load all tensors to the original device
<a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a>torch.jit.load(buffer)
<a id="__codelineno-22-12" name="__codelineno-22-12" href="#__codelineno-22-12"></a>
<a id="__codelineno-22-13" name="__codelineno-22-13" href="#__codelineno-22-13"></a># Load all tensors onto CPU, using a device
<a id="__codelineno-22-14" name="__codelineno-22-14" href="#__codelineno-22-14"></a>buffer.seek(0)
<a id="__codelineno-22-15" name="__codelineno-22-15" href="#__codelineno-22-15"></a>torch.jit.load(buffer, map_location=torch.device(&#39;cpu&#39;))
<a id="__codelineno-22-16" name="__codelineno-22-16" href="#__codelineno-22-16"></a>
<a id="__codelineno-22-17" name="__codelineno-22-17" href="#__codelineno-22-17"></a># Load all tensors onto CPU, using a string
<a id="__codelineno-22-18" name="__codelineno-22-18" href="#__codelineno-22-18"></a>buffer.seek(0)
<a id="__codelineno-22-19" name="__codelineno-22-19" href="#__codelineno-22-19"></a>torch.jit.load(buffer, map_location=&#39;cpu&#39;)
<a id="__codelineno-22-20" name="__codelineno-22-20" href="#__codelineno-22-20"></a>
<a id="__codelineno-22-21" name="__codelineno-22-21" href="#__codelineno-22-21"></a># Load with extra files.
<a id="__codelineno-22-22" name="__codelineno-22-22" href="#__codelineno-22-22"></a>extra_files = torch._C.ExtraFilesMap()
<a id="__codelineno-22-23" name="__codelineno-22-23" href="#__codelineno-22-23"></a>extra_files[&#39;foo.txt&#39;] = &#39;bar&#39;
<a id="__codelineno-22-24" name="__codelineno-22-24" href="#__codelineno-22-24"></a>torch.jit.load(&#39;scriptmodule.pt&#39;, _extra_files=extra_files)
<a id="__codelineno-22-25" name="__codelineno-22-25" href="#__codelineno-22-25"></a>print(extra_files[&#39;foo.txt&#39;])
</code></pre></div>
<h2 id="_1"><a href="#id11">混合跟踪和脚本编写</a></h2>
<p>在许多情况下，将模型转换为 TorchScript 都可以使用跟踪或脚本编写。 可以组成跟踪和脚本以适合模型一部分的特定要求。</p>
<p>脚本函数可以调用跟踪函数。 当您需要在简单的前馈模型周围使用控制流时，这特别有用。 例如，序列到序列模型的波束搜索通常将用脚本编写，但是可以调用使用跟踪生成的编码器模块。</p>
<p>示例(在脚本中调用跟踪的函数）：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>import torch
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a>def foo(x, y):
<a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a>    return 2 * x + y
<a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a>
<a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a>traced_foo = torch.jit.trace(foo, (torch.rand(3), torch.rand(3)))
<a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a>
<a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a>@torch.jit.script
<a id="__codelineno-23-9" name="__codelineno-23-9" href="#__codelineno-23-9"></a>def bar(x):
<a id="__codelineno-23-10" name="__codelineno-23-10" href="#__codelineno-23-10"></a>    return traced_foo(x, x)
</code></pre></div>
<p>跟踪的函数可以调用脚本函数。 即使大部分模型只是前馈网络，当模型的一小部分需要一些控制流时，这也很有用。 跟踪函数调用的脚本函数内部的控制流已正确保留。</p>
<p>示例(在跟踪函数中调用脚本函数）：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>import torch
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>@torch.jit.script
<a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a>def foo(x, y):
<a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a>    if x.max() &gt; y.max():
<a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a>        r = x
<a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a>    else:
<a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a>        r = y
<a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a>    return r
<a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a>
<a id="__codelineno-24-11" name="__codelineno-24-11" href="#__codelineno-24-11"></a>def bar(x, y, z):
<a id="__codelineno-24-12" name="__codelineno-24-12" href="#__codelineno-24-12"></a>    return foo(x, y) + z
<a id="__codelineno-24-13" name="__codelineno-24-13" href="#__codelineno-24-13"></a>
<a id="__codelineno-24-14" name="__codelineno-24-14" href="#__codelineno-24-14"></a>traced_bar = torch.jit.trace(bar, (torch.rand(3), torch.rand(3), torch.rand(3)))
</code></pre></div>
<p>此组合也适用于<code>nn.Module</code>，在这里它可用于通过跟踪来生成子模块，该跟踪可以从脚本模块的方法中调用。</p>
<p>示例(使用跟踪模块）：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>import torch
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>import torchvision
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>
<a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a>class MyScriptModule(torch.nn.Module):
<a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a>    def __init__(self):
<a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a>        super(MyScriptModule, self).__init__()
<a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a>        self.means = torch.nn.Parameter(torch.tensor([103.939, 116.779, 123.68])
<a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a>                                        .resize_(1, 3, 1, 1))
<a id="__codelineno-25-9" name="__codelineno-25-9" href="#__codelineno-25-9"></a>        self.resnet = torch.jit.trace(torchvision.models.resnet18(),
<a id="__codelineno-25-10" name="__codelineno-25-10" href="#__codelineno-25-10"></a>                                      torch.rand(1, 3, 224, 224))
<a id="__codelineno-25-11" name="__codelineno-25-11" href="#__codelineno-25-11"></a>
<a id="__codelineno-25-12" name="__codelineno-25-12" href="#__codelineno-25-12"></a>    def forward(self, input):
<a id="__codelineno-25-13" name="__codelineno-25-13" href="#__codelineno-25-13"></a>        return self.resnet(input - self.means)
<a id="__codelineno-25-14" name="__codelineno-25-14" href="#__codelineno-25-14"></a>
<a id="__codelineno-25-15" name="__codelineno-25-15" href="#__codelineno-25-15"></a>my_script_module = torch.jit.script(MyScriptModule())
</code></pre></div>
<h2 id="pytorch-12-api"><a href="#id12">迁移到 PyTorch 1.2 递归脚本 API</a></h2>
<p>本节详细介绍了 PyTorch 1.2 中对 TorchScript 的更改。 如果您不熟悉 TorchScript，则可以跳过本节。 PyTorch 1.2 对 TorchScript API 进行了两个主要更改。</p>
<p>1. <a href="#torch.jit.script" title="torch.jit.script"><code>torch.jit.script</code></a> 现在将尝试递归编译遇到的函数，方法和类。 调用<code>torch.jit.script</code>后，编译将是“选择退出”，而不是“选择加入”。</p>
<p>2.现在<code>torch.jit.script(nn_module_instance)</code>是创建 <a href="#torch.jit.ScriptModule" title="torch.jit.ScriptModule"><code>ScriptModule</code></a> 的首选方法，而不是从<code>torch.jit.ScriptModule</code>继承。 这些更改组合在一起，提供了一个更简单易用的 API，可将您的<code>nn.Module</code>转换为 <a href="#torch.jit.ScriptModule" title="torch.jit.ScriptModule"><code>ScriptModule</code></a> ，可以在非 Python 环境中进行优化和执行。</p>
<p>新用法如下所示：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>import torch
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>import torch.nn as nn
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a>import torch.nn.functional as F
<a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a>
<a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a>class Model(nn.Module):
<a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a>    def __init__(self):
<a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a>        super(Model, self).__init__()
<a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a>        self.conv1 = nn.Conv2d(1, 20, 5)
<a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a>        self.conv2 = nn.Conv2d(20, 20, 5)
<a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a>
<a id="__codelineno-26-11" name="__codelineno-26-11" href="#__codelineno-26-11"></a>    def forward(self, x):
<a id="__codelineno-26-12" name="__codelineno-26-12" href="#__codelineno-26-12"></a>        x = F.relu(self.conv1(x))
<a id="__codelineno-26-13" name="__codelineno-26-13" href="#__codelineno-26-13"></a>        return F.relu(self.conv2(x))
<a id="__codelineno-26-14" name="__codelineno-26-14" href="#__codelineno-26-14"></a>
<a id="__codelineno-26-15" name="__codelineno-26-15" href="#__codelineno-26-15"></a>my_model = Model()
<a id="__codelineno-26-16" name="__codelineno-26-16" href="#__codelineno-26-16"></a>my_scripted_model = torch.jit.script(my_model)
</code></pre></div>
<ul>
<li>
<p>该模块的<code>forward</code>是默认编译的。 从<code>forward</code>调用的方法将按照在<code>forward</code>中使用的顺序进行延迟编译。</p>
</li>
<li>
<p>要编译未从<code>forward</code>调用的<code>forward</code>以外的方法，请添加<code>@torch.jit.export</code>。</p>
</li>
<li>
<p>要停止编译器编译方法，请添加 <a href="#torch.jit.ignore" title="torch.jit.ignore"><code>@torch.jit.ignore</code></a> 或 <a href="#torch.jit.unused" title="torch.jit.unused"><code>@torch.jit.unused</code></a> 。 <code>@ignore</code>离开</p>
</li>
<li>
<p>方法作为对 python 的调用，并且<code>@unused</code>将其替换为异常。 <code>@ignored</code>无法导出； <code>@unused</code>可以。</p>
</li>
<li>
<p>可以推断大多数属性类型，因此不需要<code>torch.jit.Attribute</code>。 对于空容器类型，请使用 <a href="https://www.python.org/dev/peps/pep-0526/#class-and-instance-variable-annotations">PEP 526 样式</a>类注释对其类型进行注释。</p>
</li>
<li>
<p>可以使用<code>Final</code>类注释来标记常量，而不是将成员的名称添加到<code>__constants__</code>中。</p>
</li>
<li>
<p>可以使用 Python 3 类型提示代替<code>torch.jit.annotate</code></p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>As a result of these changes, the following items are considered deprecated and should not appear in new code:
</code></pre></div>
<ul>
<li>
<p><code>@torch.jit.script_method</code>装饰器</p>
</li>
<li>
<p>继承自<code>torch.jit.ScriptModule</code>的类</p>
</li>
<li>
<p><code>torch.jit.Attribute</code>包装器类</p>
</li>
<li>
<p><code>__constants__</code>数组</p>
</li>
<li>
<p><code>torch.jit.annotate</code>功能</p>
</li>
</ul>
<h3 id="_2"><a href="#id13">模块</a></h3>
<p>Warning</p>
<p><a href="#torch.jit.ignore" title="torch.jit.ignore"><code>@torch.jit.ignore</code></a> 注释的行为在 PyTorch 1.2 中发生了变化。 在 PyTorch 1.2 之前，@ ignore 装饰器用于使函数或方法可从导出的代码中调用。 要恢复此功能，请使用<code>@torch.jit.unused()</code>。 <code>@torch.jit.ignore</code>现在等同于<code>@torch.jit.ignore(drop=False)</code>。 有关详细信息，请参见 <a href="#torch.jit.ignore" title="torch.jit.ignore"><code>@torch.jit.ignore</code></a> 和 <a href="#torch.jit.unused" title="torch.jit.unused"><code>@torch.jit.unused</code></a> 。</p>
<p>当传递给 <a href="#torch.jit.script" title="torch.jit.script"><code>torch.jit.script</code></a> 函数时，<code>torch.nn.Module</code>的数据将复制到 <a href="#torch.jit.ScriptModule" title="torch.jit.ScriptModule"><code>ScriptModule</code></a> ，然后 TorchScript 编译器将编译该模块。 该模块的<code>forward</code>默认为编译状态。 从<code>forward</code>调用的方法以及它们在<code>forward</code>中使用的顺序都是按延迟顺序编译的。</p>
<hr />
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>torch.jit.export(fn)¶
</code></pre></div>
<p>此修饰符指示<code>nn.Module</code>上的方法用作 <a href="#torch.jit.ScriptModule" title="torch.jit.ScriptModule"><code>ScriptModule</code></a> 的入口点，应进行编译。</p>
<p><code>forward</code>隐式地假定为入口点，因此不需要此装饰器。 从<code>forward</code>调用的函数和方法在编译器看到的情况下进行编译，因此它们也不需要此装饰器。</p>
<p>示例(在方法上使用<code>@torch.jit.export</code>）：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>import torch
<a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a>import torch.nn as nn
<a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a>
<a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a>class MyModule(nn.Module):
<a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a>    def implicitly_compiled_method(self, x):
<a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a>        return x + 99
<a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a>
<a id="__codelineno-29-8" name="__codelineno-29-8" href="#__codelineno-29-8"></a>    # `forward` is implicitly decorated with `@torch.jit.export`,
<a id="__codelineno-29-9" name="__codelineno-29-9" href="#__codelineno-29-9"></a>    # so adding it here would have no effect
<a id="__codelineno-29-10" name="__codelineno-29-10" href="#__codelineno-29-10"></a>    def forward(self, x):
<a id="__codelineno-29-11" name="__codelineno-29-11" href="#__codelineno-29-11"></a>        return x + 10
<a id="__codelineno-29-12" name="__codelineno-29-12" href="#__codelineno-29-12"></a>
<a id="__codelineno-29-13" name="__codelineno-29-13" href="#__codelineno-29-13"></a>    @torch.jit.export
<a id="__codelineno-29-14" name="__codelineno-29-14" href="#__codelineno-29-14"></a>    def another_forward(self, x):
<a id="__codelineno-29-15" name="__codelineno-29-15" href="#__codelineno-29-15"></a>        # When the compiler sees this call, it will compile
<a id="__codelineno-29-16" name="__codelineno-29-16" href="#__codelineno-29-16"></a>        # `implicitly_compiled_method`
<a id="__codelineno-29-17" name="__codelineno-29-17" href="#__codelineno-29-17"></a>        return self.implicitly_compiled_method(x)
<a id="__codelineno-29-18" name="__codelineno-29-18" href="#__codelineno-29-18"></a>
<a id="__codelineno-29-19" name="__codelineno-29-19" href="#__codelineno-29-19"></a>    def unused_method(self, x):
<a id="__codelineno-29-20" name="__codelineno-29-20" href="#__codelineno-29-20"></a>        return x - 20
<a id="__codelineno-29-21" name="__codelineno-29-21" href="#__codelineno-29-21"></a>
<a id="__codelineno-29-22" name="__codelineno-29-22" href="#__codelineno-29-22"></a># `m` will contain compiled methods:
<a id="__codelineno-29-23" name="__codelineno-29-23" href="#__codelineno-29-23"></a>#     `forward`
<a id="__codelineno-29-24" name="__codelineno-29-24" href="#__codelineno-29-24"></a>#     `another_forward`
<a id="__codelineno-29-25" name="__codelineno-29-25" href="#__codelineno-29-25"></a>#     `implicitly_compiled_method`
<a id="__codelineno-29-26" name="__codelineno-29-26" href="#__codelineno-29-26"></a># `unused_method` will not be compiled since it was not called from
<a id="__codelineno-29-27" name="__codelineno-29-27" href="#__codelineno-29-27"></a># any compiled methods and wasn&#39;t decorated with `@torch.jit.export`
<a id="__codelineno-29-28" name="__codelineno-29-28" href="#__codelineno-29-28"></a>m = torch.jit.script(MyModule())
</code></pre></div>
<h3 id="_3"><a href="#id14">功能</a></h3>
<p>功能没有太大变化，可以根据需要用 <a href="#torch.jit.ignore" title="torch.jit.ignore"><code>@torch.jit.ignore</code></a> 或 <a href="#torch.jit.unused" title="torch.jit.unused"><code>torch.jit.unused</code></a> 装饰。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a># Same behavior as pre-PyTorch 1.2
<a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>@torch.jit.script
<a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a>def some_fn():
<a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a>    return 2
<a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a>
<a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a># Marks a function as ignored, if nothing
<a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a># ever calls it then this has no effect
<a id="__codelineno-30-8" name="__codelineno-30-8" href="#__codelineno-30-8"></a>@torch.jit.ignore
<a id="__codelineno-30-9" name="__codelineno-30-9" href="#__codelineno-30-9"></a>def some_fn2():
<a id="__codelineno-30-10" name="__codelineno-30-10" href="#__codelineno-30-10"></a>    return 2
<a id="__codelineno-30-11" name="__codelineno-30-11" href="#__codelineno-30-11"></a>
<a id="__codelineno-30-12" name="__codelineno-30-12" href="#__codelineno-30-12"></a># As with ignore, if nothing calls it then it has no effect.
<a id="__codelineno-30-13" name="__codelineno-30-13" href="#__codelineno-30-13"></a># If it is called in script it is replaced with an exception.
<a id="__codelineno-30-14" name="__codelineno-30-14" href="#__codelineno-30-14"></a>@torch.jit.unused
<a id="__codelineno-30-15" name="__codelineno-30-15" href="#__codelineno-30-15"></a>def some_fn3():
<a id="__codelineno-30-16" name="__codelineno-30-16" href="#__codelineno-30-16"></a>  import pdb; pdb.set_trace()
<a id="__codelineno-30-17" name="__codelineno-30-17" href="#__codelineno-30-17"></a>  return 4
<a id="__codelineno-30-18" name="__codelineno-30-18" href="#__codelineno-30-18"></a>
<a id="__codelineno-30-19" name="__codelineno-30-19" href="#__codelineno-30-19"></a># Doesn&#39;t do anything, this function is already
<a id="__codelineno-30-20" name="__codelineno-30-20" href="#__codelineno-30-20"></a># the main entry point
<a id="__codelineno-30-21" name="__codelineno-30-21" href="#__codelineno-30-21"></a>@torch.jit.export
<a id="__codelineno-30-22" name="__codelineno-30-22" href="#__codelineno-30-22"></a>def some_fn4():
<a id="__codelineno-30-23" name="__codelineno-30-23" href="#__codelineno-30-23"></a>    return 2
</code></pre></div>
<h3 id="torchscript_1"><a href="#id15">TorchScript 类</a></h3>
<p>默认情况下，将导出用户定义的 <a href="#torchscript-class">TorchScript 类</a>中的所有内容，可以根据需要用 <a href="#torch.jit.ignore" title="torch.jit.ignore"><code>@torch.jit.ignore</code></a> 修饰功能。</p>
<h3 id="_4"><a href="#id16">属性</a></h3>
<p>TorchScript 编译器需要知道<a href="#module-attributes">模块属性</a>的类型。 大多数类型可以从成员的值推断出来。 空列表和字典不能推断其类型，而必须使用 <a href="https://www.python.org/dev/peps/pep-0526/#class-and-instance-variable-annotations">PEP 526 样式</a>类注释来注释其类型。 如果无法推断类型并且未对显式类型进行注释，则不会将其作为属性添加到结果 <a href="#torch.jit.ScriptModule" title="torch.jit.ScriptModule"><code>ScriptModule</code></a></p>
<p>旧 API：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a>from typing import Dict
<a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a>import torch
<a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a>
<a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a>class MyModule(torch.jit.ScriptModule):
<a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a>    def __init__(self):
<a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a>        super(MyModule, self).__init__()
<a id="__codelineno-31-7" name="__codelineno-31-7" href="#__codelineno-31-7"></a>        self.my_dict = torch.jit.Attribute({}, Dict[str, int])
<a id="__codelineno-31-8" name="__codelineno-31-8" href="#__codelineno-31-8"></a>        self.my_int = torch.jit.Attribute(20, int)
<a id="__codelineno-31-9" name="__codelineno-31-9" href="#__codelineno-31-9"></a>
<a id="__codelineno-31-10" name="__codelineno-31-10" href="#__codelineno-31-10"></a>m = MyModule()
</code></pre></div>
<p>新 API：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a>from typing import Dict
<a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a>
<a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a>class MyModule(torch.nn.Module):
<a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a>    my_dict: Dict[str, int]
<a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a>
<a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a>    def __init__(self):
<a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a>        super(MyModule, self).__init__()
<a id="__codelineno-32-8" name="__codelineno-32-8" href="#__codelineno-32-8"></a>        # This type cannot be inferred and must be specified
<a id="__codelineno-32-9" name="__codelineno-32-9" href="#__codelineno-32-9"></a>        self.my_dict = {}
<a id="__codelineno-32-10" name="__codelineno-32-10" href="#__codelineno-32-10"></a>
<a id="__codelineno-32-11" name="__codelineno-32-11" href="#__codelineno-32-11"></a>        # The attribute type here is inferred to be `int`
<a id="__codelineno-32-12" name="__codelineno-32-12" href="#__codelineno-32-12"></a>        self.my_int = 20
<a id="__codelineno-32-13" name="__codelineno-32-13" href="#__codelineno-32-13"></a>
<a id="__codelineno-32-14" name="__codelineno-32-14" href="#__codelineno-32-14"></a>    def forward(self):
<a id="__codelineno-32-15" name="__codelineno-32-15" href="#__codelineno-32-15"></a>        pass
<a id="__codelineno-32-16" name="__codelineno-32-16" href="#__codelineno-32-16"></a>
<a id="__codelineno-32-17" name="__codelineno-32-17" href="#__codelineno-32-17"></a>m = torch.jit.script(MyModule())
</code></pre></div>
<h4 id="python-2"><a href="#id17">Python 2</a></h4>
<p>如果您受制于 Python 2 并且无法使用类注释语法，则可以使用<code>__annotations__</code>类成员直接应用类型注释。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>from typing import Dict
<a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a>
<a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a>class MyModule(torch.jit.ScriptModule):
<a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a>    __annotations__ = {&#39;my_dict&#39;: Dict[str, int]}
<a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a>
<a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a>    def __init__(self):
<a id="__codelineno-33-7" name="__codelineno-33-7" href="#__codelineno-33-7"></a>        super(MyModule, self).__init__()
<a id="__codelineno-33-8" name="__codelineno-33-8" href="#__codelineno-33-8"></a>        self.my_dict = {}
<a id="__codelineno-33-9" name="__codelineno-33-9" href="#__codelineno-33-9"></a>        self.my_int = 20
</code></pre></div>
<h3 id="_5"><a href="#id18">常数</a></h3>
<p><code>Final</code>类型的构造函数可用于将成员标记为<a href="#constant">常量</a>。 如果成员未标记为常量，则将其复制为结果 <a href="#torch.jit.ScriptModule" title="torch.jit.ScriptModule"><code>ScriptModule</code></a> 作为属性。 如果已知该值是固定的，则使用<code>Final</code>可以进行优化，并提供附加的类型安全性。</p>
<p>Old API:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a>class MyModule(torch.jit.ScriptModule):
<a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a>    __constants__ = [&#39;my_constant&#39;]
<a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a>
<a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a>    def __init__(self):
<a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a>        super(MyModule, self).__init__()
<a id="__codelineno-34-6" name="__codelineno-34-6" href="#__codelineno-34-6"></a>        self.my_constant = 2
<a id="__codelineno-34-7" name="__codelineno-34-7" href="#__codelineno-34-7"></a>
<a id="__codelineno-34-8" name="__codelineno-34-8" href="#__codelineno-34-8"></a>    def forward(self):
<a id="__codelineno-34-9" name="__codelineno-34-9" href="#__codelineno-34-9"></a>        pass
<a id="__codelineno-34-10" name="__codelineno-34-10" href="#__codelineno-34-10"></a>m = MyModule()
</code></pre></div>
<p>New API:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a>try:
<a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a>    from typing_extensions import Final
<a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a>except:
<a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a>    # If you don&#39;t have `typing_extensions` installed, you can use a
<a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a>    # polyfill from `torch.jit`.
<a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a>    from torch.jit import Final
<a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a>
<a id="__codelineno-35-8" name="__codelineno-35-8" href="#__codelineno-35-8"></a>class MyModule(torch.nn.Module):
<a id="__codelineno-35-9" name="__codelineno-35-9" href="#__codelineno-35-9"></a>
<a id="__codelineno-35-10" name="__codelineno-35-10" href="#__codelineno-35-10"></a>    my_constant: Final[int]
<a id="__codelineno-35-11" name="__codelineno-35-11" href="#__codelineno-35-11"></a>
<a id="__codelineno-35-12" name="__codelineno-35-12" href="#__codelineno-35-12"></a>    def __init__(self):
<a id="__codelineno-35-13" name="__codelineno-35-13" href="#__codelineno-35-13"></a>        super(MyModule, self).__init__()
<a id="__codelineno-35-14" name="__codelineno-35-14" href="#__codelineno-35-14"></a>        self.my_constant = 2
<a id="__codelineno-35-15" name="__codelineno-35-15" href="#__codelineno-35-15"></a>
<a id="__codelineno-35-16" name="__codelineno-35-16" href="#__codelineno-35-16"></a>    def forward(self):
<a id="__codelineno-35-17" name="__codelineno-35-17" href="#__codelineno-35-17"></a>        pass
<a id="__codelineno-35-18" name="__codelineno-35-18" href="#__codelineno-35-18"></a>
<a id="__codelineno-35-19" name="__codelineno-35-19" href="#__codelineno-35-19"></a>m = torch.jit.script(MyModule())
</code></pre></div>
<h3 id="_6"><a href="#id19">变量</a></h3>
<p>假定容器的类型为<code>Tensor</code>，并且是非可选的(有关更多信息，请参见<a href="#default-types">默认类型</a>）。 以前，<code>torch.jit.annotate</code>用来告诉 TorchScript 编译器类型是什么。 现在支持 Python 3 样式类型提示。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a>import torch
<a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a>from typing import Dict, Optional
<a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a>
<a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a>@torch.jit.script
<a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a>def make_dict(flag: bool):
<a id="__codelineno-36-6" name="__codelineno-36-6" href="#__codelineno-36-6"></a>    x: Dict[str, int] = {}
<a id="__codelineno-36-7" name="__codelineno-36-7" href="#__codelineno-36-7"></a>    x[&#39;hi&#39;] = 2
<a id="__codelineno-36-8" name="__codelineno-36-8" href="#__codelineno-36-8"></a>    b: Optional[int] = None
<a id="__codelineno-36-9" name="__codelineno-36-9" href="#__codelineno-36-9"></a>    if flag:
<a id="__codelineno-36-10" name="__codelineno-36-10" href="#__codelineno-36-10"></a>        b = 2
<a id="__codelineno-36-11" name="__codelineno-36-11" href="#__codelineno-36-11"></a>    return x, b
</code></pre></div>
<h2 id="torchscript_2"><a href="#id20">TorchScript 语言参考</a></h2>
<p>TorchScript 是 Python 的静态类型子集，可以直接编写(使用 <a href="#torch.jit.script" title="torch.jit.script"><code>@torch.jit.script</code></a> 装饰器），也可以通过跟踪从 Python 代码自动生成。 使用跟踪时，通过仅在张量上记录实际的运算符并简单地执行和丢弃其他周围的 Python 代码，代码会自动转换为 Python 的此子集。</p>
<p>使用<code>@torch.jit.script</code>装饰器直接编写 TorchScript 时，程序员只能使用 TorchScript 支持的 Python 子集。 本节记录了 TorchScript 支持的功能，就像它是独立语言的语言参考一样。 本参考中未提及的 Python 的任何功能都不属于 TorchScript。 有关可用的 Pytorch 张量方法，模块和功能的完整参考，请参见<a href="#builtin-functions">内置函数</a>。</p>
<p>作为 Python 的子集，任何有效的 TorchScript 函数也是有效的 Python 函数。 这样就可以<a href="#disable-torchscript">禁用 TorchScript</a> 并使用<code>pdb</code>之类的标准 Python 工具调试该功能。 反之则不成立：有许多有效的 Python 程序不是有效的 TorchScript 程序。 相反，TorchScript 特别专注于表示 PyTorch 中的神经网络模型所需的 Python 功能。</p>
<h3 id="_7"><a href="#id21">类型</a></h3>
<p>TorchScript 与完整的 Python 语言之间的最大区别是 TorchScript 仅支持表达神经网络模型所需的一小部分类型。 特别是，TorchScript 支持：</p>
<p>| </p>
<p>类型</p>
<p>| </p>
<p>描述</p>
<p>|
| --- | --- |
| <code>Tensor</code> | 任何 dtype，尺寸或后端的 PyTorch 张量 |
| <code>Tuple[T0, T1, ...]</code> | 包含子类型<code>T0</code>，<code>T1</code>等(例如<code>Tuple[Tensor, Tensor]</code>）的元组 |
| <code>bool</code> | 布尔值 |
| <code>int</code> | 标量整数 |
| <code>float</code> | 标量浮点数 |
| <code>str</code> | 一串 |
| <code>List[T]</code> | 所有成员均为<code>T</code>类型的列表 |
| <code>Optional[T]</code> | 无或输入<code>T</code>的值 |
| <code>Dict[K, V]</code> | 键类型为<code>K</code>而值类型为<code>V</code>的字典。 只能将<code>str</code>，<code>int</code>和<code>float</code>作为密​​钥类型。 |
| <code>T</code> | 一个 <a href="#torchscript-class">TorchScript 类</a> |
| <code>NamedTuple[T0, T1, ...]</code> | <code>collections.namedtuple</code>元组类型 |</p>
<p>与 Python 不同，TorchScript 函数中的每个变量都必须具有一个静态类型。 这使优化 TorchScript 函数变得更加容易。</p>
<p>示例(类型不匹配）</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a>import torch
<a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a>
<a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a>@torch.jit.script
<a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a>def an_error(x):
<a id="__codelineno-37-5" name="__codelineno-37-5" href="#__codelineno-37-5"></a>    if x:
<a id="__codelineno-37-6" name="__codelineno-37-6" href="#__codelineno-37-6"></a>        r = torch.rand(1)
<a id="__codelineno-37-7" name="__codelineno-37-7" href="#__codelineno-37-7"></a>    else:
<a id="__codelineno-37-8" name="__codelineno-37-8" href="#__codelineno-37-8"></a>        r = 4
<a id="__codelineno-37-9" name="__codelineno-37-9" href="#__codelineno-37-9"></a>    return r
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a>Traceback (most recent call last):
<a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a>  ...
<a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a>RuntimeError: ...
<a id="__codelineno-38-4" name="__codelineno-38-4" href="#__codelineno-38-4"></a>
<a id="__codelineno-38-5" name="__codelineno-38-5" href="#__codelineno-38-5"></a>Type mismatch: r is set to type Tensor in the true branch and type int in the false branch:
<a id="__codelineno-38-6" name="__codelineno-38-6" href="#__codelineno-38-6"></a>@torch.jit.script
<a id="__codelineno-38-7" name="__codelineno-38-7" href="#__codelineno-38-7"></a>def an_error(x):
<a id="__codelineno-38-8" name="__codelineno-38-8" href="#__codelineno-38-8"></a>    if x:
<a id="__codelineno-38-9" name="__codelineno-38-9" href="#__codelineno-38-9"></a>    ~~~~~...  &lt;--- HERE
<a id="__codelineno-38-10" name="__codelineno-38-10" href="#__codelineno-38-10"></a>        r = torch.rand(1)
<a id="__codelineno-38-11" name="__codelineno-38-11" href="#__codelineno-38-11"></a>    else:
<a id="__codelineno-38-12" name="__codelineno-38-12" href="#__codelineno-38-12"></a>and was used here:
<a id="__codelineno-38-13" name="__codelineno-38-13" href="#__codelineno-38-13"></a>    else:
<a id="__codelineno-38-14" name="__codelineno-38-14" href="#__codelineno-38-14"></a>        r = 4
<a id="__codelineno-38-15" name="__codelineno-38-15" href="#__codelineno-38-15"></a>    return r
<a id="__codelineno-38-16" name="__codelineno-38-16" href="#__codelineno-38-16"></a>           ~ &lt;--- HERE
<a id="__codelineno-38-17" name="__codelineno-38-17" href="#__codelineno-38-17"></a>...
</code></pre></div>
<h4 id="_8"><a href="#id22">默认类型</a></h4>
<p>默认情况下，TorchScript 函数的所有参数均假定为 Tensor。 要指定 TorchScript 函数的参数是其他类型，可以使用上面列出的类型使用 MyPy 样式的类型注释。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a>import torch
<a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a>
<a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a>@torch.jit.script
<a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a>def foo(x, tup):
<a id="__codelineno-39-5" name="__codelineno-39-5" href="#__codelineno-39-5"></a>    # type: (int, Tuple[Tensor, Tensor]) -&gt; Tensor
<a id="__codelineno-39-6" name="__codelineno-39-6" href="#__codelineno-39-6"></a>    t0, t1 = tup
<a id="__codelineno-39-7" name="__codelineno-39-7" href="#__codelineno-39-7"></a>    return t0 + t1 + x
<a id="__codelineno-39-8" name="__codelineno-39-8" href="#__codelineno-39-8"></a>
<a id="__codelineno-39-9" name="__codelineno-39-9" href="#__codelineno-39-9"></a>print(foo(3, (torch.rand(3), torch.rand(3))))
</code></pre></div>
<p>注意</p>
<p>也可以使用<code>typing</code>模块中的 Python 3 类型提示来注释类型。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a>import torch
<a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a>from typing import Tuple
<a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a>
<a id="__codelineno-40-4" name="__codelineno-40-4" href="#__codelineno-40-4"></a>@torch.jit.script
<a id="__codelineno-40-5" name="__codelineno-40-5" href="#__codelineno-40-5"></a>def foo(x: int, tup: Tuple[torch.Tensor, torch.Tensor]) -&gt; torch.Tensor:
<a id="__codelineno-40-6" name="__codelineno-40-6" href="#__codelineno-40-6"></a>    t0, t1 = tup
<a id="__codelineno-40-7" name="__codelineno-40-7" href="#__codelineno-40-7"></a>    return t0 + t1 + x
<a id="__codelineno-40-8" name="__codelineno-40-8" href="#__codelineno-40-8"></a>
<a id="__codelineno-40-9" name="__codelineno-40-9" href="#__codelineno-40-9"></a>print(foo(3, (torch.rand(3), torch.rand(3))))
</code></pre></div>
<p>在我们的示例中，我们使用基于注释的类型提示来确保 Python 2 的兼容性。</p>
<p>假定空列表为<code>List[Tensor]</code>，空字典为<code>Dict[str, Tensor]</code>。 要实例化其他类型的空列表或字典，请使用 <a href="#python-3-type-hints">Python 3 类型提示</a>。 如果您使用的是 Python 2，则可以使用<code>torch.jit.annotate</code>。</p>
<p>示例(Python 3 的类型注释）：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a>import torch
<a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a>import torch.nn as nn
<a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a>from typing import Dict, List, Tuple
<a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a>
<a id="__codelineno-41-5" name="__codelineno-41-5" href="#__codelineno-41-5"></a>class EmptyDataStructures(torch.nn.Module):
<a id="__codelineno-41-6" name="__codelineno-41-6" href="#__codelineno-41-6"></a>    def __init__(self):
<a id="__codelineno-41-7" name="__codelineno-41-7" href="#__codelineno-41-7"></a>        super(EmptyDataStructures, self).__init__()
<a id="__codelineno-41-8" name="__codelineno-41-8" href="#__codelineno-41-8"></a>
<a id="__codelineno-41-9" name="__codelineno-41-9" href="#__codelineno-41-9"></a>    def forward(self, x: torch.Tensor) -&gt; Tuple[List[Tuple[int, float]], Dict[str, int]]:
<a id="__codelineno-41-10" name="__codelineno-41-10" href="#__codelineno-41-10"></a>        # This annotates the list to be a `List[Tuple[int, float]]`
<a id="__codelineno-41-11" name="__codelineno-41-11" href="#__codelineno-41-11"></a>        my_list: List[Tuple[int, float]] = []
<a id="__codelineno-41-12" name="__codelineno-41-12" href="#__codelineno-41-12"></a>        for i in range(10):
<a id="__codelineno-41-13" name="__codelineno-41-13" href="#__codelineno-41-13"></a>            my_list.append((i, x.item()))
<a id="__codelineno-41-14" name="__codelineno-41-14" href="#__codelineno-41-14"></a>
<a id="__codelineno-41-15" name="__codelineno-41-15" href="#__codelineno-41-15"></a>        my_dict: Dict[str, int] = {}
<a id="__codelineno-41-16" name="__codelineno-41-16" href="#__codelineno-41-16"></a>        return my_list, my_dict
<a id="__codelineno-41-17" name="__codelineno-41-17" href="#__codelineno-41-17"></a>
<a id="__codelineno-41-18" name="__codelineno-41-18" href="#__codelineno-41-18"></a>x = torch.jit.script(EmptyDataStructures())
</code></pre></div>
<p>示例(适用于 Python 2 的<code>torch.jit.annotate</code>）：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a>import torch
<a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a>import torch.nn as nn
<a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a>from typing import Dict, List, Tuple
<a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a>
<a id="__codelineno-42-5" name="__codelineno-42-5" href="#__codelineno-42-5"></a>class EmptyDataStructures(torch.nn.Module):
<a id="__codelineno-42-6" name="__codelineno-42-6" href="#__codelineno-42-6"></a>    def __init__(self):
<a id="__codelineno-42-7" name="__codelineno-42-7" href="#__codelineno-42-7"></a>        super(EmptyDataStructures, self).__init__()
<a id="__codelineno-42-8" name="__codelineno-42-8" href="#__codelineno-42-8"></a>
<a id="__codelineno-42-9" name="__codelineno-42-9" href="#__codelineno-42-9"></a>    def forward(self, x):
<a id="__codelineno-42-10" name="__codelineno-42-10" href="#__codelineno-42-10"></a>        # type: (Tensor) -&gt; Tuple[List[Tuple[int, float]], Dict[str, int]]
<a id="__codelineno-42-11" name="__codelineno-42-11" href="#__codelineno-42-11"></a>
<a id="__codelineno-42-12" name="__codelineno-42-12" href="#__codelineno-42-12"></a>        # This annotates the list to be a `List[Tuple[int, float]]`
<a id="__codelineno-42-13" name="__codelineno-42-13" href="#__codelineno-42-13"></a>        my_list = torch.jit.annotate(List[Tuple[int, float]], [])
<a id="__codelineno-42-14" name="__codelineno-42-14" href="#__codelineno-42-14"></a>        for i in range(10):
<a id="__codelineno-42-15" name="__codelineno-42-15" href="#__codelineno-42-15"></a>            my_list.append((i, float(x.item())))
<a id="__codelineno-42-16" name="__codelineno-42-16" href="#__codelineno-42-16"></a>
<a id="__codelineno-42-17" name="__codelineno-42-17" href="#__codelineno-42-17"></a>        my_dict = torch.jit.annotate(Dict[str, int], {})
<a id="__codelineno-42-18" name="__codelineno-42-18" href="#__codelineno-42-18"></a>        return my_list, my_dict
<a id="__codelineno-42-19" name="__codelineno-42-19" href="#__codelineno-42-19"></a>
<a id="__codelineno-42-20" name="__codelineno-42-20" href="#__codelineno-42-20"></a>x = torch.jit.script(EmptyDataStructures())
</code></pre></div>
<h4 id="_9"><a href="#id23">可选类型细化</a></h4>
<p>在 if 语句的条件内或在<code>assert</code>中检查与<code>None</code>的比较时，TorchScript 将优化<code>Optional[T]</code>类型的变量的类型。 编译器可以推理与<code>and</code>，<code>or</code>和<code>not</code>结合的多个<code>None</code>检查。 对于未明确编写的 if 语句的 else 块，也会进行优化。</p>
<p><code>None</code>检查必须在 if 语句的条件内； 将<code>None</code>检查分配给变量，并在 if 语句的条件下使用它，将不会优化检查中的变量类型。 仅局部变量将被细化，<code>self.x</code>之类的属性将不会且必须分配给要细化的局部变量。</p>
<p>示例(优化参数和局部变量的类型）：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a>import torch
<a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a>import torch.nn as nn
<a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a>from typing import Optional
<a id="__codelineno-43-4" name="__codelineno-43-4" href="#__codelineno-43-4"></a>
<a id="__codelineno-43-5" name="__codelineno-43-5" href="#__codelineno-43-5"></a>class M(nn.Module):
<a id="__codelineno-43-6" name="__codelineno-43-6" href="#__codelineno-43-6"></a>    z: Optional[int]
<a id="__codelineno-43-7" name="__codelineno-43-7" href="#__codelineno-43-7"></a>
<a id="__codelineno-43-8" name="__codelineno-43-8" href="#__codelineno-43-8"></a>    def __init__(self, z):
<a id="__codelineno-43-9" name="__codelineno-43-9" href="#__codelineno-43-9"></a>        super(M, self).__init__()
<a id="__codelineno-43-10" name="__codelineno-43-10" href="#__codelineno-43-10"></a>        # If `z` is None, its type cannot be inferred, so it must
<a id="__codelineno-43-11" name="__codelineno-43-11" href="#__codelineno-43-11"></a>        # be specified (above)
<a id="__codelineno-43-12" name="__codelineno-43-12" href="#__codelineno-43-12"></a>        self.z = z
<a id="__codelineno-43-13" name="__codelineno-43-13" href="#__codelineno-43-13"></a>
<a id="__codelineno-43-14" name="__codelineno-43-14" href="#__codelineno-43-14"></a>    def forward(self, x, y, z):
<a id="__codelineno-43-15" name="__codelineno-43-15" href="#__codelineno-43-15"></a>        # type: (Optional[int], Optional[int], Optional[int]) -&gt; int
<a id="__codelineno-43-16" name="__codelineno-43-16" href="#__codelineno-43-16"></a>        if x is None:
<a id="__codelineno-43-17" name="__codelineno-43-17" href="#__codelineno-43-17"></a>            x = 1
<a id="__codelineno-43-18" name="__codelineno-43-18" href="#__codelineno-43-18"></a>            x = x + 1
<a id="__codelineno-43-19" name="__codelineno-43-19" href="#__codelineno-43-19"></a>
<a id="__codelineno-43-20" name="__codelineno-43-20" href="#__codelineno-43-20"></a>        # Refinement for an attribute by assigning it to a local
<a id="__codelineno-43-21" name="__codelineno-43-21" href="#__codelineno-43-21"></a>        z = self.z
<a id="__codelineno-43-22" name="__codelineno-43-22" href="#__codelineno-43-22"></a>        if y is not None and z is not None:
<a id="__codelineno-43-23" name="__codelineno-43-23" href="#__codelineno-43-23"></a>            x = y + z
<a id="__codelineno-43-24" name="__codelineno-43-24" href="#__codelineno-43-24"></a>
<a id="__codelineno-43-25" name="__codelineno-43-25" href="#__codelineno-43-25"></a>        # Refinement via an `assert`
<a id="__codelineno-43-26" name="__codelineno-43-26" href="#__codelineno-43-26"></a>        assert z is not None
<a id="__codelineno-43-27" name="__codelineno-43-27" href="#__codelineno-43-27"></a>        x += z
<a id="__codelineno-43-28" name="__codelineno-43-28" href="#__codelineno-43-28"></a>        return x
<a id="__codelineno-43-29" name="__codelineno-43-29" href="#__codelineno-43-29"></a>
<a id="__codelineno-43-30" name="__codelineno-43-30" href="#__codelineno-43-30"></a>module = torch.jit.script(M(2))
<a id="__codelineno-43-31" name="__codelineno-43-31" href="#__codelineno-43-31"></a>module = torch.jit.script(M(None))
</code></pre></div>
<h4 id="torchscript_3"><a href="#id24">TorchScript 类</a></h4>
<p>如果 Python 类使用 <a href="#torch.jit.script" title="torch.jit.script"><code>@torch.jit.script</code></a> 注释，则可以在 TorchScript 中使用，类似于声明 TorchScript 函数的方式：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a>@torch.jit.script
<a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a>class Foo:
<a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a>  def __init__(self, x, y):
<a id="__codelineno-44-4" name="__codelineno-44-4" href="#__codelineno-44-4"></a>    self.x = x
<a id="__codelineno-44-5" name="__codelineno-44-5" href="#__codelineno-44-5"></a>
<a id="__codelineno-44-6" name="__codelineno-44-6" href="#__codelineno-44-6"></a>  def aug_add_x(self, inc):
<a id="__codelineno-44-7" name="__codelineno-44-7" href="#__codelineno-44-7"></a>    self.x += inc
</code></pre></div>
<p>此子集受限制：</p>
<ul>
<li>
<p>所有函数必须是有效的 TorchScript 函数(包括<code>__init__()</code>）。</p>
</li>
<li>
<p>这些类必须是新型类，因为我们使用<code>__new__()</code>和 pybind11 来构造它们。</p>
</li>
<li>
<p>TorchScript 类是静态类型的。 只能通过在<code>__init__()</code>方法中分配给 self 来声明成员。</p>
<p>&gt; 例如，在<code>__init__()</code>方法之外分配给<code>self</code>：
&gt; 
&gt; <code>&amp;gt; @torch.jit.script
&amp;gt; class Foo:
&amp;gt;   def assign_x(self):
&amp;gt;     self.x = torch.rand(2, 3)
&amp;gt; 
&amp;gt;</code>
&gt; 
&gt; 将导致：
&gt; 
&gt; <code>&amp;gt; RuntimeError:
&amp;gt; Tried to set nonexistent attribute: x. Did you forget to initialize it in __init__()?:
&amp;gt; def assign_x(self):
&amp;gt;   self.x = torch.rand(2, 3)
&amp;gt;   ~~~~~~~~~~~~~~~~~~~~~~~~ &amp;lt;--- HERE
&amp;gt; 
&amp;gt;</code></p>
</li>
<li>
<p>类的主体中不允许使用除方法定义之外的任何表达式。</p>
</li>
<li>
<p>除了从<code>object</code>继承以指定新样式类外，不支持继承或任何其他多态策略。</p>
</li>
</ul>
<p>定义了一个类之后，就可以像其他任何 TorchScript 类型一样在 TorchScript 和 Python 中互换使用该类：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a># Declare a TorchScript class
<a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a>@torch.jit.script
<a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a>class Pair:
<a id="__codelineno-45-4" name="__codelineno-45-4" href="#__codelineno-45-4"></a>  def __init__(self, first, second):
<a id="__codelineno-45-5" name="__codelineno-45-5" href="#__codelineno-45-5"></a>    self.first = first
<a id="__codelineno-45-6" name="__codelineno-45-6" href="#__codelineno-45-6"></a>    self.second = second
<a id="__codelineno-45-7" name="__codelineno-45-7" href="#__codelineno-45-7"></a>
<a id="__codelineno-45-8" name="__codelineno-45-8" href="#__codelineno-45-8"></a>@torch.jit.script
<a id="__codelineno-45-9" name="__codelineno-45-9" href="#__codelineno-45-9"></a>def sum_pair(p):
<a id="__codelineno-45-10" name="__codelineno-45-10" href="#__codelineno-45-10"></a>  # type: (Pair) -&gt; Tensor
<a id="__codelineno-45-11" name="__codelineno-45-11" href="#__codelineno-45-11"></a>  return p.first + p.second
<a id="__codelineno-45-12" name="__codelineno-45-12" href="#__codelineno-45-12"></a>
<a id="__codelineno-45-13" name="__codelineno-45-13" href="#__codelineno-45-13"></a>p = Pair(torch.rand(2, 3), torch.rand(2, 3))
<a id="__codelineno-45-14" name="__codelineno-45-14" href="#__codelineno-45-14"></a>print(sum_pair(p))
</code></pre></div>
<h4 id="_10"><a href="#id25">命名为元组</a></h4>
<p><code>collections.namedtuple</code>产生的类型可以在 TorchScript 中使用。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a>import torch
<a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a>import collections
<a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a>
<a id="__codelineno-46-4" name="__codelineno-46-4" href="#__codelineno-46-4"></a>Point = collections.namedtuple(&#39;Point&#39;, [&#39;x&#39;, &#39;y&#39;])
<a id="__codelineno-46-5" name="__codelineno-46-5" href="#__codelineno-46-5"></a>
<a id="__codelineno-46-6" name="__codelineno-46-6" href="#__codelineno-46-6"></a>@torch.jit.script
<a id="__codelineno-46-7" name="__codelineno-46-7" href="#__codelineno-46-7"></a>def total(point):
<a id="__codelineno-46-8" name="__codelineno-46-8" href="#__codelineno-46-8"></a>    # type: (Point) -&gt; Tensor
<a id="__codelineno-46-9" name="__codelineno-46-9" href="#__codelineno-46-9"></a>    return point.x + point.y
<a id="__codelineno-46-10" name="__codelineno-46-10" href="#__codelineno-46-10"></a>
<a id="__codelineno-46-11" name="__codelineno-46-11" href="#__codelineno-46-11"></a>p = Point(x=torch.rand(3), y=torch.rand(3))
<a id="__codelineno-46-12" name="__codelineno-46-12" href="#__codelineno-46-12"></a>print(total(p))
</code></pre></div>
<h3 id="_11"><a href="#id26">表达式</a></h3>
<p>支持以下 Python 表达式。</p>
<h4 id="_12"><a href="#id27">文字</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a>True
<a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a>False
<a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a>None
<a id="__codelineno-47-4" name="__codelineno-47-4" href="#__codelineno-47-4"></a>&#39;string literals&#39;
<a id="__codelineno-47-5" name="__codelineno-47-5" href="#__codelineno-47-5"></a>&quot;string literals&quot;
<a id="__codelineno-47-6" name="__codelineno-47-6" href="#__codelineno-47-6"></a>3  # interpreted as int
<a id="__codelineno-47-7" name="__codelineno-47-7" href="#__codelineno-47-7"></a>3.4  # interpreted as a float
</code></pre></div>
<h5 id="_13"><a href="#id28">列表结构</a></h5>
<p>假定一个空列表具有<code>List[Tensor]</code>类型。 其他列表文字的类型是从成员的类型派生的。 有关更多详细信息，请参见<a href="#default-types">默认类型</a>。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a>[3, 4]
<a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a>[]
<a id="__codelineno-48-3" name="__codelineno-48-3" href="#__codelineno-48-3"></a>[torch.rand(3), torch.rand(4)]
</code></pre></div>
<h5 id="_14"><a href="#id29">元组结构</a></h5>
<div class="highlight"><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a>(3, 4)
<a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a>(3,)
</code></pre></div>
<h5 id="_15"><a href="#id30">字典结构</a></h5>
<p>假定一个空字典为<code>Dict[str, Tensor]</code>类型。 其他 dict 文字的类型是从成员的类型派生的。 有关更多详细信息，请参见<a href="#default-types">默认类型</a>。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a>{&#39;hello&#39;: 3}
<a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a>{}
<a id="__codelineno-50-3" name="__codelineno-50-3" href="#__codelineno-50-3"></a>{&#39;a&#39;: torch.rand(3), &#39;b&#39;: torch.rand(4)}
</code></pre></div>
<h4 id="_16"><a href="#id31">变量</a></h4>
<p>有关如何解析变量的信息，请参见<a href="#variable-resolution">变量分辨率</a>。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a>my_variable_name
</code></pre></div>
<h4 id="_17"><a href="#id32">算术运算符</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a>a + b
<a id="__codelineno-52-2" name="__codelineno-52-2" href="#__codelineno-52-2"></a>a - b
<a id="__codelineno-52-3" name="__codelineno-52-3" href="#__codelineno-52-3"></a>a * b
<a id="__codelineno-52-4" name="__codelineno-52-4" href="#__codelineno-52-4"></a>a / b
<a id="__codelineno-52-5" name="__codelineno-52-5" href="#__codelineno-52-5"></a>a ^ b
<a id="__codelineno-52-6" name="__codelineno-52-6" href="#__codelineno-52-6"></a>a @ b
</code></pre></div>
<h4 id="_18"><a href="#id33">比较运算符</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a>a == b
<a id="__codelineno-53-2" name="__codelineno-53-2" href="#__codelineno-53-2"></a>a != b
<a id="__codelineno-53-3" name="__codelineno-53-3" href="#__codelineno-53-3"></a>a &lt; b
<a id="__codelineno-53-4" name="__codelineno-53-4" href="#__codelineno-53-4"></a>a &gt; b
<a id="__codelineno-53-5" name="__codelineno-53-5" href="#__codelineno-53-5"></a>a &lt;= b
<a id="__codelineno-53-6" name="__codelineno-53-6" href="#__codelineno-53-6"></a>a &gt;= b
</code></pre></div>
<h4 id="_19"><a href="#id34">逻辑运算符</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a>a and b
<a id="__codelineno-54-2" name="__codelineno-54-2" href="#__codelineno-54-2"></a>a or b
<a id="__codelineno-54-3" name="__codelineno-54-3" href="#__codelineno-54-3"></a>not b
</code></pre></div>
<h4 id="_20"><a href="#id35">下标和切片</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a>t[0]
<a id="__codelineno-55-2" name="__codelineno-55-2" href="#__codelineno-55-2"></a>t[-1]
<a id="__codelineno-55-3" name="__codelineno-55-3" href="#__codelineno-55-3"></a>t[0:2]
<a id="__codelineno-55-4" name="__codelineno-55-4" href="#__codelineno-55-4"></a>t[1:]
<a id="__codelineno-55-5" name="__codelineno-55-5" href="#__codelineno-55-5"></a>t[:1]
<a id="__codelineno-55-6" name="__codelineno-55-6" href="#__codelineno-55-6"></a>t[:]
<a id="__codelineno-55-7" name="__codelineno-55-7" href="#__codelineno-55-7"></a>t[0, 1]
<a id="__codelineno-55-8" name="__codelineno-55-8" href="#__codelineno-55-8"></a>t[0, 1:2]
<a id="__codelineno-55-9" name="__codelineno-55-9" href="#__codelineno-55-9"></a>t[0, :1]
<a id="__codelineno-55-10" name="__codelineno-55-10" href="#__codelineno-55-10"></a>t[-1, 1:, 0]
<a id="__codelineno-55-11" name="__codelineno-55-11" href="#__codelineno-55-11"></a>t[1:, -1, 0]
<a id="__codelineno-55-12" name="__codelineno-55-12" href="#__codelineno-55-12"></a>t[i:j, i]
</code></pre></div>
<h4 id="_21"><a href="#id36">函数调用</a></h4>
<p>调用<a href="#builtin-functions">内置函数</a></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a>torch.rand(3, dtype=torch.int)
</code></pre></div>
<p>调用其他脚本函数：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a>import torch
<a id="__codelineno-57-2" name="__codelineno-57-2" href="#__codelineno-57-2"></a>
<a id="__codelineno-57-3" name="__codelineno-57-3" href="#__codelineno-57-3"></a>@torch.jit.script
<a id="__codelineno-57-4" name="__codelineno-57-4" href="#__codelineno-57-4"></a>def foo(x):
<a id="__codelineno-57-5" name="__codelineno-57-5" href="#__codelineno-57-5"></a>    return x + 1
<a id="__codelineno-57-6" name="__codelineno-57-6" href="#__codelineno-57-6"></a>
<a id="__codelineno-57-7" name="__codelineno-57-7" href="#__codelineno-57-7"></a>@torch.jit.script
<a id="__codelineno-57-8" name="__codelineno-57-8" href="#__codelineno-57-8"></a>def bar(x):
<a id="__codelineno-57-9" name="__codelineno-57-9" href="#__codelineno-57-9"></a>    return foo(x)
</code></pre></div>
<h4 id="_22"><a href="#id37">方法调用</a></h4>
<p>调用诸如张量之类的内置类型的方法：<code>x.mm(y)</code></p>
<p>在模块上，必须先编译方法才能调用它们。 TorchScript 编译器以递归方式编译在编译其他方法时看到的方法。 默认情况下，编译从<code>forward</code>方法开始。 将编译<code>forward</code>调用的任何方法，以及这些方法调用的任何方法，依此类推。 要以<code>forward</code>以外的方法开始编译，请使用 <a href="#torch.jit.export" title="torch.jit.export"><code>@torch.jit.export</code></a> 装饰器(<code>forward</code>隐式标记为<code>@torch.jit.export</code>）。</p>
<p>直接调用子模块(例如<code>self.resnet(input)</code>）等效于调用其<code>forward</code>方法(例如<code>self.resnet.forward(input)</code>）。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a>import torch
<a id="__codelineno-58-2" name="__codelineno-58-2" href="#__codelineno-58-2"></a>import torch.nn as nn
<a id="__codelineno-58-3" name="__codelineno-58-3" href="#__codelineno-58-3"></a>import torchvision
<a id="__codelineno-58-4" name="__codelineno-58-4" href="#__codelineno-58-4"></a>
<a id="__codelineno-58-5" name="__codelineno-58-5" href="#__codelineno-58-5"></a>class MyModule(nn.Module):
<a id="__codelineno-58-6" name="__codelineno-58-6" href="#__codelineno-58-6"></a>    def __init__(self):
<a id="__codelineno-58-7" name="__codelineno-58-7" href="#__codelineno-58-7"></a>        super(MyModule, self).__init__()
<a id="__codelineno-58-8" name="__codelineno-58-8" href="#__codelineno-58-8"></a>        means = torch.tensor([103.939, 116.779, 123.68])
<a id="__codelineno-58-9" name="__codelineno-58-9" href="#__codelineno-58-9"></a>        self.means = torch.nn.Parameter(means.resize_(1, 3, 1, 1))
<a id="__codelineno-58-10" name="__codelineno-58-10" href="#__codelineno-58-10"></a>        resnet = torchvision.models.resnet18()
<a id="__codelineno-58-11" name="__codelineno-58-11" href="#__codelineno-58-11"></a>        self.resnet = torch.jit.trace(resnet, torch.rand(1, 3, 224, 224))
<a id="__codelineno-58-12" name="__codelineno-58-12" href="#__codelineno-58-12"></a>
<a id="__codelineno-58-13" name="__codelineno-58-13" href="#__codelineno-58-13"></a>    def helper(self, input):
<a id="__codelineno-58-14" name="__codelineno-58-14" href="#__codelineno-58-14"></a>        return self.resnet(input - self.means)
<a id="__codelineno-58-15" name="__codelineno-58-15" href="#__codelineno-58-15"></a>
<a id="__codelineno-58-16" name="__codelineno-58-16" href="#__codelineno-58-16"></a>    def forward(self, input):
<a id="__codelineno-58-17" name="__codelineno-58-17" href="#__codelineno-58-17"></a>        return self.helper(input)
<a id="__codelineno-58-18" name="__codelineno-58-18" href="#__codelineno-58-18"></a>
<a id="__codelineno-58-19" name="__codelineno-58-19" href="#__codelineno-58-19"></a>    # Since nothing in the model calls `top_level_method`, the compiler
<a id="__codelineno-58-20" name="__codelineno-58-20" href="#__codelineno-58-20"></a>    # must be explicitly told to compile this method
<a id="__codelineno-58-21" name="__codelineno-58-21" href="#__codelineno-58-21"></a>    @torch.jit.export
<a id="__codelineno-58-22" name="__codelineno-58-22" href="#__codelineno-58-22"></a>    def top_level_method(self, input):
<a id="__codelineno-58-23" name="__codelineno-58-23" href="#__codelineno-58-23"></a>        return self.other_helper(input)
<a id="__codelineno-58-24" name="__codelineno-58-24" href="#__codelineno-58-24"></a>
<a id="__codelineno-58-25" name="__codelineno-58-25" href="#__codelineno-58-25"></a>    def other_helper(self, input):
<a id="__codelineno-58-26" name="__codelineno-58-26" href="#__codelineno-58-26"></a>        return input + 10
<a id="__codelineno-58-27" name="__codelineno-58-27" href="#__codelineno-58-27"></a>
<a id="__codelineno-58-28" name="__codelineno-58-28" href="#__codelineno-58-28"></a># `my_script_module` will have the compiled methods `forward`, `helper`,
<a id="__codelineno-58-29" name="__codelineno-58-29" href="#__codelineno-58-29"></a># `top_level_method`, and `other_helper`
<a id="__codelineno-58-30" name="__codelineno-58-30" href="#__codelineno-58-30"></a>my_script_module = torch.jit.script(MyModule())
</code></pre></div>
<h4 id="_23"><a href="#id38">三元表达式</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a>x if x &gt; y else y
</code></pre></div>
<h4 id="_24"><a href="#id39">演员表</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a>float(ten)
<a id="__codelineno-60-2" name="__codelineno-60-2" href="#__codelineno-60-2"></a>int(3.5)
<a id="__codelineno-60-3" name="__codelineno-60-3" href="#__codelineno-60-3"></a>bool(ten)
<a id="__codelineno-60-4" name="__codelineno-60-4" href="#__codelineno-60-4"></a>str(2)``
</code></pre></div>
<h4 id="_25"><a href="#id40">访问模块参数</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a>self.my_parameter
<a id="__codelineno-61-2" name="__codelineno-61-2" href="#__codelineno-61-2"></a>self.my_submodule.my_parameter
</code></pre></div>
<h3 id="_26"><a href="#id41">语句</a></h3>
<p>TorchScript 支持以下类型的语句：</p>
<h4 id="_27"><a href="#id42">简单分配</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-62-1" name="__codelineno-62-1" href="#__codelineno-62-1"></a>a = b
<a id="__codelineno-62-2" name="__codelineno-62-2" href="#__codelineno-62-2"></a>a += b # short-hand for a = a + b, does not operate in-place on a
<a id="__codelineno-62-3" name="__codelineno-62-3" href="#__codelineno-62-3"></a>a -= b
</code></pre></div>
<h4 id="_28"><a href="#id43">模式匹配分配</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-63-1" name="__codelineno-63-1" href="#__codelineno-63-1"></a>a, b = tuple_or_list
<a id="__codelineno-63-2" name="__codelineno-63-2" href="#__codelineno-63-2"></a>a, b, *c = a_tuple
</code></pre></div>
<p>多项分配</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-64-1" name="__codelineno-64-1" href="#__codelineno-64-1"></a>a = b, c = tup
</code></pre></div>
<h4 id="_29"><a href="#id44">打印报表</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-65-1" name="__codelineno-65-1" href="#__codelineno-65-1"></a>print(&quot;the result of an add:&quot;, a + b)
</code></pre></div>
<h4 id="if"><a href="#id45">If 语句</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-66-1" name="__codelineno-66-1" href="#__codelineno-66-1"></a>if a &lt; 4:
<a id="__codelineno-66-2" name="__codelineno-66-2" href="#__codelineno-66-2"></a>    r = -a
<a id="__codelineno-66-3" name="__codelineno-66-3" href="#__codelineno-66-3"></a>elif a &lt; 3:
<a id="__codelineno-66-4" name="__codelineno-66-4" href="#__codelineno-66-4"></a>    r = a + a
<a id="__codelineno-66-5" name="__codelineno-66-5" href="#__codelineno-66-5"></a>else:
<a id="__codelineno-66-6" name="__codelineno-66-6" href="#__codelineno-66-6"></a>    r = 3 * a
</code></pre></div>
<p>除布尔值外，浮点数，整数和张量还可以在条件中使用，并将隐式转换为布尔值。</p>
<h4 id="while"><a href="#id46">While 循环</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-67-1" name="__codelineno-67-1" href="#__codelineno-67-1"></a>a = 0
<a id="__codelineno-67-2" name="__codelineno-67-2" href="#__codelineno-67-2"></a>while a &lt; 4:
<a id="__codelineno-67-3" name="__codelineno-67-3" href="#__codelineno-67-3"></a>    print(a)
<a id="__codelineno-67-4" name="__codelineno-67-4" href="#__codelineno-67-4"></a>    a += 1
</code></pre></div>
<h4 id="_30"><a href="#id47">适用于范围为</a>的循环</h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-68-1" name="__codelineno-68-1" href="#__codelineno-68-1"></a>x = 0
<a id="__codelineno-68-2" name="__codelineno-68-2" href="#__codelineno-68-2"></a>for i in range(10):
<a id="__codelineno-68-3" name="__codelineno-68-3" href="#__codelineno-68-3"></a>    x *= i
</code></pre></div>
<h4 id="_31"><a href="#id48">用于遍历元组的循环</a></h4>
<p>这些展开循环，为元组的每个成员生成一个主体。 主体必须对每个成员进行正确的类型检查。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-69-1" name="__codelineno-69-1" href="#__codelineno-69-1"></a>tup = (3, torch.rand(4))
<a id="__codelineno-69-2" name="__codelineno-69-2" href="#__codelineno-69-2"></a>for x in tup:
<a id="__codelineno-69-3" name="__codelineno-69-3" href="#__codelineno-69-3"></a>    print(x)
</code></pre></div>
<h4 id="nnmodulelist"><a href="#id49">用于在常量 nn.ModuleList</a> 上循环</h4>
<p>要在已编译方法中使用<code>nn.ModuleList</code>，必须通过将属性名称添加到<code>__constants__</code>列表中的类型来将其标记为常量。 <code>nn.ModuleList</code>上的 for 循环将在编译时展开循环的主体，并使用常量模块列表的每个成员。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-70-1" name="__codelineno-70-1" href="#__codelineno-70-1"></a>class SubModule(torch.nn.Module):
<a id="__codelineno-70-2" name="__codelineno-70-2" href="#__codelineno-70-2"></a>    def __init__(self):
<a id="__codelineno-70-3" name="__codelineno-70-3" href="#__codelineno-70-3"></a>        super(SubModule, self).__init__()
<a id="__codelineno-70-4" name="__codelineno-70-4" href="#__codelineno-70-4"></a>        self.weight = nn.Parameter(torch.randn(2))
<a id="__codelineno-70-5" name="__codelineno-70-5" href="#__codelineno-70-5"></a>
<a id="__codelineno-70-6" name="__codelineno-70-6" href="#__codelineno-70-6"></a>    def forward(self, input):
<a id="__codelineno-70-7" name="__codelineno-70-7" href="#__codelineno-70-7"></a>        return self.weight + input
<a id="__codelineno-70-8" name="__codelineno-70-8" href="#__codelineno-70-8"></a>
<a id="__codelineno-70-9" name="__codelineno-70-9" href="#__codelineno-70-9"></a>class MyModule(torch.nn.Module):
<a id="__codelineno-70-10" name="__codelineno-70-10" href="#__codelineno-70-10"></a>    __constants__ = [&#39;mods&#39;]
<a id="__codelineno-70-11" name="__codelineno-70-11" href="#__codelineno-70-11"></a>
<a id="__codelineno-70-12" name="__codelineno-70-12" href="#__codelineno-70-12"></a>    def __init__(self):
<a id="__codelineno-70-13" name="__codelineno-70-13" href="#__codelineno-70-13"></a>        super(MyModule, self).__init__()
<a id="__codelineno-70-14" name="__codelineno-70-14" href="#__codelineno-70-14"></a>        self.mods = torch.nn.ModuleList([SubModule() for i in range(10)])
<a id="__codelineno-70-15" name="__codelineno-70-15" href="#__codelineno-70-15"></a>
<a id="__codelineno-70-16" name="__codelineno-70-16" href="#__codelineno-70-16"></a>    def forward(self, v):
<a id="__codelineno-70-17" name="__codelineno-70-17" href="#__codelineno-70-17"></a>        for module in self.mods:
<a id="__codelineno-70-18" name="__codelineno-70-18" href="#__codelineno-70-18"></a>            v = module(v)
<a id="__codelineno-70-19" name="__codelineno-70-19" href="#__codelineno-70-19"></a>        return v
<a id="__codelineno-70-20" name="__codelineno-70-20" href="#__codelineno-70-20"></a>
<a id="__codelineno-70-21" name="__codelineno-70-21" href="#__codelineno-70-21"></a>m = torch.jit.script(MyModule())
</code></pre></div>
<h4 id="_32"><a href="#id50">中断并继续</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-71-1" name="__codelineno-71-1" href="#__codelineno-71-1"></a>for i in range(5):
<a id="__codelineno-71-2" name="__codelineno-71-2" href="#__codelineno-71-2"></a>    if i == 1:
<a id="__codelineno-71-3" name="__codelineno-71-3" href="#__codelineno-71-3"></a>    continue
<a id="__codelineno-71-4" name="__codelineno-71-4" href="#__codelineno-71-4"></a>    if i == 3:
<a id="__codelineno-71-5" name="__codelineno-71-5" href="#__codelineno-71-5"></a>    break
<a id="__codelineno-71-6" name="__codelineno-71-6" href="#__codelineno-71-6"></a>    print(i)
</code></pre></div>
<h4 id="_33"><a href="#id51">返回</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-72-1" name="__codelineno-72-1" href="#__codelineno-72-1"></a>return a, b
</code></pre></div>
<h3 id="_34"><a href="#id52">可变分辨率</a></h3>
<p>TorchScript 支持 Python 的可变分辨率(即作用域）规则的子集。 局部变量的行为与 Python 中的相同，不同之处在于，在通过函数的所有路径上，变量必须具有相同的类型。 如果变量在 if 语句的不同分支上具有不同的类型，则在 if 语句结束后使用它是错误的。</p>
<p>同样，如果沿函数的某些路径仅将_定义为_，则不允许使用该变量。</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-73-1" name="__codelineno-73-1" href="#__codelineno-73-1"></a>@torch.jit.script
<a id="__codelineno-73-2" name="__codelineno-73-2" href="#__codelineno-73-2"></a>def foo(x):
<a id="__codelineno-73-3" name="__codelineno-73-3" href="#__codelineno-73-3"></a>    if x &lt; 0:
<a id="__codelineno-73-4" name="__codelineno-73-4" href="#__codelineno-73-4"></a>        y = 4
<a id="__codelineno-73-5" name="__codelineno-73-5" href="#__codelineno-73-5"></a>    print(y)
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-74-1" name="__codelineno-74-1" href="#__codelineno-74-1"></a>Traceback (most recent call last):
<a id="__codelineno-74-2" name="__codelineno-74-2" href="#__codelineno-74-2"></a>  ...
<a id="__codelineno-74-3" name="__codelineno-74-3" href="#__codelineno-74-3"></a>RuntimeError: ...
<a id="__codelineno-74-4" name="__codelineno-74-4" href="#__codelineno-74-4"></a>
<a id="__codelineno-74-5" name="__codelineno-74-5" href="#__codelineno-74-5"></a>y is not defined in the false branch...
<a id="__codelineno-74-6" name="__codelineno-74-6" href="#__codelineno-74-6"></a>@torch.jit.script...
<a id="__codelineno-74-7" name="__codelineno-74-7" href="#__codelineno-74-7"></a>def foo(x):
<a id="__codelineno-74-8" name="__codelineno-74-8" href="#__codelineno-74-8"></a>    if x &lt; 0:
<a id="__codelineno-74-9" name="__codelineno-74-9" href="#__codelineno-74-9"></a>    ~~~~~~~~~...  &lt;--- HERE
<a id="__codelineno-74-10" name="__codelineno-74-10" href="#__codelineno-74-10"></a>        y = 4
<a id="__codelineno-74-11" name="__codelineno-74-11" href="#__codelineno-74-11"></a>    print(y)
<a id="__codelineno-74-12" name="__codelineno-74-12" href="#__codelineno-74-12"></a>...
</code></pre></div>
<p>定义函数时，会在编译时将非局部变量解析为 Python 值。 然后使用 <a href="#use-of-python-values">Python 值使用</a>中描述的规则将这些值转换为 TorchScript 值。</p>
<h3 id="python"><a href="#id53">使用 Python 值</a></h3>
<p>为了使编写 TorchScript 更加方便，我们允许脚本代码引用周围范围中的 Python 值。 例如，任何时候只要引用<code>torch</code>，当声明函数时，TorchScript 编译器实际上就会将其解析为<code>torch</code> Python 模块。 这些 Python 值不是 TorchScript 的一流部分。 而是在编译时将它们分解为 TorchScript 支持的原始类型。 这取决于编译发生时引用的 Python 值的动态类型。 本节介绍在 TorchScript 中访问 Python 值时使用的规则。</p>
<h4 id="_35"><a href="#id54">功能</a></h4>
<p>TorchScript 可以调用 Python 函数。 当将模型逐步转换为 TorchScript 时，此功能非常有用。 可以将模型逐函数移至 TorchScript，而对 Python 函数的调用保留在原处。 这样，您可以在进行过程中逐步检查模型的正确性。</p>
<hr />
<div class="highlight"><pre><span></span><code><a id="__codelineno-75-1" name="__codelineno-75-1" href="#__codelineno-75-1"></a>torch.jit.ignore(drop=False, **kwargs)¶
</code></pre></div>
<p>该装饰器向编译器指示应忽略函数或方法，而将其保留为 Python 函数。 这使您可以将代码保留在尚未与 TorchScript 兼容的模型中。 具有忽略功能的模型无法导出； 请改用 torch.jit.unused。</p>
<p>示例(在方法上使用<code>@torch.jit.ignore</code>）：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-76-1" name="__codelineno-76-1" href="#__codelineno-76-1"></a>import torch
<a id="__codelineno-76-2" name="__codelineno-76-2" href="#__codelineno-76-2"></a>import torch.nn as nn
<a id="__codelineno-76-3" name="__codelineno-76-3" href="#__codelineno-76-3"></a>
<a id="__codelineno-76-4" name="__codelineno-76-4" href="#__codelineno-76-4"></a>class MyModule(nn.Module):
<a id="__codelineno-76-5" name="__codelineno-76-5" href="#__codelineno-76-5"></a>    @torch.jit.ignore
<a id="__codelineno-76-6" name="__codelineno-76-6" href="#__codelineno-76-6"></a>    def debugger(self, x):
<a id="__codelineno-76-7" name="__codelineno-76-7" href="#__codelineno-76-7"></a>        import pdb
<a id="__codelineno-76-8" name="__codelineno-76-8" href="#__codelineno-76-8"></a>        pdb.set_trace()
<a id="__codelineno-76-9" name="__codelineno-76-9" href="#__codelineno-76-9"></a>
<a id="__codelineno-76-10" name="__codelineno-76-10" href="#__codelineno-76-10"></a>    def forward(self, x):
<a id="__codelineno-76-11" name="__codelineno-76-11" href="#__codelineno-76-11"></a>        x += 10
<a id="__codelineno-76-12" name="__codelineno-76-12" href="#__codelineno-76-12"></a>        # The compiler would normally try to compile `debugger`,
<a id="__codelineno-76-13" name="__codelineno-76-13" href="#__codelineno-76-13"></a>        # but since it is `@ignore`d, it will be left as a call
<a id="__codelineno-76-14" name="__codelineno-76-14" href="#__codelineno-76-14"></a>        # to Python
<a id="__codelineno-76-15" name="__codelineno-76-15" href="#__codelineno-76-15"></a>        self.debugger(x)
<a id="__codelineno-76-16" name="__codelineno-76-16" href="#__codelineno-76-16"></a>        return x
<a id="__codelineno-76-17" name="__codelineno-76-17" href="#__codelineno-76-17"></a>
<a id="__codelineno-76-18" name="__codelineno-76-18" href="#__codelineno-76-18"></a>m = torch.jit.script(MyModule())
<a id="__codelineno-76-19" name="__codelineno-76-19" href="#__codelineno-76-19"></a>
<a id="__codelineno-76-20" name="__codelineno-76-20" href="#__codelineno-76-20"></a># Error! The call `debugger` cannot be saved since it calls into Python
<a id="__codelineno-76-21" name="__codelineno-76-21" href="#__codelineno-76-21"></a>m.save(&quot;m.pt&quot;)
</code></pre></div>
<p>示例(在方法上使用<code>@torch.jit.ignore(drop=True)</code>）：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-77-1" name="__codelineno-77-1" href="#__codelineno-77-1"></a>import torch
<a id="__codelineno-77-2" name="__codelineno-77-2" href="#__codelineno-77-2"></a>import torch.nn as nn
<a id="__codelineno-77-3" name="__codelineno-77-3" href="#__codelineno-77-3"></a>
<a id="__codelineno-77-4" name="__codelineno-77-4" href="#__codelineno-77-4"></a>class MyModule(nn.Module):
<a id="__codelineno-77-5" name="__codelineno-77-5" href="#__codelineno-77-5"></a>    @torch.jit.ignore(drop=True)
<a id="__codelineno-77-6" name="__codelineno-77-6" href="#__codelineno-77-6"></a>    def training_method(self, x):
<a id="__codelineno-77-7" name="__codelineno-77-7" href="#__codelineno-77-7"></a>        import pdb
<a id="__codelineno-77-8" name="__codelineno-77-8" href="#__codelineno-77-8"></a>        pdb.set_trace()
<a id="__codelineno-77-9" name="__codelineno-77-9" href="#__codelineno-77-9"></a>
<a id="__codelineno-77-10" name="__codelineno-77-10" href="#__codelineno-77-10"></a>    def forward(self, x):
<a id="__codelineno-77-11" name="__codelineno-77-11" href="#__codelineno-77-11"></a>        if self.training:
<a id="__codelineno-77-12" name="__codelineno-77-12" href="#__codelineno-77-12"></a>            self.training_method(x)
<a id="__codelineno-77-13" name="__codelineno-77-13" href="#__codelineno-77-13"></a>        return x
<a id="__codelineno-77-14" name="__codelineno-77-14" href="#__codelineno-77-14"></a>
<a id="__codelineno-77-15" name="__codelineno-77-15" href="#__codelineno-77-15"></a>m = torch.jit.script(MyModule())
<a id="__codelineno-77-16" name="__codelineno-77-16" href="#__codelineno-77-16"></a>
<a id="__codelineno-77-17" name="__codelineno-77-17" href="#__codelineno-77-17"></a># This is OK since `training_method` is not saved, the call is replaced
<a id="__codelineno-77-18" name="__codelineno-77-18" href="#__codelineno-77-18"></a># with a `raise`.
<a id="__codelineno-77-19" name="__codelineno-77-19" href="#__codelineno-77-19"></a>m.save(&quot;m.pt&quot;)
</code></pre></div>
<hr />
<div class="highlight"><pre><span></span><code><a id="__codelineno-78-1" name="__codelineno-78-1" href="#__codelineno-78-1"></a>torch.jit.unused(fn)¶
</code></pre></div>
<p>此装饰器向编译器指示应忽略函数或方法，并用引发异常的方法代替。 这样，您就可以在尚不兼容 TorchScript 的模型中保留代码，并仍然可以导出模型。</p>
<blockquote>
<p>示例(在方法上使用<code>@torch.jit.unused</code>）：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-79-1" name="__codelineno-79-1" href="#__codelineno-79-1"></a>import torch
<a id="__codelineno-79-2" name="__codelineno-79-2" href="#__codelineno-79-2"></a>import torch.nn as nn
<a id="__codelineno-79-3" name="__codelineno-79-3" href="#__codelineno-79-3"></a>
<a id="__codelineno-79-4" name="__codelineno-79-4" href="#__codelineno-79-4"></a>class MyModule(nn.Module):
<a id="__codelineno-79-5" name="__codelineno-79-5" href="#__codelineno-79-5"></a>    def __init__(self, use_memory_efficent):
<a id="__codelineno-79-6" name="__codelineno-79-6" href="#__codelineno-79-6"></a>        super(MyModule, self).__init__()
<a id="__codelineno-79-7" name="__codelineno-79-7" href="#__codelineno-79-7"></a>        self.use_memory_efficent = use_memory_efficent
<a id="__codelineno-79-8" name="__codelineno-79-8" href="#__codelineno-79-8"></a>
<a id="__codelineno-79-9" name="__codelineno-79-9" href="#__codelineno-79-9"></a>    @torch.jit.unused
<a id="__codelineno-79-10" name="__codelineno-79-10" href="#__codelineno-79-10"></a>    def memory_efficient(self, x):
<a id="__codelineno-79-11" name="__codelineno-79-11" href="#__codelineno-79-11"></a>        import pdb
<a id="__codelineno-79-12" name="__codelineno-79-12" href="#__codelineno-79-12"></a>        pdb.set_trace()
<a id="__codelineno-79-13" name="__codelineno-79-13" href="#__codelineno-79-13"></a>        return x + 10
<a id="__codelineno-79-14" name="__codelineno-79-14" href="#__codelineno-79-14"></a>
<a id="__codelineno-79-15" name="__codelineno-79-15" href="#__codelineno-79-15"></a>    def forward(self, x):
<a id="__codelineno-79-16" name="__codelineno-79-16" href="#__codelineno-79-16"></a>        # Use not-yet-scriptable memory efficient mode
<a id="__codelineno-79-17" name="__codelineno-79-17" href="#__codelineno-79-17"></a>        if self.use_memory_efficient:
<a id="__codelineno-79-18" name="__codelineno-79-18" href="#__codelineno-79-18"></a>            return self.memory_efficient(x)
<a id="__codelineno-79-19" name="__codelineno-79-19" href="#__codelineno-79-19"></a>        else:
<a id="__codelineno-79-20" name="__codelineno-79-20" href="#__codelineno-79-20"></a>            return x + 10
<a id="__codelineno-79-21" name="__codelineno-79-21" href="#__codelineno-79-21"></a>
<a id="__codelineno-79-22" name="__codelineno-79-22" href="#__codelineno-79-22"></a>m = torch.jit.script(MyModule(use_memory_efficent=False))
<a id="__codelineno-79-23" name="__codelineno-79-23" href="#__codelineno-79-23"></a>m.save(&quot;m.pt&quot;)
<a id="__codelineno-79-24" name="__codelineno-79-24" href="#__codelineno-79-24"></a>
<a id="__codelineno-79-25" name="__codelineno-79-25" href="#__codelineno-79-25"></a>m = torch.jit.script(MyModule(use_memory_efficient=True))
<a id="__codelineno-79-26" name="__codelineno-79-26" href="#__codelineno-79-26"></a># exception raised
<a id="__codelineno-79-27" name="__codelineno-79-27" href="#__codelineno-79-27"></a>m(torch.rand(100))
</code></pre></div>
</blockquote>
<hr />
<div class="highlight"><pre><span></span><code><a id="__codelineno-80-1" name="__codelineno-80-1" href="#__codelineno-80-1"></a>torch.jit.is_scripting()¶
</code></pre></div>
<p>在编译时返回 True 的函数，否则返回 False 的函数。 这对于使用@unused 装饰器尤其有用，可以将尚不兼容 TorchScript 的代码保留在模型中。 .. testcode：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-81-1" name="__codelineno-81-1" href="#__codelineno-81-1"></a>import torch
<a id="__codelineno-81-2" name="__codelineno-81-2" href="#__codelineno-81-2"></a>
<a id="__codelineno-81-3" name="__codelineno-81-3" href="#__codelineno-81-3"></a>@torch.jit.unused
<a id="__codelineno-81-4" name="__codelineno-81-4" href="#__codelineno-81-4"></a>def unsupported_linear_op(x):
<a id="__codelineno-81-5" name="__codelineno-81-5" href="#__codelineno-81-5"></a>    return x
<a id="__codelineno-81-6" name="__codelineno-81-6" href="#__codelineno-81-6"></a>
<a id="__codelineno-81-7" name="__codelineno-81-7" href="#__codelineno-81-7"></a>def linear(x):
<a id="__codelineno-81-8" name="__codelineno-81-8" href="#__codelineno-81-8"></a>   if not torch.jit.is_scripting():
<a id="__codelineno-81-9" name="__codelineno-81-9" href="#__codelineno-81-9"></a>      return torch.linear(x)
<a id="__codelineno-81-10" name="__codelineno-81-10" href="#__codelineno-81-10"></a>   else:
<a id="__codelineno-81-11" name="__codelineno-81-11" href="#__codelineno-81-11"></a>      return unsupported_linear_op(x)
</code></pre></div>
<h4 id="python_1"><a href="#id55">Python 模块上的属性查找</a></h4>
<p>TorchScript 可以在模块上查找属性。 <a href="#builtin-functions">像<code>torch.add</code>这样的内置功能</a>可以通过这种方式访问​​。 这使 TorchScript 可以调用其他模块中定义的函数。</p>
<h4 id="python_2"><a href="#id56">Python 定义的常量</a></h4>
<p>TorchScript 还提供了一种使用 Python 中定义的常量的方法。 这些可用于将超参数硬编码到函数中，或定义通用常量。 有两种指定 Python 值应视为常量的方式。</p>
<ol>
<li>查找为模块属性的值假定为常量：</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-82-1" name="__codelineno-82-1" href="#__codelineno-82-1"></a>import math
<a id="__codelineno-82-2" name="__codelineno-82-2" href="#__codelineno-82-2"></a>import torch
<a id="__codelineno-82-3" name="__codelineno-82-3" href="#__codelineno-82-3"></a>
<a id="__codelineno-82-4" name="__codelineno-82-4" href="#__codelineno-82-4"></a>@torch.jit.script
<a id="__codelineno-82-5" name="__codelineno-82-5" href="#__codelineno-82-5"></a>def fn():
<a id="__codelineno-82-6" name="__codelineno-82-6" href="#__codelineno-82-6"></a>    return math.pi
</code></pre></div>
<ol>
<li>可以通过使用<code>Final[T]</code>注释 ScriptModule 的属性来将其标记为常量。</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-83-1" name="__codelineno-83-1" href="#__codelineno-83-1"></a>import torch
<a id="__codelineno-83-2" name="__codelineno-83-2" href="#__codelineno-83-2"></a>import torch.nn as nn
<a id="__codelineno-83-3" name="__codelineno-83-3" href="#__codelineno-83-3"></a>
<a id="__codelineno-83-4" name="__codelineno-83-4" href="#__codelineno-83-4"></a>class Foo(nn.Module):
<a id="__codelineno-83-5" name="__codelineno-83-5" href="#__codelineno-83-5"></a>    # `Final` from the `typing_extensions` module can also be used
<a id="__codelineno-83-6" name="__codelineno-83-6" href="#__codelineno-83-6"></a>    a : torch.jit.Final[int]
<a id="__codelineno-83-7" name="__codelineno-83-7" href="#__codelineno-83-7"></a>
<a id="__codelineno-83-8" name="__codelineno-83-8" href="#__codelineno-83-8"></a>    def __init__(self):
<a id="__codelineno-83-9" name="__codelineno-83-9" href="#__codelineno-83-9"></a>        super(Foo, self).__init__()
<a id="__codelineno-83-10" name="__codelineno-83-10" href="#__codelineno-83-10"></a>        self.a = 1 + 4
<a id="__codelineno-83-11" name="__codelineno-83-11" href="#__codelineno-83-11"></a>
<a id="__codelineno-83-12" name="__codelineno-83-12" href="#__codelineno-83-12"></a>    def forward(self, input):
<a id="__codelineno-83-13" name="__codelineno-83-13" href="#__codelineno-83-13"></a>        return self.a + input
<a id="__codelineno-83-14" name="__codelineno-83-14" href="#__codelineno-83-14"></a>
<a id="__codelineno-83-15" name="__codelineno-83-15" href="#__codelineno-83-15"></a>f = torch.jit.script(Foo())
</code></pre></div>
<p>支持的常量 Python 类型是</p>
<ul>
<li>
<p><code>int</code></p>
</li>
<li>
<p><code>float</code></p>
</li>
<li>
<p><code>bool</code></p>
</li>
<li>
<p><code>torch.device</code></p>
</li>
<li>
<p><code>torch.layout</code></p>
</li>
<li>
<p><code>torch.dtype</code></p>
</li>
<li>
<p>包含受支持类型的元组</p>
</li>
<li>
<p><code>torch.nn.ModuleList</code>可以在 TorchScript for 循环中使用</p>
</li>
</ul>
<p>Note</p>
<p>如果您使用的是 Python 2，则可以通过将属性名称添加到类的<code>__constants__</code>属性中来将其标记为常量：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-84-1" name="__codelineno-84-1" href="#__codelineno-84-1"></a>import torch
<a id="__codelineno-84-2" name="__codelineno-84-2" href="#__codelineno-84-2"></a>import torch.nn as nn
<a id="__codelineno-84-3" name="__codelineno-84-3" href="#__codelineno-84-3"></a>
<a id="__codelineno-84-4" name="__codelineno-84-4" href="#__codelineno-84-4"></a>class Foo(nn.Module):
<a id="__codelineno-84-5" name="__codelineno-84-5" href="#__codelineno-84-5"></a>    __constants__ = [&#39;a&#39;]
<a id="__codelineno-84-6" name="__codelineno-84-6" href="#__codelineno-84-6"></a>
<a id="__codelineno-84-7" name="__codelineno-84-7" href="#__codelineno-84-7"></a>    def __init__(self):
<a id="__codelineno-84-8" name="__codelineno-84-8" href="#__codelineno-84-8"></a>        super(Foo, self).__init__()
<a id="__codelineno-84-9" name="__codelineno-84-9" href="#__codelineno-84-9"></a>        self.a = 1 + 4
<a id="__codelineno-84-10" name="__codelineno-84-10" href="#__codelineno-84-10"></a>
<a id="__codelineno-84-11" name="__codelineno-84-11" href="#__codelineno-84-11"></a>    def forward(self, input):
<a id="__codelineno-84-12" name="__codelineno-84-12" href="#__codelineno-84-12"></a>        return self.a + input
<a id="__codelineno-84-13" name="__codelineno-84-13" href="#__codelineno-84-13"></a>
<a id="__codelineno-84-14" name="__codelineno-84-14" href="#__codelineno-84-14"></a>f = torch.jit.script(Foo())
</code></pre></div>
<h4 id="_36"><a href="#id57">模块属性</a></h4>
<p><code>torch.nn.Parameter</code>包装器和<code>register_buffer</code>可用于将张量分配给模块。 如果可以推断出其他类型的值，则分配给已编译模块的其他值将添加到已编译模块中。 TorchScript 中可用的所有<a href="#types">类型</a>都可以用作模块属性。 张量属性在语义上与缓冲区相同。 空列表和字典的类型以及<code>None</code>值无法推断，必须通过 <a href="https://www.python.org/dev/peps/pep-0526/#class-and-instance-variable-annotations">PEP 526 样式</a>类注释指定。 如果无法推断出类型并且未对其进行显式注释，则不会将其作为属性添加到结果 <a href="#torch.jit.ScriptModule" title="torch.jit.ScriptModule"><code>ScriptModule</code></a> 中。</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-85-1" name="__codelineno-85-1" href="#__codelineno-85-1"></a>from typing import List, Dict
<a id="__codelineno-85-2" name="__codelineno-85-2" href="#__codelineno-85-2"></a>
<a id="__codelineno-85-3" name="__codelineno-85-3" href="#__codelineno-85-3"></a>class Foo(nn.Module):
<a id="__codelineno-85-4" name="__codelineno-85-4" href="#__codelineno-85-4"></a>    # `words` is initialized as an empty list, so its type must be specified
<a id="__codelineno-85-5" name="__codelineno-85-5" href="#__codelineno-85-5"></a>    words: List[str]
<a id="__codelineno-85-6" name="__codelineno-85-6" href="#__codelineno-85-6"></a>
<a id="__codelineno-85-7" name="__codelineno-85-7" href="#__codelineno-85-7"></a>    # The type could potentially be inferred if `a_dict` (below) was not
<a id="__codelineno-85-8" name="__codelineno-85-8" href="#__codelineno-85-8"></a>    # empty, but this annotation ensures `some_dict` will be made into the
<a id="__codelineno-85-9" name="__codelineno-85-9" href="#__codelineno-85-9"></a>    # proper type
<a id="__codelineno-85-10" name="__codelineno-85-10" href="#__codelineno-85-10"></a>    some_dict: Dict[str, int]
<a id="__codelineno-85-11" name="__codelineno-85-11" href="#__codelineno-85-11"></a>
<a id="__codelineno-85-12" name="__codelineno-85-12" href="#__codelineno-85-12"></a>    def __init__(self, a_dict):
<a id="__codelineno-85-13" name="__codelineno-85-13" href="#__codelineno-85-13"></a>        super(Foo, self).__init__()
<a id="__codelineno-85-14" name="__codelineno-85-14" href="#__codelineno-85-14"></a>        self.words = []
<a id="__codelineno-85-15" name="__codelineno-85-15" href="#__codelineno-85-15"></a>        self.some_dict = a_dict
<a id="__codelineno-85-16" name="__codelineno-85-16" href="#__codelineno-85-16"></a>
<a id="__codelineno-85-17" name="__codelineno-85-17" href="#__codelineno-85-17"></a>        # `int`s can be inferred
<a id="__codelineno-85-18" name="__codelineno-85-18" href="#__codelineno-85-18"></a>        self.my_int = 10
<a id="__codelineno-85-19" name="__codelineno-85-19" href="#__codelineno-85-19"></a>
<a id="__codelineno-85-20" name="__codelineno-85-20" href="#__codelineno-85-20"></a>    def forward(self, input):
<a id="__codelineno-85-21" name="__codelineno-85-21" href="#__codelineno-85-21"></a>        # type: (str) -&gt; int
<a id="__codelineno-85-22" name="__codelineno-85-22" href="#__codelineno-85-22"></a>        self.words.append(input)
<a id="__codelineno-85-23" name="__codelineno-85-23" href="#__codelineno-85-23"></a>        return self.some_dict[input] + self.my_int
<a id="__codelineno-85-24" name="__codelineno-85-24" href="#__codelineno-85-24"></a>
<a id="__codelineno-85-25" name="__codelineno-85-25" href="#__codelineno-85-25"></a>f = torch.jit.script(Foo({&#39;hi&#39;: 2}))
</code></pre></div>
<p>Note</p>
<p>如果您使用的是 Python 2，则可以通过将属性的类型添加到<code>__annotations__</code>类属性中作为属性名字典来标记属性的类型</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-86-1" name="__codelineno-86-1" href="#__codelineno-86-1"></a>from typing import List, Dict
<a id="__codelineno-86-2" name="__codelineno-86-2" href="#__codelineno-86-2"></a>
<a id="__codelineno-86-3" name="__codelineno-86-3" href="#__codelineno-86-3"></a>class Foo(nn.Module):
<a id="__codelineno-86-4" name="__codelineno-86-4" href="#__codelineno-86-4"></a>    __annotations__ = {&#39;words&#39;: List[str], &#39;some_dict&#39;: Dict[str, int]}
<a id="__codelineno-86-5" name="__codelineno-86-5" href="#__codelineno-86-5"></a>
<a id="__codelineno-86-6" name="__codelineno-86-6" href="#__codelineno-86-6"></a>    def __init__(self, a_dict):
<a id="__codelineno-86-7" name="__codelineno-86-7" href="#__codelineno-86-7"></a>        super(Foo, self).__init__()
<a id="__codelineno-86-8" name="__codelineno-86-8" href="#__codelineno-86-8"></a>        self.words = []
<a id="__codelineno-86-9" name="__codelineno-86-9" href="#__codelineno-86-9"></a>        self.some_dict = a_dict
<a id="__codelineno-86-10" name="__codelineno-86-10" href="#__codelineno-86-10"></a>
<a id="__codelineno-86-11" name="__codelineno-86-11" href="#__codelineno-86-11"></a>        # `int`s can be inferred
<a id="__codelineno-86-12" name="__codelineno-86-12" href="#__codelineno-86-12"></a>        self.my_int = 10
<a id="__codelineno-86-13" name="__codelineno-86-13" href="#__codelineno-86-13"></a>
<a id="__codelineno-86-14" name="__codelineno-86-14" href="#__codelineno-86-14"></a>    def forward(self, input):
<a id="__codelineno-86-15" name="__codelineno-86-15" href="#__codelineno-86-15"></a>        # type: (str) -&gt; int
<a id="__codelineno-86-16" name="__codelineno-86-16" href="#__codelineno-86-16"></a>        self.words.append(input)
<a id="__codelineno-86-17" name="__codelineno-86-17" href="#__codelineno-86-17"></a>        return self.some_dict[input] + self.my_int
<a id="__codelineno-86-18" name="__codelineno-86-18" href="#__codelineno-86-18"></a>
<a id="__codelineno-86-19" name="__codelineno-86-19" href="#__codelineno-86-19"></a>f = torch.jit.script(Foo({&#39;hi&#39;: 2}))
</code></pre></div>
<h3 id="_37"><a href="#id58">调试</a></h3>
<h4 id="jit"><a href="#id59">禁用用于调试的 JIT</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-87-1" name="__codelineno-87-1" href="#__codelineno-87-1"></a>PYTORCH_JIT¶
</code></pre></div>
<p>设置环境变量<code>PYTORCH_JIT=0</code>将禁用所有脚本和跟踪注释。 如果您的 TorchScript 模型之一存在难以调试的错误，则可以使用此标志来强制一切都使用本机 Python 运行。 由于此标志禁用了 TorchScript(脚本编写和跟踪），因此可以使用<code>pdb</code>之类的工具来调试模型代码。</p>
<p>给定一个示例脚本：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-88-1" name="__codelineno-88-1" href="#__codelineno-88-1"></a>@torch.jit.script
<a id="__codelineno-88-2" name="__codelineno-88-2" href="#__codelineno-88-2"></a>def scripted_fn(x : torch.Tensor):
<a id="__codelineno-88-3" name="__codelineno-88-3" href="#__codelineno-88-3"></a>    for i in range(12):
<a id="__codelineno-88-4" name="__codelineno-88-4" href="#__codelineno-88-4"></a>        x = x + x
<a id="__codelineno-88-5" name="__codelineno-88-5" href="#__codelineno-88-5"></a>    return x
<a id="__codelineno-88-6" name="__codelineno-88-6" href="#__codelineno-88-6"></a>
<a id="__codelineno-88-7" name="__codelineno-88-7" href="#__codelineno-88-7"></a>def fn(x):
<a id="__codelineno-88-8" name="__codelineno-88-8" href="#__codelineno-88-8"></a>    x = torch.neg(x)
<a id="__codelineno-88-9" name="__codelineno-88-9" href="#__codelineno-88-9"></a>    import pdb; pdb.set_trace()
<a id="__codelineno-88-10" name="__codelineno-88-10" href="#__codelineno-88-10"></a>    return scripted_fn(x)
<a id="__codelineno-88-11" name="__codelineno-88-11" href="#__codelineno-88-11"></a>
<a id="__codelineno-88-12" name="__codelineno-88-12" href="#__codelineno-88-12"></a>traced_fn = torch.jit.trace(fn, (torch.rand(4, 5),))
<a id="__codelineno-88-13" name="__codelineno-88-13" href="#__codelineno-88-13"></a>traced_fn(torch.rand(3, 4))
</code></pre></div>
<p>除调用<a href="#torch.jit.script" title="torch.jit.script">，<code>@torch.jit.script</code>，</a>函数外，使用<code>pdb</code>调试此脚本是可行的。 我们可以全局禁用 JIT，以便我们可以将 <a href="#torch.jit.script" title="torch.jit.script"><code>@torch.jit.script</code></a> 函数作为普通的 Python 函数调用，而不进行编译。 如果上述脚本称为<code>disable_jit_example.py</code>，我们可以这样调用它：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-89-1" name="__codelineno-89-1" href="#__codelineno-89-1"></a>$ PYTORCH_JIT=0 python disable_jit_example.py
</code></pre></div>
<p>并且我们将能够像普通的 Python 函数一样进入 <a href="#torch.jit.script" title="torch.jit.script"><code>@torch.jit.script</code></a> 函数。 要为特定功能禁用 TorchScript 编译器，请参见 <a href="#torch.jit.ignore" title="torch.jit.ignore"><code>@torch.jit.ignore</code></a> 。</p>
<h4 id="_38"><a href="#id60">检查码</a></h4>
<p>TorchScript 为所有 <a href="#torch.jit.ScriptModule" title="torch.jit.ScriptModule"><code>ScriptModule</code></a> 实例提供了代码漂亮的打印机。 这个漂亮的打印机可以将脚本方法的代码解释为有效的 Python 语法。 例如：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-90-1" name="__codelineno-90-1" href="#__codelineno-90-1"></a>@torch.jit.script
<a id="__codelineno-90-2" name="__codelineno-90-2" href="#__codelineno-90-2"></a>def foo(len):
<a id="__codelineno-90-3" name="__codelineno-90-3" href="#__codelineno-90-3"></a>    # type: (int) -&gt; torch.Tensor
<a id="__codelineno-90-4" name="__codelineno-90-4" href="#__codelineno-90-4"></a>    rv = torch.zeros(3, 4)
<a id="__codelineno-90-5" name="__codelineno-90-5" href="#__codelineno-90-5"></a>    for i in range(len):
<a id="__codelineno-90-6" name="__codelineno-90-6" href="#__codelineno-90-6"></a>        if i &lt; 10:
<a id="__codelineno-90-7" name="__codelineno-90-7" href="#__codelineno-90-7"></a>            rv = rv - 1.0
<a id="__codelineno-90-8" name="__codelineno-90-8" href="#__codelineno-90-8"></a>        else:
<a id="__codelineno-90-9" name="__codelineno-90-9" href="#__codelineno-90-9"></a>            rv = rv + 1.0
<a id="__codelineno-90-10" name="__codelineno-90-10" href="#__codelineno-90-10"></a>    return rv
<a id="__codelineno-90-11" name="__codelineno-90-11" href="#__codelineno-90-11"></a>
<a id="__codelineno-90-12" name="__codelineno-90-12" href="#__codelineno-90-12"></a>print(foo.code)
</code></pre></div>
<p>具有单个<code>forward</code>方法的 <a href="#torch.jit.ScriptModule" title="torch.jit.ScriptModule"><code>ScriptModule</code></a> 将具有属性<code>code</code>，您可以使用该属性检查 <a href="#torch.jit.ScriptModule" title="torch.jit.ScriptModule"><code>ScriptModule</code></a> 的代码。 如果 <a href="#torch.jit.ScriptModule" title="torch.jit.ScriptModule"><code>ScriptModule</code></a> 具有多个方法，则需要在方法本身而非模块上访问<code>.code</code>。 我们可以通过访问<code>.foo.code</code>在 ScriptModule 上检查名为<code>foo</code>的方法的代码。 上面的示例产生以下输出：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-91-1" name="__codelineno-91-1" href="#__codelineno-91-1"></a>def foo(len: int) -&gt; Tensor:
<a id="__codelineno-91-2" name="__codelineno-91-2" href="#__codelineno-91-2"></a>    rv = torch.zeros([3, 4], dtype=None, layout=None, device=None, pin_memory=None)
<a id="__codelineno-91-3" name="__codelineno-91-3" href="#__codelineno-91-3"></a>    rv0 = rv
<a id="__codelineno-91-4" name="__codelineno-91-4" href="#__codelineno-91-4"></a>    for i in range(len):
<a id="__codelineno-91-5" name="__codelineno-91-5" href="#__codelineno-91-5"></a>        if torch.lt(i, 10):
<a id="__codelineno-91-6" name="__codelineno-91-6" href="#__codelineno-91-6"></a>            rv1 = torch.sub(rv0, 1., 1)
<a id="__codelineno-91-7" name="__codelineno-91-7" href="#__codelineno-91-7"></a>        else:
<a id="__codelineno-91-8" name="__codelineno-91-8" href="#__codelineno-91-8"></a>            rv1 = torch.add(rv0, 1., 1)
<a id="__codelineno-91-9" name="__codelineno-91-9" href="#__codelineno-91-9"></a>        rv0 = rv1
<a id="__codelineno-91-10" name="__codelineno-91-10" href="#__codelineno-91-10"></a>    return rv0
</code></pre></div>
<p>这是 TorchScript 对<code>forward</code>方法的代码的编译。 您可以使用它来确保 TorchScript(跟踪或脚本）正确捕获了模型代码。</p>
<h4 id="_39"><a href="#id61">解释图</a></h4>
<p>TorchScript 还以 IR 图的形式在比代码漂亮打印机更低的层次上进行表示。</p>
<p>TorchScript 使用静态单分配(SSA）中间表示(IR）表示计算。 这种格式的指令由 ATen(PyTorch 的 C ++后端）运算符和其他原始运算符组成，包括用于循环和条件的控制流运算符。 举个例子：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-92-1" name="__codelineno-92-1" href="#__codelineno-92-1"></a>@torch.jit.script
<a id="__codelineno-92-2" name="__codelineno-92-2" href="#__codelineno-92-2"></a>def foo(len):
<a id="__codelineno-92-3" name="__codelineno-92-3" href="#__codelineno-92-3"></a>    # type: (int) -&gt; torch.Tensor
<a id="__codelineno-92-4" name="__codelineno-92-4" href="#__codelineno-92-4"></a>    rv = torch.zeros(3, 4)
<a id="__codelineno-92-5" name="__codelineno-92-5" href="#__codelineno-92-5"></a>    for i in range(len):
<a id="__codelineno-92-6" name="__codelineno-92-6" href="#__codelineno-92-6"></a>        if i &lt; 10:
<a id="__codelineno-92-7" name="__codelineno-92-7" href="#__codelineno-92-7"></a>            rv = rv - 1.0
<a id="__codelineno-92-8" name="__codelineno-92-8" href="#__codelineno-92-8"></a>        else:
<a id="__codelineno-92-9" name="__codelineno-92-9" href="#__codelineno-92-9"></a>            rv = rv + 1.0
<a id="__codelineno-92-10" name="__codelineno-92-10" href="#__codelineno-92-10"></a>    return rv
<a id="__codelineno-92-11" name="__codelineno-92-11" href="#__codelineno-92-11"></a>
<a id="__codelineno-92-12" name="__codelineno-92-12" href="#__codelineno-92-12"></a>print(foo.graph)
</code></pre></div>
<p><code>graph</code>遵循<a href="#inspecting-code">检查代码</a>部分中关于<code>forward</code>方法查找所述的相同规则。</p>
<p>上面的示例脚本生成图形：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-93-1" name="__codelineno-93-1" href="#__codelineno-93-1"></a>graph(%len.1 : int):
<a id="__codelineno-93-2" name="__codelineno-93-2" href="#__codelineno-93-2"></a>  %24 : int = prim::Constant[value=1]()
<a id="__codelineno-93-3" name="__codelineno-93-3" href="#__codelineno-93-3"></a>  %17 : bool = prim::Constant[value=1]() # test.py:10:5
<a id="__codelineno-93-4" name="__codelineno-93-4" href="#__codelineno-93-4"></a>  %12 : bool? = prim::Constant()
<a id="__codelineno-93-5" name="__codelineno-93-5" href="#__codelineno-93-5"></a>  %10 : Device? = prim::Constant()
<a id="__codelineno-93-6" name="__codelineno-93-6" href="#__codelineno-93-6"></a>  %6 : int? = prim::Constant()
<a id="__codelineno-93-7" name="__codelineno-93-7" href="#__codelineno-93-7"></a>  %1 : int = prim::Constant[value=3]() # test.py:9:22
<a id="__codelineno-93-8" name="__codelineno-93-8" href="#__codelineno-93-8"></a>  %2 : int = prim::Constant[value=4]() # test.py:9:25
<a id="__codelineno-93-9" name="__codelineno-93-9" href="#__codelineno-93-9"></a>  %20 : int = prim::Constant[value=10]() # test.py:11:16
<a id="__codelineno-93-10" name="__codelineno-93-10" href="#__codelineno-93-10"></a>  %23 : float = prim::Constant[value=1]() # test.py:12:23
<a id="__codelineno-93-11" name="__codelineno-93-11" href="#__codelineno-93-11"></a>  %4 : int[] = prim::ListConstruct(%1, %2)
<a id="__codelineno-93-12" name="__codelineno-93-12" href="#__codelineno-93-12"></a>  %rv.1 : Tensor = aten::zeros(%4, %6, %6, %10, %12) # test.py:9:10
<a id="__codelineno-93-13" name="__codelineno-93-13" href="#__codelineno-93-13"></a>  %rv : Tensor = prim::Loop(%len.1, %17, %rv.1) # test.py:10:5
<a id="__codelineno-93-14" name="__codelineno-93-14" href="#__codelineno-93-14"></a>    block0(%i.1 : int, %rv.14 : Tensor):
<a id="__codelineno-93-15" name="__codelineno-93-15" href="#__codelineno-93-15"></a>      %21 : bool = aten::lt(%i.1, %20) # test.py:11:12
<a id="__codelineno-93-16" name="__codelineno-93-16" href="#__codelineno-93-16"></a>      %rv.13 : Tensor = prim::If(%21) # test.py:11:9
<a id="__codelineno-93-17" name="__codelineno-93-17" href="#__codelineno-93-17"></a>        block0():
<a id="__codelineno-93-18" name="__codelineno-93-18" href="#__codelineno-93-18"></a>          %rv.3 : Tensor = aten::sub(%rv.14, %23, %24) # test.py:12:18
<a id="__codelineno-93-19" name="__codelineno-93-19" href="#__codelineno-93-19"></a>          -&gt; (%rv.3)
<a id="__codelineno-93-20" name="__codelineno-93-20" href="#__codelineno-93-20"></a>        block1():
<a id="__codelineno-93-21" name="__codelineno-93-21" href="#__codelineno-93-21"></a>          %rv.6 : Tensor = aten::add(%rv.14, %23, %24) # test.py:14:18
<a id="__codelineno-93-22" name="__codelineno-93-22" href="#__codelineno-93-22"></a>          -&gt; (%rv.6)
<a id="__codelineno-93-23" name="__codelineno-93-23" href="#__codelineno-93-23"></a>      -&gt; (%17, %rv.13)
<a id="__codelineno-93-24" name="__codelineno-93-24" href="#__codelineno-93-24"></a>  return (%rv)
</code></pre></div>
<p>以指令<code>%rv.1 : Tensor = aten::zeros(%4, %6, %6, %10, %12) # test.py:9:10</code>为例。</p>
<ul>
<li>
<p><code>%rv.1 : Tensor</code>表示我们将输出分配给一个名为<code>rv.1</code>的(唯一）值，该值是<code>Tensor</code>类型，并且我们不知道其具体形状。</p>
</li>
<li>
<p><code>aten::zeros</code>是运算符(与<code>torch.zeros</code>等效），输入列表<code>(%4, %6, %6, %10, %12)</code>指定范围中的哪些值应作为输入传递。 可以在<a href="#builtin-functions">内置函数</a>中找到<code>aten::zeros</code>等内置函数的模式。</p>
</li>
<li>
<p><code># test.py:9:10</code>是生成此指令的原始源文件中的位置。 在这种情况下，它是第 9 行和字符 10 处名为 &lt;cite&gt;test.py&lt;/cite&gt; 的文件。</p>
</li>
</ul>
<p>请注意，运算符也可以具有关联的<code>blocks</code>，即<code>prim::Loop</code>和<code>prim::If</code>运算符。 在图形打印输出中，这些运算符被格式化以反映其等效的源代码形式，以方便进行调试。</p>
<p>如下图所示，可以检查图表以确认 <a href="#torch.jit.ScriptModule" title="torch.jit.ScriptModule"><code>ScriptModule</code></a> 所描述的计算是正确的，无论是自动方式还是手动方式。</p>
<h4 id="_40"><a href="#id62">追踪案例</a></h4>
<p>在某些极端情况下，给定 Python 函数/模块的跟踪不会代表基础代码。 这些情况可以包括：</p>
<ul>
<li>
<p>跟踪取决于输入的控制流(例如张量形状）</p>
</li>
<li>
<p>跟踪张量视图的就地操作(例如，分配左侧的索引）</p>
</li>
</ul>
<p>请注意，这些情况实际上将来可能是可追溯的。</p>
<h4 id="_41"><a href="#id63">自动跟踪检查</a></h4>
<p>自动捕获跟踪中许多错误的一种方法是使用<code>torch.jit.trace()</code> API 上的<code>check_inputs</code>。 <code>check_inputs</code>提取输入元组的列表，这些列表将用于重新追踪计算并验证结果。 例如：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-94-1" name="__codelineno-94-1" href="#__codelineno-94-1"></a>def loop_in_traced_fn(x):
<a id="__codelineno-94-2" name="__codelineno-94-2" href="#__codelineno-94-2"></a>    result = x[0]
<a id="__codelineno-94-3" name="__codelineno-94-3" href="#__codelineno-94-3"></a>    for i in range(x.size(0)):
<a id="__codelineno-94-4" name="__codelineno-94-4" href="#__codelineno-94-4"></a>        result = result * x[i]
<a id="__codelineno-94-5" name="__codelineno-94-5" href="#__codelineno-94-5"></a>    return result
<a id="__codelineno-94-6" name="__codelineno-94-6" href="#__codelineno-94-6"></a>
<a id="__codelineno-94-7" name="__codelineno-94-7" href="#__codelineno-94-7"></a>inputs = (torch.rand(3, 4, 5),)
<a id="__codelineno-94-8" name="__codelineno-94-8" href="#__codelineno-94-8"></a>check_inputs = [(torch.rand(4, 5, 6),), (torch.rand(2, 3, 4),)]
<a id="__codelineno-94-9" name="__codelineno-94-9" href="#__codelineno-94-9"></a>
<a id="__codelineno-94-10" name="__codelineno-94-10" href="#__codelineno-94-10"></a>traced = torch.jit.trace(loop_in_traced_fn, inputs, check_inputs=check_inputs)
</code></pre></div>
<p>为我们提供以下诊断信息：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-95-1" name="__codelineno-95-1" href="#__codelineno-95-1"></a>ERROR: Graphs differed across invocations!
<a id="__codelineno-95-2" name="__codelineno-95-2" href="#__codelineno-95-2"></a>Graph diff:
<a id="__codelineno-95-3" name="__codelineno-95-3" href="#__codelineno-95-3"></a>
<a id="__codelineno-95-4" name="__codelineno-95-4" href="#__codelineno-95-4"></a>            graph(%x : Tensor) {
<a id="__codelineno-95-5" name="__codelineno-95-5" href="#__codelineno-95-5"></a>            %1 : int = prim::Constant[value=0]()
<a id="__codelineno-95-6" name="__codelineno-95-6" href="#__codelineno-95-6"></a>            %2 : int = prim::Constant[value=0]()
<a id="__codelineno-95-7" name="__codelineno-95-7" href="#__codelineno-95-7"></a>            %result.1 : Tensor = aten::select(%x, %1, %2)
<a id="__codelineno-95-8" name="__codelineno-95-8" href="#__codelineno-95-8"></a>            %4 : int = prim::Constant[value=0]()
<a id="__codelineno-95-9" name="__codelineno-95-9" href="#__codelineno-95-9"></a>            %5 : int = prim::Constant[value=0]()
<a id="__codelineno-95-10" name="__codelineno-95-10" href="#__codelineno-95-10"></a>            %6 : Tensor = aten::select(%x, %4, %5)
<a id="__codelineno-95-11" name="__codelineno-95-11" href="#__codelineno-95-11"></a>            %result.2 : Tensor = aten::mul(%result.1, %6)
<a id="__codelineno-95-12" name="__codelineno-95-12" href="#__codelineno-95-12"></a>            %8 : int = prim::Constant[value=0]()
<a id="__codelineno-95-13" name="__codelineno-95-13" href="#__codelineno-95-13"></a>            %9 : int = prim::Constant[value=1]()
<a id="__codelineno-95-14" name="__codelineno-95-14" href="#__codelineno-95-14"></a>            %10 : Tensor = aten::select(%x, %8, %9)
<a id="__codelineno-95-15" name="__codelineno-95-15" href="#__codelineno-95-15"></a>        -   %result : Tensor = aten::mul(%result.2, %10)
<a id="__codelineno-95-16" name="__codelineno-95-16" href="#__codelineno-95-16"></a>        +   %result.3 : Tensor = aten::mul(%result.2, %10)
<a id="__codelineno-95-17" name="__codelineno-95-17" href="#__codelineno-95-17"></a>        ?          ++
<a id="__codelineno-95-18" name="__codelineno-95-18" href="#__codelineno-95-18"></a>            %12 : int = prim::Constant[value=0]()
<a id="__codelineno-95-19" name="__codelineno-95-19" href="#__codelineno-95-19"></a>            %13 : int = prim::Constant[value=2]()
<a id="__codelineno-95-20" name="__codelineno-95-20" href="#__codelineno-95-20"></a>            %14 : Tensor = aten::select(%x, %12, %13)
<a id="__codelineno-95-21" name="__codelineno-95-21" href="#__codelineno-95-21"></a>        +   %result : Tensor = aten::mul(%result.3, %14)
<a id="__codelineno-95-22" name="__codelineno-95-22" href="#__codelineno-95-22"></a>        +   %16 : int = prim::Constant[value=0]()
<a id="__codelineno-95-23" name="__codelineno-95-23" href="#__codelineno-95-23"></a>        +   %17 : int = prim::Constant[value=3]()
<a id="__codelineno-95-24" name="__codelineno-95-24" href="#__codelineno-95-24"></a>        +   %18 : Tensor = aten::select(%x, %16, %17)
<a id="__codelineno-95-25" name="__codelineno-95-25" href="#__codelineno-95-25"></a>        -   %15 : Tensor = aten::mul(%result, %14)
<a id="__codelineno-95-26" name="__codelineno-95-26" href="#__codelineno-95-26"></a>        ?     ^                                 ^
<a id="__codelineno-95-27" name="__codelineno-95-27" href="#__codelineno-95-27"></a>        +   %19 : Tensor = aten::mul(%result, %18)
<a id="__codelineno-95-28" name="__codelineno-95-28" href="#__codelineno-95-28"></a>        ?     ^                                 ^
<a id="__codelineno-95-29" name="__codelineno-95-29" href="#__codelineno-95-29"></a>        -   return (%15);
<a id="__codelineno-95-30" name="__codelineno-95-30" href="#__codelineno-95-30"></a>        ?             ^
<a id="__codelineno-95-31" name="__codelineno-95-31" href="#__codelineno-95-31"></a>        +   return (%19);
<a id="__codelineno-95-32" name="__codelineno-95-32" href="#__codelineno-95-32"></a>        ?             ^
<a id="__codelineno-95-33" name="__codelineno-95-33" href="#__codelineno-95-33"></a>            }
</code></pre></div>
<p>此消息向我们表明，在我们第一次追踪它和使用<code>check_inputs</code>追踪它之间，计算有所不同。 实际上，<code>loop_in_traced_fn</code>主体内的循环取决于输入<code>x</code>的形状，因此，当我们尝试另一种形状不同的<code>x</code>时，迹线会有所不同。</p>
<p>在这种情况下，可以使用 <a href="#torch.jit.script" title="torch.jit.script"><code>torch.jit.script()</code></a> 来捕获类似于数据的控制流：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-96-1" name="__codelineno-96-1" href="#__codelineno-96-1"></a>def fn(x):
<a id="__codelineno-96-2" name="__codelineno-96-2" href="#__codelineno-96-2"></a>    result = x[0]
<a id="__codelineno-96-3" name="__codelineno-96-3" href="#__codelineno-96-3"></a>    for i in range(x.size(0)):
<a id="__codelineno-96-4" name="__codelineno-96-4" href="#__codelineno-96-4"></a>        result = result * x[i]
<a id="__codelineno-96-5" name="__codelineno-96-5" href="#__codelineno-96-5"></a>    return result
<a id="__codelineno-96-6" name="__codelineno-96-6" href="#__codelineno-96-6"></a>
<a id="__codelineno-96-7" name="__codelineno-96-7" href="#__codelineno-96-7"></a>inputs = (torch.rand(3, 4, 5),)
<a id="__codelineno-96-8" name="__codelineno-96-8" href="#__codelineno-96-8"></a>check_inputs = [(torch.rand(4, 5, 6),), (torch.rand(2, 3, 4),)]
<a id="__codelineno-96-9" name="__codelineno-96-9" href="#__codelineno-96-9"></a>
<a id="__codelineno-96-10" name="__codelineno-96-10" href="#__codelineno-96-10"></a>scripted_fn = torch.jit.script(fn)
<a id="__codelineno-96-11" name="__codelineno-96-11" href="#__codelineno-96-11"></a>print(scripted_fn.graph)
<a id="__codelineno-96-12" name="__codelineno-96-12" href="#__codelineno-96-12"></a>#print(str(scripted_fn.graph).strip())
<a id="__codelineno-96-13" name="__codelineno-96-13" href="#__codelineno-96-13"></a>
<a id="__codelineno-96-14" name="__codelineno-96-14" href="#__codelineno-96-14"></a>for input_tuple in [inputs] + check_inputs:
<a id="__codelineno-96-15" name="__codelineno-96-15" href="#__codelineno-96-15"></a>    torch.testing.assert_allclose(fn(*input_tuple), scripted_fn(*input_tuple))
</code></pre></div>
<p>产生：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-97-1" name="__codelineno-97-1" href="#__codelineno-97-1"></a>graph(%x : Tensor) {
<a id="__codelineno-97-2" name="__codelineno-97-2" href="#__codelineno-97-2"></a>    %5 : bool = prim::Constant[value=1]()
<a id="__codelineno-97-3" name="__codelineno-97-3" href="#__codelineno-97-3"></a>    %1 : int = prim::Constant[value=0]()
<a id="__codelineno-97-4" name="__codelineno-97-4" href="#__codelineno-97-4"></a>    %result.1 : Tensor = aten::select(%x, %1, %1)
<a id="__codelineno-97-5" name="__codelineno-97-5" href="#__codelineno-97-5"></a>    %4 : int = aten::size(%x, %1)
<a id="__codelineno-97-6" name="__codelineno-97-6" href="#__codelineno-97-6"></a>    %result : Tensor = prim::Loop(%4, %5, %result.1)
<a id="__codelineno-97-7" name="__codelineno-97-7" href="#__codelineno-97-7"></a>    block0(%i : int, %7 : Tensor) {
<a id="__codelineno-97-8" name="__codelineno-97-8" href="#__codelineno-97-8"></a>        %10 : Tensor = aten::select(%x, %1, %i)
<a id="__codelineno-97-9" name="__codelineno-97-9" href="#__codelineno-97-9"></a>        %result.2 : Tensor = aten::mul(%7, %10)
<a id="__codelineno-97-10" name="__codelineno-97-10" href="#__codelineno-97-10"></a>        -&gt; (%5, %result.2)
<a id="__codelineno-97-11" name="__codelineno-97-11" href="#__codelineno-97-11"></a>    }
<a id="__codelineno-97-12" name="__codelineno-97-12" href="#__codelineno-97-12"></a>    return (%result);
<a id="__codelineno-97-13" name="__codelineno-97-13" href="#__codelineno-97-13"></a>}
</code></pre></div>
<h4 id="_42"><a href="#id64">跟踪器警告</a></h4>
<p>跟踪器会针对跟踪计算中的几种有问题的模式生成警告。 举个例子，追踪一个在 Tensor 的切片(视图）上包含就地分配的函数：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-98-1" name="__codelineno-98-1" href="#__codelineno-98-1"></a>def fill_row_zero(x):
<a id="__codelineno-98-2" name="__codelineno-98-2" href="#__codelineno-98-2"></a>    x[0] = torch.rand(*x.shape[1:2])
<a id="__codelineno-98-3" name="__codelineno-98-3" href="#__codelineno-98-3"></a>    return x
<a id="__codelineno-98-4" name="__codelineno-98-4" href="#__codelineno-98-4"></a>
<a id="__codelineno-98-5" name="__codelineno-98-5" href="#__codelineno-98-5"></a>traced = torch.jit.trace(fill_row_zero, (torch.rand(3, 4),))
<a id="__codelineno-98-6" name="__codelineno-98-6" href="#__codelineno-98-6"></a>print(traced.graph)
</code></pre></div>
<p>产生几个警告和一个仅返回输入的图形：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-99-1" name="__codelineno-99-1" href="#__codelineno-99-1"></a>fill_row_zero.py:4: TracerWarning: There are 2 live references to the data region being modified when tracing in-place operator copy_ (possibly due to an assignment). This might cause the trace to be incorrect, because all other views that also reference this data will not reflect this change in the trace! On the other hand, if all other views use the same memory chunk, but are disjoint (e.g. are outputs of torch.split), this might still be safe.
<a id="__codelineno-99-2" name="__codelineno-99-2" href="#__codelineno-99-2"></a>    x[0] = torch.rand(*x.shape[1:2])
<a id="__codelineno-99-3" name="__codelineno-99-3" href="#__codelineno-99-3"></a>fill_row_zero.py:6: TracerWarning: Output nr 1\. of the traced function does not match the corresponding output of the Python function. Detailed error:
<a id="__codelineno-99-4" name="__codelineno-99-4" href="#__codelineno-99-4"></a>Not within tolerance rtol=1e-05 atol=1e-05 at input[0, 1] (0.09115803241729736 vs. 0.6782537698745728) and 3 other locations (33.00%)
<a id="__codelineno-99-5" name="__codelineno-99-5" href="#__codelineno-99-5"></a>    traced = torch.jit.trace(fill_row_zero, (torch.rand(3, 4),))
<a id="__codelineno-99-6" name="__codelineno-99-6" href="#__codelineno-99-6"></a>graph(%0 : Float(3, 4)) {
<a id="__codelineno-99-7" name="__codelineno-99-7" href="#__codelineno-99-7"></a>    return (%0);
<a id="__codelineno-99-8" name="__codelineno-99-8" href="#__codelineno-99-8"></a>}
</code></pre></div>
<p>我们可以通过修改代码来解决此问题，使其不使用就地更新，而是使用<code>torch.cat</code>来错位构建结果张量：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-100-1" name="__codelineno-100-1" href="#__codelineno-100-1"></a>def fill_row_zero(x):
<a id="__codelineno-100-2" name="__codelineno-100-2" href="#__codelineno-100-2"></a>    x = torch.cat((torch.rand(1, *x.shape[1:2]), x[1:2]), dim=0)
<a id="__codelineno-100-3" name="__codelineno-100-3" href="#__codelineno-100-3"></a>    return x
<a id="__codelineno-100-4" name="__codelineno-100-4" href="#__codelineno-100-4"></a>
<a id="__codelineno-100-5" name="__codelineno-100-5" href="#__codelineno-100-5"></a>traced = torch.jit.trace(fill_row_zero, (torch.rand(3, 4),))
<a id="__codelineno-100-6" name="__codelineno-100-6" href="#__codelineno-100-6"></a>print(traced.graph)
</code></pre></div>
<h3 id="_43"><a href="#id65">内置函数</a></h3>
<p>TorchScript 支持 PyTorch 提供的内置张量和神经网络功能的子集。 Tensor 上的大多数方法以及<code>torch</code>名称空间中的函数，<code>torch.nn.functional</code>中的所有函数以及<code>torch.nn</code>中的所有模块在 TorchScript 中均受支持，下表中没有列出。 对于不支持的模块，建议使用 <a href="#torch.jit.trace" title="torch.jit.trace"><code>torch.jit.trace()</code></a> 。</p>
<p>不支持的<code>torch.nn</code>模块</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-101-1" name="__codelineno-101-1" href="#__codelineno-101-1"></a>torch.nn.modules.adaptive.AdaptiveLogSoftmaxWithLoss
<a id="__codelineno-101-2" name="__codelineno-101-2" href="#__codelineno-101-2"></a>torch.nn.modules.normalization.CrossMapLRN2d
<a id="__codelineno-101-3" name="__codelineno-101-3" href="#__codelineno-101-3"></a>torch.nn.modules.rnn.RNN
</code></pre></div>
<p>有关支持的功能的完整参考，请参见 <a href="jit_builtin_functions.html#builtin-functions">TorchScript 内置函数</a>。</p>
<h2 id="_44"><a href="#id66">常见问题解答</a></h2>
<p>问：我想在 GPU 上训练模型并在 CPU 上进行推理。 最佳做法是什么？</p>
<blockquote>
<p>首先将模型从 GPU 转换为 CPU，然后将其保存，如下所示：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-102-1" name="__codelineno-102-1" href="#__codelineno-102-1"></a>cpu_model = gpu_model.cpu()
<a id="__codelineno-102-2" name="__codelineno-102-2" href="#__codelineno-102-2"></a>sample_input_cpu = sample_input_gpu.cpu()
<a id="__codelineno-102-3" name="__codelineno-102-3" href="#__codelineno-102-3"></a>traced_cpu = torch.jit.trace(traced_cpu, sample_input_cpu)
<a id="__codelineno-102-4" name="__codelineno-102-4" href="#__codelineno-102-4"></a>torch.jit.save(traced_cpu, &quot;cpu.pth&quot;)
<a id="__codelineno-102-5" name="__codelineno-102-5" href="#__codelineno-102-5"></a>
<a id="__codelineno-102-6" name="__codelineno-102-6" href="#__codelineno-102-6"></a>traced_gpu = torch.jit.trace(traced_gpu, sample_input_gpu)
<a id="__codelineno-102-7" name="__codelineno-102-7" href="#__codelineno-102-7"></a>torch.jit.save(traced_gpu, &quot;gpu.pth&quot;)
<a id="__codelineno-102-8" name="__codelineno-102-8" href="#__codelineno-102-8"></a>
<a id="__codelineno-102-9" name="__codelineno-102-9" href="#__codelineno-102-9"></a># ... later, when using the model:
<a id="__codelineno-102-10" name="__codelineno-102-10" href="#__codelineno-102-10"></a>
<a id="__codelineno-102-11" name="__codelineno-102-11" href="#__codelineno-102-11"></a>if use_gpu:
<a id="__codelineno-102-12" name="__codelineno-102-12" href="#__codelineno-102-12"></a>  model = torch.jit.load(&quot;gpu.pth&quot;)
<a id="__codelineno-102-13" name="__codelineno-102-13" href="#__codelineno-102-13"></a>else:
<a id="__codelineno-102-14" name="__codelineno-102-14" href="#__codelineno-102-14"></a>  model = torch.jit.load(&quot;cpu.pth&quot;)
<a id="__codelineno-102-15" name="__codelineno-102-15" href="#__codelineno-102-15"></a>
<a id="__codelineno-102-16" name="__codelineno-102-16" href="#__codelineno-102-16"></a>model(input)
</code></pre></div>
<p>推荐这样做是因为跟踪器可能会在特定设备上见证张量的创建，因此强制转换已加载的模型可能会产生意想不到的效果。 在保存之前对模型_进行转换可确保跟踪器具有正确的设备信息。_</p>
</blockquote>
<p>问：如何在 <a href="#torch.jit.ScriptModule" title="torch.jit.ScriptModule"><code>ScriptModule</code></a> 上存储属性？</p>
<blockquote>
<p>说我们有一个像这样的模型：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-103-1" name="__codelineno-103-1" href="#__codelineno-103-1"></a>class Model(nn.Module):
<a id="__codelineno-103-2" name="__codelineno-103-2" href="#__codelineno-103-2"></a>    def __init__(self):
<a id="__codelineno-103-3" name="__codelineno-103-3" href="#__codelineno-103-3"></a>        super(Model, self).__init__()
<a id="__codelineno-103-4" name="__codelineno-103-4" href="#__codelineno-103-4"></a>        self.x = 2
<a id="__codelineno-103-5" name="__codelineno-103-5" href="#__codelineno-103-5"></a>
<a id="__codelineno-103-6" name="__codelineno-103-6" href="#__codelineno-103-6"></a>    def forward(self):
<a id="__codelineno-103-7" name="__codelineno-103-7" href="#__codelineno-103-7"></a>        return self.x
<a id="__codelineno-103-8" name="__codelineno-103-8" href="#__codelineno-103-8"></a>
<a id="__codelineno-103-9" name="__codelineno-103-9" href="#__codelineno-103-9"></a>m = torch.jit.script(Model())
</code></pre></div>
<p>如果实例化<code>Model</code>，则将导致编译错误，因为编译器不了解<code>x</code>。 有四种方法可以通知编译器 <a href="#torch.jit.ScriptModule" title="torch.jit.ScriptModule"><code>ScriptModule</code></a> 的属性：</p>
<p>1. <code>nn.Parameter</code>-包装在<code>nn.Parameter</code>中的值将像在<code>nn.Module</code>上一样工作</p>
<p>2. <code>register_buffer</code>-包装在<code>register_buffer</code>中的值将像在<code>nn.Module</code>上一样工作。 这等效于<code>Tensor</code>类型的属性(请参见 4）。</p>
<p>3.常量-将类成员注释为<code>Final</code>(或在类定义级别将其添加到名为<code>__constants__</code>的列表中）会将包含的名称标记为常量。 常数直接保存在模型代码中。 有关详细信息，请参见 <a href="#python-defined-constants">Python 定义的常量</a>。</p>
<p>4.属性-可以将<a href="#supported-type">支持的类型</a>的值添加为可变属性。 可以推断大多数类型，但可能需要指定一些类型，有关详细信息，请参见<a href="#module-attributes">模块属性</a>。</p>
</blockquote>
<p>问：我想跟踪模块的方法，但一直出现此错误：</p>
<p><code>RuntimeError: Cannot insert a Tensor that requires grad as a constant. Consider making it a parameter or input, or detaching the gradient</code></p>
<blockquote>
<p>此错误通常表示您要跟踪的方法使用模块的参数，并且您正在传递模块的方法而不是模块实例(例如<code>my_module_instance.forward</code>与<code>my_module_instance</code>）。</p>
<p>&gt; *   使用模块的方法调用<code>trace</code>会将模块参数(可能需要渐变）捕获为<strong>常量</strong>。
&gt;   <br />
&gt;   <br />
&gt; *   另一方面，使用模块实例(例如<code>my_module</code>）调用<code>trace</code>会创建一个新模块，并将参数正确复制到新模块中，以便在需要时可以累积梯度。</p>
<p>要跟踪模块上的特定方法，请参见 <a href="#torch.jit.trace_module" title="torch.jit.trace_module"><code>torch.jit.trace_module</code></a></p>
</blockquote>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../83/" class="md-footer__link md-footer__link--prev" aria-label="Previous: torch.hub">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                torch.hub
              </div>
            </div>
          </a>
        
        
          
          <a href="../85/" class="md-footer__link md-footer__link--next" aria-label="Next: torch.nn.init">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                torch.nn.init
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "content.action.edit", "content.action.view", "navigation.footer"], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.d7c377c4.min.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>